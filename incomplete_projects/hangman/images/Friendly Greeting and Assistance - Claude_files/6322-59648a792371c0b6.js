"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6322],{66605:function(e,t,n){n.d(t,{P9:function(){return p},Vw:function(){return h},aP:function(){return f},cE:function(){return m},fg:function(){return x},us:function(){return g}});var r=n(5362),i=n(27218),s=n(6385),a=n(13262),l=n(10228),o=n(77930),d=n(7653),c=n(19132),u=n(22534);let f=e=>{let{activeOrganization:t}=(0,i.t)(),n=null==t?void 0:t.uuid,s=!!(t&&e.length>0),l=(0,d.useMemo)(()=>e.map(e=>"/api/organizations/".concat(n,"/sync/chat/").concat(e)),[n,e]),o=(0,d.useMemo)(()=>({queryKey:e.map(e=>[a.cF,{orgUuid:n,syncSourceUuid:e}]),enabled:s,refetchInterval:e=>!!(e.state.data&&(0,c.sf)(e.state.data))&&5e3,meta:{noToast:!0}}),[s,n,e]);return(0,r.Nl)(l,o)},h=e=>!!e.some(e=>e.isLoading)||e.some(e=>e.data&&(0,c.sf)(e.data)),x=e=>Math.ceil(f(e).reduce((e,t)=>{var n,r,i;return t.isLoading||!t.data?e:e+(null!==(i=null===(r=t.data)||void 0===r?void 0:null===(n=r.status)||void 0===n?void 0:n.current_size_bytes)&&void 0!==i?i:0)},0)/s.r6),m=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{account:t,activeOrganization:n}=(0,i.t)(),s=null==t?void 0:t.uuid,d=null==n?void 0:n.uuid,f=(0,o.useQueryClient)(),h=(0,c.gb)();return(0,r.uC)(()=>"/api/organizations/".concat(d,"/sync/chat"),"POST",{enabled:!!n,...e,onSuccess:function(){for(var t,n,r,i,o,c=arguments.length,u=Array(c),h=0;h<c;h++)u[h]=arguments[h];let[x]=u;f.setQueryData([a.cF,{orgUuid:d,syncSourceUuid:x.uuid}],x),x.type===l.Fg.GDRIVE&&x.config.uri&&(null===(t=x.status)||void 0===t?void 0:t.extra)&&(null===(n=x.status)||void 0===n?void 0:n.current_size_bytes)&&f.setQueryData([a.HI,{accountUUID:s,orgUUID:d,documentId:x.config.uri}],{uri:"drive:///".concat(x.config.uri),title:null===(i=x.status)||void 0===i?void 0:i.extra,size:null===(o=x.status)||void 0===o?void 0:o.current_size_bytes}),null===(r=e.onSuccess)||void 0===r||r.call(e,...u)},onError:function(){for(var t,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];null===(t=e.onError)||void 0===t||t.call(e,...r);let[s,a]=r;h(s,a),a.sync_source_type===l.Fg.GDRIVE&&(0,u.ZZ)(a.sync_source_config.uri)}})},p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{activeOrganization:t}=(0,i.t)(),n=null==t?void 0:t.uuid,s=(0,o.useQueryClient)();return(0,r.uC)(()=>"/api/organizations/".concat(n,"/sync/chat"),"PUT",{enabled:!!t,...e,onSuccess:function(){for(var t,r=arguments.length,i=Array(r),l=0;l<r;l++)i[l]=arguments[l];let[o]=i;s.setQueryData([a.cF,{orgUuid:n,syncSourceUuid:o.uuid}],o),null===(t=e.onSuccess)||void 0===t||t.call(e,...i)}})},g=()=>{let{activeOrganization:e}=(0,i.t)(),t=null==e?void 0:e.uuid;return(0,r.uC)(e=>"/api/organizations/".concat(t,"/sync/chat/").concat(e),"DELETE",{enabled:!!e})}},92676:function(e,t,n){n.d(t,{AQ:function(){return x},IP:function(){return u},gr:function(){return o},l2:function(){return d},yg:function(){return f},zB:function(){return c}});var r=n(5362),i=n(27218),s=n(13262),a=n(77930),l=n(19132);let o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{activeOrganization:n}=(0,i.t)(),s=null==n?void 0:n.uuid,a=h(),o=(0,l.gb)();return(0,r.uC)(()=>"/api/organizations/".concat(s,"/projects/").concat(e,"/syncs"),"POST",{enabled:!!(n&&e),...t,onSuccess:function(){for(var n,r=arguments.length,i=Array(r),s=0;s<r;s++)i[s]=arguments[s];a(e),null===(n=t.onSuccess)||void 0===n||n.call(t,...i)},onError:function(){for(var e,n=arguments.length,r=Array(n),i=0;i<n;i++)r[i]=arguments[i];null===(e=t.onError)||void 0===e||e.call(t,...r);let[s,a]=r;o(s,a)}})},d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{activeOrganization:n}=(0,i.t)(),s=null==n?void 0:n.uuid,a=h();return(0,r.uC)(()=>"/api/organizations/".concat(s,"/projects/").concat(e,"/syncs"),"PUT",{enabled:!!(n&&e),...t,onSuccess:function(){for(var n,r=arguments.length,i=Array(r),s=0;s<r;s++)i[s]=arguments[s];a(e),null===(n=t.onSuccess)||void 0===n||n.call(t,...i)}})},c=e=>{let{activeOrganization:t}=(0,i.t)(),n=null==t?void 0:t.uuid,a=h();return(0,r.Ne)(t=>"/api/organizations/".concat(n,"/projects/").concat(e,"/syncs/").concat(t),"DELETE",(e,t)=>t?t.filter(t=>t.uuid!==e):t,{queryKey:[s.AI,{orgUuid:n,projectUuid:e}],enabled:!!t,onSuccess:()=>{a(e)}})},u=e=>{let{activeOrganization:t}=(0,i.t)(),n=null==t?void 0:t.uuid,a=h();return(0,r.Ne)(()=>"/api/organizations/".concat(n,"/projects/").concat(e,"/syncs/delete_many"),"POST",(e,t)=>t?t.filter(t=>!e.sync_source_uuids.includes(t.uuid)):t,{queryKey:[s.AI,{orgUuid:n,projectUuid:e}],enabled:!!t,onSuccess:()=>{a(e)}})},f=e=>{let{activeOrganization:t}=(0,i.t)(),n=null==t?void 0:t.uuid,a=!!(t&&e),{data:o,isLoading:d}=(0,r.WE)("/api/organizations/".concat(n,"/projects/").concat(e,"/syncs"),{queryKey:[s.AI,{orgUuid:n,projectUuid:e}],enabled:a,refetchInterval:e=>{var t;return(null===(t=e.state.data)||void 0===t?void 0:t.some(l.sf))?5e3:3e5}});return{data:o,isLoading:!!a&&d}},h=()=>{let{activeOrganization:e}=(0,i.t)(),t=null==e?void 0:e.uuid,n=(0,a.useQueryClient)();return e=>{n.invalidateQueries({queryKey:[s.AI,{orgUuid:t,projectUuid:e}]}),n.invalidateQueries({queryKey:[s.Xg,{orgUuid:t,projectUuid:e}]})}},x=e=>{let{data:t}=f(e);return!!(null==t?void 0:t.some(l.sf))}},85465:function(e,t,n){n.d(t,{l:function(){return l}});var r=n(10228),i=n(2949),s=n(89111),a=n(74339);let l=()=>{let{initGithubAuth:e}=(0,s.Yn)(),{initDriveAuth:t}=(0,i.nC)();return n=>{n===r.Fg.GITHUB?e():n===r.Fg.GDRIVE?t():n===r.Fg.OUTLINE&&(0,a.fX)()}}},23098:function(e,t,n){n.d(t,{$P:function(){return y},Vq:function(){return k},Z0:function(){return w},mo:function(){return N},nR:function(){return _}});var r=n(66557),i=n(27218),s=n(6385),a=n(87033),l=n(10228),o=n(7653),d=n(41270),c=n(95899),u=n(92676),f=n(32559),h=n(2949),x=n(74339),m=n(35548),p=n(95586);let g={hardLimit:1e5},v={default:{max:g,raven:g,pro:g,free:g}},b=d.z.object({hardLimit:d.z.number().optional(),tokensPerImage:d.z.number().optional()}),j=d.z.object({free:b.optional(),pro:b.optional(),raven:b.optional(),max:b.optional()}),y=d.z.record(j.optional()),w=()=>{let{data:e,isLoading:t}=(0,f.O3)(),n=(0,p.H)();return{projects:e,isLoading:t,createProjectsDisabled:void 0!==n&&void 0!==e&&e.length>=n}},N=()=>{var e,t,n,r,s,l,o,d,c,u;let f=(0,i.Cf)(),h=(0,i.ZJ)(),x=(0,i.ue)(),m=(0,a.Zr)("console_default_model","model",null,a.rO),p=(0,a.xQ)("hatch_token_limits",v,y),g=null!==(e=p[null!=m?m:"default"])&&void 0!==e?e:null;return g||(g=null!==(t=p.default)&&void 0!==t?t:{}),Math.round(.9*(x?null!==(r=null==g?void 0:null===(n=g.max)||void 0===n?void 0:n.hardLimit)&&void 0!==r?r:19e4:f?null!==(l=null==g?void 0:null===(s=g.raven)||void 0===s?void 0:s.hardLimit)&&void 0!==l?l:19e4:h?null!==(d=null==g?void 0:null===(o=g.pro)||void 0===o?void 0:o.hardLimit)&&void 0!==d?d:19e4:null!==(u=null==g?void 0:null===(c=g.free)||void 0===c?void 0:c.hardLimit)&&void 0!==u?u:25e3))-4e3},_=e=>{let{data:t}=(0,c.Kf)(e),{data:n}=(0,u.yg)(e),{data:i}=(0,c.pK)(e),a=null==i?void 0:i.filter(e=>"document"===e.file_kind),d=(0,o.useMemo)(()=>{var e;return null!==(e=null==a?void 0:a.reduce((e,t)=>e+(0,m.ZJ)(t),0))&&void 0!==e?e:0},[a]),f=null==i?void 0:i.filter(e=>"image"===e.file_kind),p=(0,o.useMemo)(()=>{var e;return null!==(e=null==f?void 0:f.reduce((e,t)=>e+(0,m.Rv)(t),0))&&void 0!==e?e:0},[f]),g=(0,o.useMemo)(()=>(t||[]).map(e=>e.content).join(" "),[t]),v=(0,r.c)(g)+d+p,b=(0,o.useMemo)(()=>{var e,t;let r=null==n?void 0:n.filter(e=>e.type===l.Fg.GITHUB),i=null==n?void 0:n.filter(e=>e.type!==l.Fg.GITHUB),a=null!==(e=null==r?void 0:r.map(e=>e.status.current_size_bytes).filter(e=>!!e&&"number"==typeof e).reduce((e,t)=>e+t,0))&&void 0!==e?e:0,o=null!==(t=null==i?void 0:i.map(e=>e.status.current_size_bytes).filter(e=>!!e&&"number"==typeof e).reduce((e,t)=>e+t,0))&&void 0!==t?t:0;return Math.floor(a/s.dS+o/s.r6)},[n]),j=(0,o.useMemo)(()=>{var e;return null!==(e=null==n?void 0:n.filter(e=>e.type===l.Fg.GDRIVE).map(e=>e.config.uri))&&void 0!==e?e:[]},[n]),y=(0,h.mD)(j),w=(0,o.useMemo)(()=>{let e=y.map(e=>{let{data:t,isLoading:n}=e;return n||!t?0:t.size||0}).reduce((e,t)=>e+t,0);return e?e/s.r6:0},[y]),N=(0,o.useMemo)(()=>{var e;return null!==(e=null==n?void 0:n.filter(e=>e.type===l.Fg.OUTLINE).map(e=>e.config.outline_uri))&&void 0!==e?e:[]},[n]),_=(0,x.RS)(N),k=(0,o.useMemo)(()=>{let e=_.map(e=>{let{data:t,isLoading:n}=e;return n||!t?0:t.size||0}).reduce((e,t)=>e+t,0);return e?e/s.r6:0},[_]);return void 0!==t?void 0!==n?v+b+w+k:v:void 0!==n?b:void 0},k=e=>{let{mutate:t}=(0,f.dY)(e),{data:n}=(0,f.Yc)(e);return()=>{t({is_starred:!(null==n?void 0:n.is_starred)})}}},6688:function(e,t,n){n.d(t,{G:function(){return f},k:function(){return h}});var r=n(27573),i=n(27218),s=n(32737),a=n(11510),l=n(40950),o=n(45790),d=n(32559),c=n(53545);let u=e=>{let{intl:t}=e;return(0,r.jsx)(s.u,{tooltipContent:t.formatMessage({defaultMessage:"Claude will guide your learning process instead of just giving answers. You can adjust these instructions in the project anytime.",id:"X9ioIsDrqe"}),side:"right",align:"end",children:(0,r.jsx)(a.k,{size:16,className:"shrink-0"})})},f=(e,t)=>{let n=(0,i.Cf)(),s=(0,l.Z)(),a=(0,c.DU)();e=null!=e?e:null==a?void 0:a.type,t=null!=t?t:null==a?void 0:a.subtype;let f={};return n&&(f.createProjectTitle=s.formatMessage({defaultMessage:"Create a project",id:"HR5A+UPiIu"})),e===d.cd.Student&&(t===d.nL.Study&&(f.createProjectTitle=s.formatMessage({defaultMessage:"Create a study project",id:"aM+8eAE0xv"}),f.createProjectNameLabel=(0,r.jsxs)("div",{className:"flex gap-1 items-center",children:[(0,r.jsx)(o.Z,{defaultMessage:"What course are you studying?",id:"v36OurBGgA"}),(0,r.jsx)(u,{intl:s})]}),f.createProjectDescriptionDefault=s.formatMessage({defaultMessage:"A project for studying your course materials, where Claude helps visualize key concepts, build comprehensive study guides, and tutor you according to your learning needs.",id:"KXxo+Xoski"})),t===d.nL.Career&&(f.createProjectTitle=s.formatMessage({defaultMessage:"Create a career project",id:"so02zrH0dG"}),f.createProjectNameLabel=s.formatMessage({defaultMessage:"What are you working towards?",id:"lqTAz2gpwu"}),f.createProjectDescriptionDefault=s.formatMessage({defaultMessage:"A project for exploring career opportunities, where Claude helps match your skills to potential careers, improve your resume, and develop personalized roadmaps for professional growth.",id:"JlrkubQL9D"})),t===d.nL.Research&&(f.createProjectTitle=s.formatMessage({defaultMessage:"Create a research project",id:"L9PkdSYTu+"}),f.createProjectNameLabel=s.formatMessage({defaultMessage:"What are you researching?",id:"gsRiHcI+J7"}),f.createProjectDescriptionDefault=s.formatMessage({defaultMessage:"A project for developing academic research, where Claude helps identify key themes in your research, create structured outlines, and provide feedback to improve your drafts.",id:"WI7ROAQaAW"}))),f},h=e=>{let t=(0,l.Z)();if(!e)return{};let n=e.type,r=e.subtype,i={};return n===d.cd.Student&&(i.projectKnowledgeTitle=t.formatMessage({defaultMessage:"Reference materials",id:"IAK8rLiiAO"}),i.projectNoChatsMessage=t.formatMessage({defaultMessage:"Start a chat to keep conversations organized and re-use reference materials.",id:"ShAr8vcP2v"}),i.projectNoKnowledgeCantAddMessage=t.formatMessage({defaultMessage:"No reference materials added yet.",id:"2Gz7oaDTj0"}),i.projectKnowledgeDragDropMessage=t.formatMessage({defaultMessage:"Drop files here to add to reference materials",id:"hNUGHHYeEK"}),r===d.nL.Study&&(i.projectNoKnowledgeCanAddMessage=t.formatMessage({defaultMessage:"Drag and drop course materials like syllabi, lecture notes, or text-book excerpts so Claude can help you learn.",id:"hlIot3aXce"})),r===d.nL.Career&&(i.projectNoKnowledgeCanAddMessage=t.formatMessage({defaultMessage:"Drag and drop career materials like your resume, cover letters, or job descriptions to help Claude provide personalized professional advice.",id:"LXnjolwaEB"})),r===d.nL.Research&&(i.projectNoKnowledgeCanAddMessage=t.formatMessage({defaultMessage:"Drag and drop research materials like draft papers, source notes, or literature reviews to help Claude provide targeted academic guidance.",id:"c5oBAmpUAc"}))),i}},18409:function(e,t,n){n.d(t,{c:function(){return c},e:function(){return u}});var r=n(99205),i=n(6766),s=n(27218),a=n(87033),l=n(23098);let o={raven:{hardLimit:19e4,output:16384},pro:{hardLimit:19e4,output:8192},max:{hardLimit:19e4,output:16384},free:{hardLimit:30500,output:8192}},d={default:o},c=e=>{var t,n,r,i;let c=(0,s.Cf)(),u=(0,s.ZJ)(),f=(0,s.ue)(),h=(0,a.xQ)("hatch_token_limits",d,l.$P),x=null!==(r=null!==(n=h[e])&&void 0!==n?n:h.default)&&void 0!==r?r:o;return null!==(i=null==x?void 0:null===(t=x[c?"raven":u?"pro":f?"max":"free"])||void 0===t?void 0:t.hardLimit)&&void 0!==i?i:30500},u=(e,t)=>{let n=(0,r.wN)(e),{stickyModelPreference:s}=(0,i.M)();return c(e?n:t||s||n)}},35548:function(e,t,n){n.d(t,{Rv:function(){return a},ZJ:function(){return s},ZW:function(){return d},hn:function(){return l},y1:function(){return o}});var r=n(66557);n(87033);var i=n(7653);let s=e=>2e3*e.document_asset.page_count,a=e=>Math.min(1600,Math.ceil(e.preview_asset.image_width*e.preview_asset.image_height/700)),l=e=>e.reduce((e,t)=>e+a(t),0),o=(e,t,n)=>{let s=(0,r.c)(e),a=(0,i.useMemo)(()=>n.map(e=>e.extracted_content).join(" "),[n]);return s+(0,r.c)(a)+l(t)},d=(e,t)=>e/t>.4},57393:function(e,t,n){n.d(t,{e:function(){return d}});var r=n(27573),i=n(32737),s=n(88146),a=n(7653),l=n(45790),o=n(23098);let d=e=>{let t,{children:n,enabledWrapperStyles:d="",disabledWrapperStyles:c=""}=e,{createProjectsDisabled:u}=(0,o.Z0)();return t=u?c:d,(0,r.jsx)(i.u,{tooltipContent:u?(0,r.jsx)(l.Z,{defaultMessage:"You have reached the maximum number of projects. <upgradeLink>Upgrade</upgradeLink> for more.",id:"8XKCSUNy79",values:{upgradeLink:e=>(0,r.jsx)(s.default,{href:"/upgrade",className:"underline",children:e})}}):null,side:"bottom",children:(0,r.jsx)("div",{className:t,children:a.cloneElement(n,{disabled:u})})})}},53545:function(e,t,n){n.d(t,{Nv:function(){return C},DU:function(){return w}});var r=n(27573),i=n(3053),s=n(27218),a=n(87033),l=n(81695),o=n(45790),d=n(41270),c=n(32559),u=n(10607),f=n(50294);n(7653);var h=n(57393);let x=e=>{let{icon:t,title:n,description:i,onClick:s,variant:a,disabled:l=!1}=e;return(0,r.jsxs)("button",{className:(0,u.Z)("flex p-4 w-full items-center h-full","projects"===a?"flex-row-reverse sm:flex-col sm:items-start lg:flex-row-reverse lg:items-center":"flex-row sm:flex-col sm:items-start"),onClick:s,disabled:l,children:[(0,r.jsx)("div",{className:(0,u.Z)("relative mb-1","projects"===a?"lg:mb-0 lg:ml-2":"mr-2"),children:(0,r.jsx)(f.default,{src:t,height:50,width:50,alt:"",style:{opacity:l?"50%":"100%"}})}),(0,r.jsxs)("div",{className:"flex flex-col items-start w-full h-full",children:[(0,r.jsx)("h3",{className:(0,u.Z)("text-md font-medium text-text-200 text-left",l&&"text-text-500"),children:n}),(0,r.jsx)("p",{className:(0,u.Z)("text-sm text-text-200 text-left",l&&"text-text-500"),children:i})]})]})},m=e=>{let{variant:t="home",...n}=e;return(0,r.jsx)("div",{className:(0,u.Z)("w-full","projects"===t?"sm:w-48 sm:grow lg:w-52":"sm:w-48 lg:w-52"),children:(0,r.jsx)(h.e,{enabledWrapperStyles:"from-bg-100 to-bg-100/30 border-0.5 border-border-300 hover:from-bg-000/70 hover:to-bg-000/50 hover:border-border-300/30 text-text-200 hover:text-text-100 relative flex cursor-pointer flex-col gap-1.5 rounded-xl bg-gradient-to-b transition-all ease-in-out hover:shadow-sm active:scale-[0.995] md:gap-2 overflow-hidden h-full",disabledWrapperStyles:"border-0.5 border-border-300 text-text-200 relative flex cursor-pointer flex-col gap-1.5 rounded-xl md:gap-2 overflow-hidden h-full",children:(0,r.jsx)(x,{...n,variant:t})})})},p=d.z.object({type:d.z.nativeEnum(c.cd),subtype:d.z.nativeEnum(c.nL),icon_type:d.z.string(),custom_instructions:d.z.string()}),g=e=>{switch(e){case"edu_lightbulb":return"/images/illustrations/edu/edu-lightbulb.svg";case"edu_paper_and_quill":return"/images/illustrations/edu/edu-paper-and-quill.svg";case"edu_paper_and_magnifying_glass":return"/images/illustrations/edu/edu-paper-and-magnifying-glass.svg";default:return""}},v=(e,t)=>{if(e===c.cd.Student)switch(t){case c.nL.Study:return(0,r.jsx)(o.Z,{defaultMessage:"Study project",id:"SDlohOAVzo"});case c.nL.Career:return(0,r.jsx)(o.Z,{defaultMessage:"Career project",id:"MsM+7biLzH"});case c.nL.Research:return(0,r.jsx)(o.Z,{defaultMessage:"Research project",id:"OR/ar3drnQ"})}},b=(e,t)=>{if(e===c.cd.Student)switch(t){case c.nL.Study:return(0,r.jsx)(o.Z,{defaultMessage:"Learn and master any subject",id:"3vYdF/hF/f"});case c.nL.Career:return(0,r.jsx)(o.Z,{defaultMessage:"Find the next step for your career",id:"v6qrZ8g/Vy"});case c.nL.Research:return(0,r.jsx)(o.Z,{defaultMessage:"Analyze and organize research",id:"R19a/TH47z"})}},j=e=>e.map(e=>({id:"".concat(e.type,"-").concat(e.subtype),type:e.type,subtype:e.subtype,icon:g(e.icon_type),title:v(e.type,e.subtype),description:b(e.type,e.subtype),customInstructions:e.custom_instructions})),y=e=>e?(0,r.jsx)(o.Z,{defaultMessage:"Set up Claude for your classes, career, and research",id:"aU/3NrmiTd"}):"",w=()=>{let e=(0,l.useSearchParams)().get("projectStarter"),t=k();return e?t.options.find(t=>t.id===e):void 0},N=d.z.array(p),_=[],k=()=>{let e=(0,s.Zd)(),t=(0,a.Zr)("claude_ai_experience","project_templates",_,N);return{sectionTitle:y(e),options:j(t)}},C=e=>{let{variant:t="home"}=e,n=(0,l.useRouter)(),s=(0,i.z$)(),a=k();if(a.options.length)return(0,r.jsxs)("div",{className:"w-full mb-6",children:[(0,r.jsx)("h2",{className:"text-sm text-text-200 font-medium leading-6 ml-1",children:a.sectionTitle}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2 w-full mt-3 justify-center items-stretch",children:a.options.map(e=>(0,r.jsx)(m,{variant:t,icon:e.icon,title:e.title,description:e.description,onClick:()=>{s.track({event_key:"claudeai.projects.project_starter.clicked",project_type:e.type,project_subtype:e.subtype,path:window.location.pathname}),n.push("/projects/create?projectStarter="+e.id)}},e.id))})]})}},31860:function(e,t,n){n.d(t,{$:function(){return s}});var r=n(27573),i=n(10571);function s(e){let{title:t,url:n,isLoading:s,isError:a,isLink:l=!1,defaultErrorTitle:o,defaultDocumentTitle:d}=e,c=(0,r.jsx)("p",{children:d});return(a?c=(0,r.jsx)("p",{children:o}):!s||t||d?t&&(c=(0,r.jsx)("p",{children:t})):c=(0,r.jsx)(i.g,{className:"opacity-25 rounded-md",height:18}),l&&n)?(0,r.jsx)("a",{href:n,target:"_blank",rel:"noopener noreferrer",children:c}):c}},71101:function(e,t,n){n.d(t,{C:function(){return l}});var r=n(27573),i=n(2949),s=n(84344),a=n(31860);function l(e){let{uri:t,isError:n,isLink:l=!1}=e,{data:o,isLoading:d}=(0,i.Mv)({documentId:t}),c=(0,s.m)(t);return(0,r.jsx)(a.$,{title:null==o?void 0:o.title,url:c,isLoading:d,isError:n,isLink:l,defaultErrorTitle:"Google Docs"})}},8628:function(e,t,n){n.d(t,{g:function(){return G},o:function(){return W}});var r=n(27573),i=n(8571),s=n(32006),a=n(70354),l=n(60949),o=n(11607),d=n(32737),c=n(30947),u=n(6385);let f=e=>new Intl.NumberFormat().format(e);var h=n(10228),x=n(10484),m=n(35807),p=n(96346),g=n(34174),v=n(13140),b=n(39992),j=n(80151),y=n(67578),w=n(30070),N=n(76203),_=n(6092),k=n(66240),C=n(10607),M=n(8927),z=n(68425),S=n(87590),E=n.n(S),L=n(88146),Z=n(7653),I=n(45790),F=n(40950),D=n(89111),A=n(34326);let T="lastSelectedRepo";function R(e,t){return{name:e,path:t.endsWith("/")?t:t+"/",size:0,children:new Map}}function G(e){var t,n;let{initialConfig:i,tokenLimit:s,alreadyUsedTokens:a,onSubmit:l,isSubmitting:o}=e,[d,c]=(0,Z.useState)("/"),f=void 0===i,h=s*u.dS,[x,m]=(0,Z.useState)(()=>{if(i)return i;let e=function(){let e=localStorage.getItem(T);if(e){var t;let n=JSON.parse(e);if(n&&"object"==typeof(t=n)&&null!==t&&"string"==typeof t.owner&&"string"==typeof t.repo&&"string"==typeof t.branch)return n}return null}();return e?{owner:e.owner,repo:e.repo,branch:e.branch,filters:{filters:{}}}:{}}),{owner:p,repo:g,branch:v,filters:b}=x;(0,Z.useEffect)(()=>{c("/")},[g]);let j=e=>{m({owner:p,repo:g,branch:v,filters:{filters:e}})},y=(0,Z.useMemo)(()=>!E()(null==i?void 0:i.filters,b),[i,b]),{data:w,isFetching:N,error:_}=(0,D.Y$)({owner:p,repo:g,branch:v}),k=(0,Z.useMemo)(()=>(function(e,t){if(!t||!e)return[];let n=[];for(let r of t.tree)"blob"===r.type&&(0,A.VG)(e,"/"+r.path)&&n.push(r);return n})(null==b?void 0:b.filters,w.tree),[null==b?void 0:b.filters,w.tree]),C=Math.ceil(100*k.map(e=>e.size).reduce((e,t)=>e+t,0)/h)+Math.ceil(100*a/s),M=(0,Z.useMemo)(()=>w.tree?function(e){let t={name:"",path:"/",size:0,children:new Map};for(let n of e.tree){let e=n.path.split("/"),r=e.pop(),i=t;for(let t=0;t<e.length;t++){let r=e[t];if(!i.children.has(r)){let n="/"+e.slice(0,t+1).join("/");i.children.set(r,R(r,n))}"blob"===n.type&&(i.size+=n.size),i=i.children.get(r)}"blob"===n.type?(i.children.set(r,{name:r,path:"/"+n.path,size:n.size}),i.size+=n.size):i.children.set(r,R(r,"/"+n.path))}return t}(w.tree):null,[w.tree]);(0,Z.useEffect)(()=>{(null==w?void 0:w.repo)&&(null==w?void 0:w.repo.default_branch)&&!v&&m(e=>({...e,branch:w.repo.default_branch}))},[null==w?void 0:w.repo,v,m]),(0,Z.useEffect)(()=>{if(p&&g&&v){var e;e={owner:p,repo:g,branch:v},localStorage.setItem(T,JSON.stringify(e))}},[p,g,v]);let[z,S]=(0,Z.useState)("");return(0,r.jsxs)("div",{className:"rounded-xl border-0.5 border-border-300 bg-bg-000 shadow-sm h-[600px] flex flex-col",children:[(0,r.jsx)(B,{isCreating:f,config:x,setConfig:m,searchQuery:z,setSearchQuery:S,isSubmitting:o,percentUsed:C,onSubmit:l,areFiltersDirty:y}),N?(0,r.jsx)(O,{}):null!==_?(0,r.jsx)(U,{error:_}):g&&p&&v?z?(0,r.jsx)(K,{rootNode:M,searchQuery:z,filters:null!==(t=null==b?void 0:b.filters)&&void 0!==t?t:{},setFilters:j,sizeLimit:h,setCurrentDirectory:c,setSearchQuery:S}):(0,r.jsx)(W,{repo:g,rootNode:M,filters:null!==(n=null==b?void 0:b.filters)&&void 0!==n?n:{},setFilters:j,sizeLimit:h,currentDirectory:d,setCurrentDirectory:c}):(0,r.jsx)(P,{}),(0,r.jsx)(Y,{percentUsed:C,selectedPaths:k,alreadyUsedTokens:a,tokenLimit:s})]})}function P(){return(0,r.jsx)("div",{className:"flex items-center justify-center h-full bg-bg-000 text-sm text-text-300 border-border-300 border-t-0.5",children:(0,r.jsx)(I.Z,{defaultMessage:"Select a repository or paste a URL above to get started",id:"aGsfPG9sTD"})})}let O=()=>(0,r.jsxs)("div",{className:"flex items-center justify-center gap-3 h-full bg-bg-000 shadow-sm text-sm text-text-300",children:[(0,r.jsx)("div",{children:(0,r.jsx)(o.Loading,{size:"sm"})}),(0,r.jsx)(I.Z,{defaultMessage:"Fetching repository...",id:"hnjVW1oRt2"})]});function U(e){let{error:t}=e,{githubAppUrl:n}=(0,i.m)(),s="".concat(n,"/installations/select_target"),a=t instanceof c.Hx&&404===t.statusCode,l=t instanceof c.Hx&&"github_get_tree_api_call_limit_exceeded"===t.errorCode;return(0,r.jsx)("div",{className:"flex h-full bg-bg-000 text-sm text-text-300 border-border-300 border-t-0.5",children:(0,r.jsx)("div",{className:"flex items-center gap-2 m-6",children:a?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(x.Q,{size:16}),(0,r.jsx)("span",{children:(0,r.jsx)(I.Z,{defaultMessage:"Claude cannot access that resource. If you know that it exists, you may first need to grant or request access <link>here</link>.",id:"41xNOZpKM8",values:{link:e=>(0,r.jsx)(L.default,{href:s,target:"_blank",className:"underline",children:e})}})})]}):l?(0,r.jsx)("span",{className:"text-danger-000",children:(0,r.jsx)(I.Z,{defaultMessage:"Please try a smaller repo.",id:"lvImCTHUvN"})}):(0,r.jsx)("span",{className:"text-danger-000",children:(0,r.jsx)(I.Z,{defaultMessage:"An error occurred while fetching that resource. Please try again.",id:"u8OHhkIcYv"})})})})}function B(e){var t,n;let{config:i,setConfig:l,isCreating:o,isSubmitting:d,percentUsed:c,searchQuery:u,setSearchQuery:f,onSubmit:x,areFiltersDirty:p}=e,[g,v]=(0,Z.useState)(!1),[b,j]=(0,Z.useState)(!1);return(0,r.jsxs)("div",{className:"flex flex-row gap-2 items-center py-2 min-h-14 px-4 text-sm font-styrene border-b-0.5 border-border-300",children:[(0,r.jsx)(s.j0,{size:18,type:h.Fg.GITHUB,className:"flex-shrink-0"}),!g&&(0,r.jsx)(q,{config:i,setConfig:l,isCreating:o}),(0,r.jsxs)("div",{className:"inline-flex gap-0 items-center",children:[(0,r.jsx)(H,{isCreating:o,isExpanded:g,setIsExpanded:v,setConfig:l,className:(0,C.Z)({"flex-1 flex-shrink":o&&g})}),i.repo&&!g&&(0,r.jsx)(V,{isExpanded:b,setIsExpanded:j,searchQuery:u,setSearchQuery:f,className:"flex-1 flex-shrink"})]}),(0,r.jsx)(M.M,{children:!g&&i.repo&&!(0,A.xb)(null!==(n=null===(t=i.filters)||void 0===t?void 0:t.filters)&&void 0!==n?n:{})&&(o||p)&&(0,r.jsx)(z.E.div,{className:"ml-auto",initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",damping:20,stiffness:400,delay:0},children:(0,r.jsx)(a.z,{disabled:d||c>100||!i.owner||!i.repo||!i.branch,onClick:()=>x(i),children:d?(0,r.jsx)(r.Fragment,{children:(0,r.jsx)(m.U,{className:"animate-spin"})}):o?(0,r.jsx)(I.Z,{defaultMessage:"Add files",id:"xrAjmQ72mN"}):(0,r.jsx)(I.Z,{defaultMessage:"Update",id:"BWpuKlRSA1"})})})})]})}function q(e){let{config:t,setConfig:n,isCreating:i,className:s}=e,{data:a=[]}=(0,D.Mr)(),l=a.map(e=>({owner:e.owner.login,repo:e.name,branch:e.default_branch}));t.owner&&t.repo&&t.branch&&!l.some(e=>e.repo===t.repo&&e.owner===t.owner&&e.branch===t.branch)&&l.unshift({owner:t.owner,repo:t.repo,branch:t.branch});let[o,d]=(0,Z.useState)(void 0);return(0,Z.useEffect)(()=>{t.owner&&t.repo&&t.branch?d(JSON.stringify({owner:t.owner,repo:t.repo,branch:t.branch})):d(void 0)},[t]),(0,r.jsx)("div",{className:s,children:(0,r.jsxs)(k.fC,{value:o,onValueChange:e=>{n({...JSON.parse(e),filters:{filters:{}}}),d(e)},disabled:!i,children:[(0,r.jsxs)(k.xz,{className:(0,C.Z)("flex flex-row rounded-md border-0.5 px-2 border-border-300 py-1 items-center gap-1 text-nowrap overflow-x-hidden",{"max-w-96  pointer-cursor select-none hover:bg-bg-100 ":i,"bg-bg-100":!i}),children:[(0,r.jsx)(k.B4,{placeholder:"Select a repository"}),i&&(0,r.jsx)(k.JO,{className:"pl-1",children:(0,r.jsx)(p.p,{})})]}),(0,r.jsx)(k.h_,{children:(0,r.jsx)(k.VY,{className:"border-0.5 border-border-300 bg-bg-100 min-w-72 rounded-lg shadow-sm z-dropdown mt-1 p-1 max-h-96 overflow-y-auto",position:"popper",children:(0,r.jsx)(k.l_,{className:"overflow-auto",children:l.map((e,t)=>(0,r.jsx)(k.ck,{value:JSON.stringify(e),className:(0,C.Z)("relative flex flex-row p-1.5 cursor-pointer hover:bg-bg-200 focus:outline-none focus:bg-bg-200 rounded-md"),children:(0,r.jsx)(k.eT,{children:(0,r.jsxs)("span",{className:"flex flex-row text-sm items-center ",children:[(0,r.jsxs)("span",{children:[(0,r.jsx)("span",{className:"text-text-300",children:e.owner}),"\xa0",(0,r.jsx)("span",{className:"text-text-500/50",children:"/"}),"\xa0",(0,r.jsx)("span",{className:"text-text-000",children:e.repo})]}),(!i||i&&"master"!==e.branch&&"main"!==e.branch)&&(0,r.jsxs)("span",{className:" flex flex-row font-mono text-xs text-text-300 rounded-full px-1.5 ml-2 gap-1 items-center bg-border-400/[0.03] border-border-300 border-0.5 ",children:[(0,r.jsx)(g.S,{}),e.branch]})]})})},t))})})})]})})}function H(e){let{isCreating:t,isExpanded:n,setIsExpanded:i,setConfig:s,className:l}=e,o=(0,F.Z)(),[c,u]=(0,Z.useState)(""),f=()=>{let{owner:e,repo:t,branch:n}=function(e){let t;try{t=new URL(null!=e?e:"")}catch(e){return{}}if("github.com"!==t.hostname)return{};let[,n,r,i,...s]=t.pathname.split("/");return{owner:n,repo:r,location:i,branch:s.join("/").replace(/\/$/,"")}}(c);s({owner:e,repo:t,branch:n,filters:{filters:{}}}),i(!1),u("")};return t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:(0,C.Z)("flex flex-row gap-1 items-center text-sm px-0.5",{"border-0.5 border-border-300 rounded-md h-[29px] w-64 transition":n},l),children:[(0,r.jsx)(d.u,{tooltipContent:"Paste GitHub URL",children:!n&&(0,r.jsx)(a.z,{onClick:()=>i(!n),size:"icon_sm",variant:"ghost",disabled:n,children:(0,r.jsx)(v.a,{size:16})})}),n&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",{className:"flex-1 border-none bg-transparent bg-none px-0 focus:ring-0 p-0 text-sm ml-2",type:"text",value:c,onChange:e=>u(e.target.value),placeholder:o.formatMessage({defaultMessage:"Paste GitHub URL",id:"RobpzbjbFb"}),autoFocus:!0,onKeyDown:e=>{"Enter"===e.key&&f()}}),c&&(0,r.jsx)(M.M,{children:(0,r.jsx)(z.E.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.95,opacity:0},transition:{type:"spring",damping:20,stiffness:400,delay:0},children:(0,r.jsx)(a.z,{onClick:f,size:"icon_xs",children:(0,r.jsx)(b.U,{})})})})]})]}),n&&(0,r.jsx)(a.z,{onClick:()=>{i(!1),u("")},size:"icon_sm",variant:"ghost",className:"ml-2",children:(0,r.jsx)(j.X,{})})]})}function V(e){let{isExpanded:t,setIsExpanded:n,searchQuery:i,setSearchQuery:s,className:l}=e,o=(0,F.Z)();return(0,r.jsxs)("div",{className:(0,C.Z)("flex flex-row items-center text-sm pl-0 p-1",{"border-0.5 border-border-300 rounded-md h-[29px] transition":t},l),children:[(0,r.jsx)(d.u,{tooltipContent:"Search files",children:(0,r.jsx)(a.z,{onClick:()=>n(!t),size:"icon_sm",variant:"ghost",disabled:t,children:(0,r.jsx)(y.Y,{size:"16"})})}),t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("input",{type:"text",placeholder:o.formatMessage({defaultMessage:"Search files",id:"8xPuGUna7W"}),value:i,className:"flex-1 border-none bg-transparent bg-none px-0 focus:ring-0 p-0 text-sm ",onChange:e=>s(e.target.value),autoFocus:!0}),(0,r.jsx)(a.z,{onClick:()=>{s(""),n(!1)},size:"icon_xs",variant:"ghost",children:(0,r.jsx)(j.X,{})})]})]})}function W(e){let{repo:t,rootNode:n,filters:i,setFilters:s,sizeLimit:a,currentDirectory:o,setCurrentDirectory:d}=e,c=function(e,t){let n=t.split("/").slice(1,-1),r=e;for(let e of n){if(!r.children)return null;r=r.children.get(e)}return r}(n,o),u=(null==c?void 0:c.children)?[...c.children.values()].sort((e,t)=>e.children?t.children?e.path.localeCompare(t.path):-1:1):[],f=(0,Z.useMemo)(()=>{let e=[],n=o;for(;n;){let r=n.slice(n.lastIndexOf("/",n.length-2)).slice(1,-1);e.unshift({name:r||t,path:n}),n=(0,A.Il)(n)}return e},[t,o]),h=c?Q(c,i)?"partial":(0,A.VG)(i,c.path)?"checked":"unchecked":"unchecked";return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("div",{className:"flex items-center gap-2 py-2 px-4 border-b-0.5 border-border-300 bg-bg-100/50 text-sm",children:[c&&(0,r.jsx)(l.g,{checkState:h,onClick:e=>{let{didCheck:t}=e;t?s((0,A.Yw)(i,c.path)):s((0,A.F8)(i,c.path))}}),(0,r.jsx)("div",{className:"flex-row gap-1 ",children:f.map((e,t)=>{let{path:n,name:i}=e;return f.length===t+1?(0,r.jsx)("span",{children:i},t):(0,r.jsxs)("span",{className:"first-child:pointer-events-none",children:[(0,r.jsx)("button",{className:"hover:text-text-200 text-text-500 transition",onClick:()=>d(n),children:i}),t<f.length-1&&(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("span",{className:"mx-1 text-text-500/50",children:"/"})})]},t)})})]},"breadcrumbs")}),(0,r.jsx)("div",{className:"flex flex-col h-full overflow-y-scroll",children:u.map(e=>(0,r.jsx)(X,{node:e,showPath:!1,filters:i,sizeLimit:a,onUpdateFilters:s,onClick:e.children?()=>d(e.path):void 0},e.path))},"rows")]})}function K(e){let{rootNode:t,searchQuery:n,filters:i,setFilters:s,sizeLimit:a,setCurrentDirectory:l,setSearchQuery:o}=e,d=(0,Z.useMemo)(()=>{let e=[],r=[t],i=n.toLowerCase();for(;r.length>0&&e.length<50;){let t=r.pop();t.children&&r.push(...t.children.values()),t.path.toLowerCase().includes(i)&&e.push(t)}return e},[n,t]);return(0,r.jsx)("div",{className:"flex flex-col h-full overflow-y-scroll",children:d.slice(0,100).map(e=>(0,r.jsx)(X,{node:e,showPath:!0,filters:i,sizeLimit:a,onUpdateFilters:s,onClick:e.children?()=>{l(e.path),o("")}:void 0,onNavigate:e=>{l(e),o("")}},e.path))},"rows")}function Y(e){let{percentUsed:t,selectedPaths:n,alreadyUsedTokens:i,tokenLimit:s}=e,{progressBarPercentPrimary:a,progressBarPercentSecondary:l}=(0,Z.useMemo)(()=>{let e=Math.min(100,Math.ceil(100*i/s));return{progressBarPercentPrimary:Math.min(100,t-e),progressBarPercentSecondary:e}},[t,i,s]),o=(0,r.jsx)(I.Z,{defaultMessage:"{percentUsed}% of capacity used",id:"1VbFlPsYRL",values:{percentUsed:J(t)}});return(0,r.jsxs)("div",{className:(0,C.Z)("flex text-xs items-center justify-between border-border-300 border-t-0.5 py-2 px-4 rounded-b-lg transition",{"bg-danger-100 text-danger-900":t>=100},{"text-text-300":t<100}),children:[n.length&&t<100?(0,r.jsx)("p",{children:(0,r.jsx)(I.Z,{defaultMessage:"{selected, plural, one {# file} other {# files}} selected",id:"F7Bwhc8GRB",values:{selected:n.length}})}):t<100?(0,r.jsx)("p",{children:(0,r.jsx)(I.Z,{defaultMessage:"Select files to add to chat context",id:"t6XeSPdQqI"})}):(0,r.jsxs)("div",{className:"inline-flex gap-2 items-center ",children:[(0,r.jsx)(w.v,{className:"opacity-80",size:14}),(0,r.jsx)("p",{children:(0,r.jsx)(I.Z,{defaultMessage:"Remove some files to stay within size limits",id:"k+ns1o6klw"})})]}),(0,r.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,r.jsx)($,{totalPercent:t,secondaryPercent:l}),(0,r.jsx)("span",{className:"min-w-10 text-right",children:l>0?(0,r.jsx)(d.u,{tooltipContent:"".concat(J(l),"% used by other knowledge + ").concat(J(a),"% by this content"),children:(0,r.jsx)("span",{children:o})}):o})]})]})}function Q(e,t){if(void 0===e.children)return!1;if((0,A.VG)(t,e.path)){for(let n of e.children.values())if(!(0,A.VG)(t,n.path)||Q(n,t))return!0}else for(let n of e.children.values())if((0,A.VG)(t,n.path)||Q(n,t))return!0;return!1}function X(e){let{node:t,showPath:n,filters:i,sizeLimit:s,onUpdateFilters:a,onClick:o,onNavigate:d}=e,c=void 0!==t.children,u=(0,A.VG)(i,t.path),f=Q(t,i);return(0,r.jsxs)("div",{onClick:o,className:(0,C.Z)("group flex justify-start items-center gap-2 py-2 px-4 border-b-0.5 border-border-400 hover:bg-bg-100",{"cursor-pointer":o}),children:[(0,r.jsx)(l.g,{checkState:f?"partial":u?"checked":"unchecked",onClick:e=>{let{didCheck:n}=e;n?a((0,A.Yw)(i,t.path)):a((0,A.F8)(i,t.path))}}),void 0===t.children?(0,r.jsx)(N.$,{weight:"light",size:20,className:"flex-shrink-0 text-text-400"}):(0,r.jsx)(_.g,{weight:"fill",className:"flex-shrink-0 text-accent-secondary-200",size:20}),(0,r.jsx)("div",{className:(0,C.Z)("w-5/6 text-text-100 overflow-x-hidden text-ellipsis text-nowrap",{"text-text-200 group-hover:text-text-000":c}),onClick:e=>{c&&o&&(e.stopPropagation(),o())},children:n?(e=>{let t=e.replace(/^\/+|\/+$/g,"").split("/");return(0,r.jsx)("span",{children:t.map((e,n)=>{let i="/"+t.slice(0,n+1).join("/")+"/",s=n===t.length-1,a=!s&&d?e=>{e.stopPropagation(),d(i)}:void 0;return(0,r.jsxs)("span",{children:[(0,r.jsx)(s?"span":"button",{className:(0,C.Z)(s?"text-text-000":"text-text-400",a?"hover:text-text-100 transition":""),onClick:a,children:e}),!s&&(0,r.jsx)("span",{className:"opacity-25 mx-1",children:"/"})]},n)})})})(t.path):t.name}),s&&(0,r.jsxs)("span",{className:"w-1/6 text-text-400 text-xs text-right",children:[J(100*t.size/s),"%"]})]})}function J(e){return 0===e?"0":e<1?"<1":f(Math.ceil(e))}function $(e){let{totalPercent:t,secondaryPercent:n=0}=e,i=t>=100,s=t-n;return(0,r.jsx)("div",{className:"bg-bg-100 border-0.5 border-border-300 w-24 h-2 rounded-full overflow-hidden relative",children:(0,r.jsxs)("div",{className:"absolute inset-0",children:[n>0?(0,r.jsx)("div",{style:{width:"".concat(Math.min(100,Math.max(0,n)),"%")},className:"absolute inset-y-0 left-0 bg-border-400"}):null,s>0?(0,r.jsx)("div",{style:{width:"".concat(Math.min(100-(n||0),Math.max(s>0?4:0,s)),"%"),left:"".concat(n||0,"%")},className:(0,C.Z)("absolute inset-y-0 transition-all",{"bg-danger-100":i,"bg-text-100":!i})}):null]})})}},31275:function(e,t,n){n.d(t,{U:function(){return h}});var r=n(27573),i=n(52939),s=n(6385),a=n(10228),l=n(7653),o=n(66605),d=n(92676),c=n(23098),u=n(18409),f=n(8628);function h(e){let{isOpen:t,onClose:n,onCreated:h,projectUuid:x,location:m,syncSource:p,setIsUploadingGithubSync:g}=e,v=(0,c.mo)(),b=(0,u.e)(null),j="project"===m&&x?v:b,y=(0,c.nR)(x),w=(0,l.useMemo)(()=>{if(x&&void 0!==y){var e;return Math.max(0,y-((null==p?void 0:null===(e=p.status)||void 0===e?void 0:e.current_size_bytes)?p.type===a.Fg.GITHUB?p.status.current_size_bytes/s.dS:p.status.current_size_bytes/s.r6:0))}return 0},[x,y,p]),N=(0,l.useCallback)(e=>{null==h||h(e)},[h]),{mutate:_,isPending:k}=(0,d.gr)(x,{onSuccess:N,onError:()=>null==g?void 0:g(!1)}),{mutate:C,isPending:M}=(0,d.l2)(x,{onSuccess:n}),{mutate:z,isPending:S}=(0,o.cE)({onSuccess:N,onError:()=>null==g?void 0:g(!1)}),{mutate:E,isPending:L}=(0,o.P9)({onSuccess:n}),Z=(0,l.useCallback)(e=>{p?("project"===m&&x?C:E)({sync_source_uuid:p.uuid,sync_source_config:e}):(null==g||g(!0),n(),("project"===m&&x?_:z)({sync_source_type:a.Fg.GITHUB,sync_source_config:e}))},[p,m,x,_,C,z,E,n,g]);return(0,r.jsx)(i.u_,{isOpen:t,onClose:n,title:"Add content from GitHub",subtitle:"Select the files you would like to add to this ".concat(x?"project":"chat"),modalSize:"xl",hasCloseButton:!0,autoCloseOnFocusOut:!1,children:(0,r.jsx)("div",{className:"mt-2",children:(0,r.jsx)(f.g,{initialConfig:null==p?void 0:p.config,tokenLimit:j,alreadyUsedTokens:w,isSubmitting:k||M||S||L,onSubmit:Z})})})}},90824:function(e,t,n){n.d(t,{dF:function(){return v},n4:function(){return _}});var r=n(27573),i=n(91887),s=n(67677),a=n(32006),l=n(13890),o=n(10228),d=n(7653),c=n(40950),u=n(2949),f=n(74339),h=n(85465),x=n(31275),m=n(84344);let p=e=>{let t=(0,c.Z)(),n={[o.co.UNAUTHENTICATED]:t.formatMessage({defaultMessage:"Authentication needed",id:"AYP3OHxyGn"}),[o.co.ACCESS_DENIED]:t.formatMessage({defaultMessage:"Content not accessible",id:"IPK01iLM7n"}),[o.co.DISABLED]:t.formatMessage({defaultMessage:"Feature disabled by organization",id:"0mkp6rxalw"})};return e in n?n[e]:void 0},g=e=>{var t;let{syncSourceType:n,syncStatus:s,title:a,url:d,handleClick:c,isLoading:u,actions:f,isSyncing:x,...m}=e,g=(0,l.ir)(s),v=p(s),b=(0,h.l)(),y={};return y=s===o.co.UNAUTHENTICATED?{handleClick:()=>{b(n)}}:c?{handleClick:c}:{url:d},(0,r.jsx)(i.vQ,{actions:f,title:null!==(t=null!=v?v:a)&&void 0!==t?t:"Untitled",tag:(0,r.jsx)(j,{type:n}),isError:g,isLoading:u,isSyncing:x,...y,...m})},v=e=>{let{syncSourceType:t,syncStatus:n,url:i,...d}=e,c=(0,l.ir)(n),u=p(n),f=(0,h.l)(),x={};x=n===o.co.UNAUTHENTICATED?{handleClick:()=>{f(t)}}:{url:i};let m=(0,r.jsx)(a.j0,{size:14,type:t,variant:t===o.Fg.GDRIVE?a.cT.DOCS:void 0});return c?(0,r.jsx)(s.s,{...d,...x,isError:!0,title:u,icon:m,subtitles:void 0,tag:void 0}):(0,r.jsx)(s.s,{...d,...x,icon:m})},b={[o.Fg.GDRIVE]:"DOC",[o.Fg.OUTLINE]:"DOC",[o.Fg.GITHUB]:"GITHUB",[o.Fg.SALESFORCE]:"SALESFORCE",[o.Fg.GMAIL]:"EMAIL",[o.Fg.GCAL]:"CALENDAR",[o.Fg.SLACK]:"SLACK",[o.Fg.ASANA]:"ASANA"},j=e=>{let{type:t}=e;return(0,r.jsxs)(i.l1,{children:[(0,r.jsx)(a.j0,{type:t,size:12,variant:t===o.Fg.GDRIVE?a.cT.DOCS:void 0}),(0,r.jsx)("p",{className:"uppercase truncate font-styrene text-text-300 text-[11px] leading-[13px]",children:b[t]})]})},y=e=>{let{projectUuid:t,syncSource:n,location:i,actions:s,isSyncing:a,...o}=e,[c,u]=(0,d.useState)(!1),{owner:f,repo:h}=n.config,m="".concat(f,"/").concat(h),p=n.config.branch,v=!(0,l.ir)(n.status.state),b=o.isEditable&&v,j=b||o.isInSelectionMode;return(0,r.jsxs)(r.Fragment,{children:[b&&(0,r.jsx)(x.U,{projectUuid:t,location:i,isOpen:c,onClose:()=>u(!1),syncSource:n}),(0,r.jsx)(g,{...o,syncSourceType:n.type,syncStatus:n.status.state,title:m,subtitle:p,handleClick:j?()=>{if(o.isInSelectionMode){var e;null===(e=o.handleSelect)||void 0===e||e.call(o,!0,!1)}u(!0)}:void 0,actions:s,isSyncing:a})]})},w=e=>{let{syncSource:t,actions:n,isSyncing:i,...s}=e,a=(0,m.m)(t.config.uri),{title:l,isLoading:o}=(0,u.Xv)({uri:t.config.uri}),d=s.isInSelectionMode?()=>{var e;null===(e=s.handleSelect)||void 0===e||e.call(s,!0,!1)}:void 0;return(0,r.jsx)(g,{handleClick:d,...s,syncSourceType:t.type,syncStatus:t.status.state,title:l,url:a,isLoading:s.isLoading||o,actions:n,isSyncing:i})},N=e=>{let{syncSource:t,actions:n,isSyncing:i,...s}=e,a=(0,m.v)(t.config.outline_uri),{title:l,isLoading:o}=(0,f.Zf)({uri:t.config.outline_uri}),d=s.isInSelectionMode?()=>{var e;null===(e=s.handleSelect)||void 0===e||e.call(s,!0,!1)}:void 0;return(0,r.jsx)(g,{handleClick:d,...s,syncSourceType:t.type,syncStatus:t.status.state,title:l,url:a,isLoading:s.isLoading||o,actions:n,isSyncing:i})},_=e=>{let{projectUuid:t,syncSource:n,isEditable:s=!1,location:a,actions:l,isSyncing:d,...c}=e;return(null==n?void 0:n.type)?n.type===o.Fg.GITHUB?(0,r.jsx)(y,{...c,projectUuid:t,syncSource:n,isEditable:s,location:a,actions:l,isSyncing:d}):n.type===o.Fg.GDRIVE?(0,r.jsx)(w,{...c,syncSource:n,isEditable:s,actions:l,isSyncing:d}):n.type===o.Fg.OUTLINE?(0,r.jsx)(N,{...c,syncSource:n,isEditable:s,actions:l,isSyncing:d}):void 0:(0,r.jsx)(i.fz,{})}},34326:function(e,t,n){function r(e,t){if(!t.startsWith("/"))throw Error("absolute path required");let n=t;for(;null!==n;){let t=e[n];if("include"===t)return!0;if("exclude"===t)break;n=l(n)}return!1}function i(e,t){if(!t.startsWith("/"))throw Error("absolute path required");return r(e=a(e,t),t)&&(e={...e,[t]:"exclude"}),e}function s(e,t){if(!t.startsWith("/"))throw Error("absolute path required");return r(e=a(e,t),t)||(e={...e,[t]:"include"}),e}function a(e,t){let n={...e};for(let r of Object.keys(e))(t.endsWith("/")&&t===r||r.startsWith(t))&&delete n[r];return n}function l(e){if(!e.startsWith("/"))throw Error("absolute path required");if("/"===e)return null;let t=e.endsWith("/")?e.lastIndexOf("/",e.length-2):e.lastIndexOf("/");return t<=0?"/":e.slice(0,t+1)}function o(e){return 0===Object.keys(e).length}n.d(t,{F8:function(){return i},Il:function(){return l},VG:function(){return r},Yw:function(){return s},xb:function(){return o}})},70712:function(e,t,n){n.d(t,{g:function(){return a},k:function(){return l}});let r=/docs\.google\.com\/document\/d\/([a-zA-Z0-9-_]+)/i,i=/document\/d\/([a-zA-Z0-9-_]+)/i,s=/(docs\.google\.com)|(drive\.google\.com)/i;function a(e){if(!e)return null;try{let t=new URL(e),n=!!t.toString().match(r),s=t.pathname.match(i);if(n&&s&&s[1])return s[1]}catch(e){}return null}function l(e){if(!e)return!1;try{return!!new URL(e).toString().match(s)}catch(e){}return!1}},56767:function(e,t,n){n.d(t,{A:function(){return i}});var r=n(30947);function i(e){let t="Unable to add Google Doc.";return e instanceof r.Hx&&"access_denied"===e.errorCode?t+=" Please check that link is a valid Google Doc that you have access to.":t+=" "+e.message,t}},84344:function(e,t,n){n.d(t,{m:function(){return r},v:function(){return i}});let r=e=>"https://docs.google.com/document/d/".concat(e),i=e=>"https://outline.ant.dev/doc/".concat(e)},16282:function(e,t,n){n.d(t,{K3:function(){return E},PJ:function(){return Z},TF:function(){return A},Xz:function(){return P},a9:function(){return R},ek:function(){return G},kD:function(){return O},mB:function(){return C},tK:function(){return k}});var r=n(27573),i=n(5161),s=n(96070),a=n(32737),l=n(84464),o=n(53949),d=n(30070),c=n(16963),u=n(11510),f=n(80151),h=n(48326),x=n(84773),m=n(10607),p=n(68425),g=n(7653),v=n(40950),b=n(45790),j=n(23529),y=n(26047),w=n(53186),N=n(32846),_=n(91887);let k=(0,g.forwardRef)((e,t)=>{let{size:n,onRemoveFile:i,isInteractive:s=!0,children:a,testId:l,className:o}=e;return(0,r.jsx)(p.E.div,{ref:t,"data-testid":l,className:(0,m.Z)("group/thumbnail relative inline-block p-0.5",s&&"cursor-pointer","auto"===n&&"h-full w-full",o),layout:"xxs"!==n&&"xs"!==n&&"lg"!==n&&"mdlg"!==n,...!!i&&M,children:a})});k.displayName="BaseThumbnail";let C=e=>{let{file:t,size:n,showWarnings:i,onRemoveFile:a,onClick:l,isInteractive:d=!0,isEditable:c}=e,[u,f]=(0,g.useState)(!1);if((0,s.b)())return"xxs"===n?(0,r.jsx)(_.yL,{file:t}):(0,r.jsx)(_.mB,{file:t,showWarnings:i,handleRemove:a,handleClick:l,isEditable:c});if("file_kind"in t)switch(t.file_kind){case o.Y.Image:return(0,r.jsx)(z,{isPreviewOpen:u,setIsPreviewOpen:f,file:t,size:n,showWarnings:i,onRemoveFile:a,onClick:l,isInteractive:d});case o.Y.Blob:return(0,r.jsx)(I,{file:t,size:n,onRemoveFile:a,onClick:l,isInteractive:d});case o.Y.SanitizedDocument:return(0,r.jsx)(F,{file:t,size:n,onRemoveFile:a,onClick:l,isInteractive:d})}return(0,r.jsx)(D,{isPreviewOpen:u,setIsPreviewOpen:f,file:t,size:n,onRemoveFile:a,onClick:l,isInteractive:d})},M={initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1,transition:{type:"spring",stiffness:650,damping:25,mass:1,opacity:{ease:"linear",duration:.25}}},exit:{opacity:0,scale:.9,duration:.05,ease:"easeOut"}},z=e=>{let{file:t,size:n,showWarnings:i,onRemoveFile:s,onClick:d,isInteractive:c,isPreviewOpen:u,setIsPreviewOpen:f}=e,h=i&&(0,l.e)(t),x="lg"===n?t.preview_asset:t.thumbnail_asset,[v,b]=(0,g.useState)(!1),j="lg"===n?400:100,y="lg"===n?200:80,N=window.devicePixelRatio||1,_=x.image_width/N,k=x.image_height/N,C=1;return _>j&&(C=j/_),k*C>y&&(C=y/k),_*=C,k*=C,(0,r.jsxs)(p.E.div,{"data-testid":t.file_name,className:(0,m.Z)("group inline-block self-end flex-shrink-0",c&&"cursor-pointer","md"===n&&"h-20 w-28 border-border-300/20 hover:border-border-300/30 transition relative -mb-1 rounded-[0.625rem] border-2",h&&"border-warning-orange/95","lg"===n&&"rounded-lg shadow"),layout:"lg"!==n,...!!s&&M,children:[s&&(0,r.jsx)("div",{className:"absolute -top-0.5 left-0.5 z-10",children:(0,r.jsx)(A,{onRemoveFile:s})}),h&&(0,r.jsx)(S,{}),(0,r.jsx)(a.u,{tooltipContent:t.file_name,side:"bottom",children:(0,r.jsxs)("div",{className:(0,m.Z)("border-0.5 border-border-200 group-hover/thumbnail:border-border-100 relative overflow-hidden rounded-lg transition group-active/thumbnail:scale-[0.99]","md"===n&&"h-full w-full"),style:{backgroundColor:"#".concat(t.thumbnail_asset.primary_color)},children:[(0,r.jsx)(p.E.img,{initial:{opacity:0,scale:.985},animate:{opacity:v?1:0,scale:v?1:.985,transition:{ease:"easeOut",duration:.125,opacity:{duration:.25}}},className:(0,m.Z)("md"===n&&"h-full w-full object-cover"),alt:t.file_name,onDragStart:e=>e.preventDefault(),loading:"eager",onLoad:()=>b(!0),src:x.url,width:_,height:k}),(0,r.jsx)("link",{rel:"preload",as:"image",href:t.preview_asset.url}),c&&(0,r.jsx)("button",{className:"absolute inset-0 z-[1]",onClick:d||(()=>f(!0)),"data-testid":"file-thumbnail"}),(0,r.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-2/3 bg-gradient-to-b from-always-black/0 to-always-black/10"})]})}),t.file_kind===o.Y.Image&&(0,r.jsx)(w.e,{file:t,isOpen:u,onClose:()=>f(!1)})]})},S=()=>{let e=(0,v.Z)();return(0,r.jsx)(a.u,{tooltipContent:e.formatMessage({defaultMessage:"Attach a higher resolution image for better results",id:"VLPlC033NT"}),side:"bottom",children:(0,r.jsx)("div",{className:"bg-warning-orange/95 text-text-100 hover:text-text-000 absolute bottom-0 right-0 z-10 rounded-ee-md rounded-ss-md p-0.5 transition",children:(0,r.jsx)(d.v,{size:16})})})},E=e=>{let{size:t,isInteractive:n=!0,isError:i=!1}=e;return(0,r.jsxs)("div",{className:(0,m.Z)("group-hover/thumbnail:drop-shadow-sm pointer-events-none absolute inset-0 z-0 grid grid-rows-[auto_1fr] overflow-hidden transition transition-transform duration-100",n&&"group-active/thumbnail:scale-[0.99]"),children:[(0,r.jsxs)("div",{className:"relative z-[1] -mb-[0.5px] flex ",children:[(0,r.jsx)("div",{className:(0,m.Z)("border-border-200/30 border-l-0.5 border-t-0.5 group-hover/thumbnail:border-border-200 h-full w-full bg-always-white transition-colors duration-100","xxs"===t&&"rounded-tl","xs"===t&&"rounded-tl-md","xxs"!==t&&"xs"!==t&&"rounded-tl-lg")}),(0,r.jsxs)("svg",{viewBox:"0 0 16 16",fill:"#000000",xmlns:"http://www.w3.org/2000/svg",className:(0,m.Z)("block flex-shrink-0 drop-shadow","xxs"===t?"h-2 w-2":"h-4 w-4"),children:[(0,r.jsx)("path",{d:"M0 0L16 16H0V0Z",className:"stroke-border-300/10 fill-always-white",strokeWidth:"0.5"}),(0,r.jsx)("path",{d:"M-1 -1L17 17",className:"group-hover/thumbnail:stroke-border-300 transition-colors duration-100",strokeWidth:"0.5"})]})]}),(0,r.jsx)("div",{className:"relative",children:(0,r.jsx)("div",{className:(0,m.Z)("border-l-0.5 border-b-0.5 border-r-0.5 border-border-200/30 group-hover/thumbnail:border-border-200 absolute inset-0 bg-always-white bg-gradient-to-b from-always-white from-20% transition-colors duration-100",i?"to-danger-000/20":"to-accent-secondary-200/10","xxs"===t&&"rounded-b","xs"===t&&"rounded-b-md","xxs"!==t&&"xs"!==t&&"rounded-b-lg")})})]})},L=e=>{let{file_name:t,size:n}=e;return(0,r.jsx)(r.Fragment,{children:"xxs"!==n&&"xs"!==n&&(0,r.jsx)("div",{style:{transform:"translate3d(0,0,0)"},className:(0,m.Z)("text-accent-secondary-200 pointer-events-none relative z-[1] flex-1 break-words px-2.5 text-center leading-tight tracking-tight",("md"===n||"auto"===n)&&"mb-1 line-clamp-3 px-2.5 text-[0.85rem] font-semibold leading-[0.825rem] tracking-tighter","lg"===n&&"line-clamp-4 px-3 pt-6 text-sm font-semibold"),children:R(t)})})},Z=e=>{let{fileExtension:t,size:n,extensionAccessory:i,className:s,externalDocument:a=!1}=e;return(0,r.jsx)("div",{className:"text-center",children:(0,r.jsxs)("div",{className:(0,m.Z)("inline-flex max-w-full items-center transition-all",("xxs"===n||"xs"===n)&&"relative z-[1] pt-0.5 text-accent-secondary-100","xxs"===n&&"text-[0.4rem] tracking-tighter","xs"===n&&"text-[0.5rem] tracking-normal",("md"===n||"mdlg"===n||"lg"===n)&&"group-hover/thumbnail:bg-always-white/80 transition bg-always-white/90 backdrop-blur border-border-200/30 border-0.5 shadow-sm text-always-black/70 inline-block rounded-full px-1.5 py-[0.125rem] text-[0.625rem] tracking-normal","md"===n&&"absolute left-1/2 top-full z-10 -mt-1 -translate-x-1/2 -translate-y-1/2","mdlg"===n&&"relative z-[1] mb-3","lg"===n&&"relative z-[1] mb-4",s),children:[(0,r.jsx)("div",{className:"uppercase font-bold line-clamp-1 truncate",children:t}),i,a&&(0,r.jsx)(c.G,{size:12,className:"ml-1 group-hover/thumbnail:opacity-70 opacity-0 w-0 group-hover/thumbnail:w-3 scale-50 group-hover/thumbnail:scale-100 transition-all"})]})})},I=e=>{let{file:t,size:n,onClick:i,isInteractive:s,onRemoveFile:l}=e,[o,d]=(0,g.useState)(!1),c=t.file_name.split("."),f=c.length>1?c[c.length-1]:null,h=s?t.file_name:null,x=f?(0,r.jsx)(b.Z,{defaultMessage:"Claude can analyze {fileExtension} files with the analysis tool.",id:"zk0dac6GGP",values:{fileExtension:f.toUpperCase()}}):(0,r.jsx)(b.Z,{defaultMessage:"Claude can analyze this file with the analysis tool.",id:"gbe6qXNZjr"});return(0,r.jsxs)(k,{size:n,onRemoveFile:l,isInteractive:s,testId:t.file_name,children:[l&&(0,r.jsx)("div",{className:"absolute left-1 top-1 z-10",children:(0,r.jsx)(A,{onRemoveFile:l})}),(0,r.jsx)(j.y,{isOpen:o,setIsOpen:d,fileName:t.file_name,fileUuid:t.file_uuid}),(0,r.jsxs)(G,{size:n,onClick:i||(s?()=>d(!0):void 0),children:[(0,r.jsx)(E,{size:n}),(0,r.jsx)(L,{file_name:t.file_name,size:n}),(0,r.jsx)(a.u,{tooltipContent:h,side:"bottom",children:(0,r.jsx)("div",{className:"absolute top-0 left-0 right-0 bottom-5"})}),f&&(0,r.jsx)(Z,{fileExtension:f,size:n,extensionAccessory:"lg"===n||"md"===n?(0,r.jsxs)("div",{className:"inline-flex ml-1 -my-0.5 -mr-1.5 rounded-r-full",children:[(0,r.jsx)("div",{className:"inline-block w-[0.5px] bg-always-black/20 rounded-b"}),(0,r.jsx)(a.u,{tooltipContent:x,side:"bottom",children:(0,r.jsx)("span",{className:"inline-flex items-center gap-1  pl-1.5 pr-2 rounded-r-full group/large transition",children:(0,r.jsx)(u.k,{weight:"bold",className:"opacity-80",size:12})})})]}):null})]})]})},F=e=>{let{file:t,size:n,onClick:i,isInteractive:s,onRemoveFile:l}=e,[o,d]=(0,g.useState)(!1),c=t.file_name.split("."),u=c.length>1?c[c.length-1]:null,f=s?t.file_name:null;return(0,r.jsxs)(k,{size:n,onRemoveFile:l,isInteractive:s,testId:t.file_name,children:[l&&(0,r.jsx)("div",{className:"absolute left-1 top-1 z-10 group",children:(0,r.jsx)(A,{onRemoveFile:l})}),(0,r.jsx)(N.i,{isOpen:o,setIsOpen:d,documentFile:t}),(0,r.jsxs)(G,{size:n,onClick:i||(s?()=>d(!0):void 0),children:[(0,r.jsxs)("div",{className:"absolute h-full w-full rounded-[0.625rem] mt-0.5 border-2 border-border-300/20 group-hover/thumbnail:border-border-300/30 transition overflow-hidden",children:[(0,r.jsx)(p.E.img,{initial:{opacity:0,scale:.985},animate:{opacity:1,scale:1,transition:{ease:"easeOut",duration:.125,opacity:{duration:.25}}},className:(0,m.Z)("md"===n&&"h-full w-full object-cover object-top top-0 border-0.5 border-border-200 group-hover/thumbnail:border-border-100 transition rounded-lg"),alt:t.file_name,onDragStart:e=>e.preventDefault(),loading:"eager",src:t.thumbnail_asset.url,width:t.thumbnail_asset.image_width,height:t.thumbnail_asset.image_height}),(0,r.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-2/3 bg-gradient-to-b from-always-black/0 to-always-black/10"})]}),(0,r.jsx)("div",{className:"h-full w-full",children:" "}),(0,r.jsx)(a.u,{tooltipContent:f,side:"bottom",children:(0,r.jsx)("div",{className:"absolute top-0 left-0 right-0 -bottom-0"})}),u&&(0,r.jsx)(Z,{fileExtension:u,size:n})]})]})},D=e=>{let{file:t,size:n,onClick:s,isInteractive:l,onRemoveFile:o,isPreviewOpen:d,setIsPreviewOpen:c}=e,f=T(t)?(0,r.jsx)(b.Z,{defaultMessage:"Pasted Text",id:"scniiadfth"}):t.file_name,h=t.extracted_content.split("\n").length,x=l?(0,r.jsx)(b.Z,{id:"L7ArvWNpMR",defaultMessage:"{filename} \xb7 {lineCount, plural, one {# line} other {# lines}}",values:{filename:f,lineCount:h}}):null;return(0,r.jsxs)(k,{size:n,onRemoveFile:o,isInteractive:l,testId:t.file_name,children:[o&&(0,r.jsx)("div",{className:"absolute left-1 top-1 z-10",children:(0,r.jsx)(A,{onRemoveFile:o})}),(0,r.jsx)(y.J,{file:t,isOpen:d,onClose:()=>c(!1)}),(0,r.jsx)(a.u,{className:"text-center",tooltipContent:x,side:"bottom",children:(0,r.jsx)("div",{children:(0,r.jsxs)(G,{size:n,onClick:s||(l?()=>c(!0):void 0),testId:"file-thumbnail",children:[(0,r.jsx)(E,{size:n}),T(t)?(0,r.jsx)("div",{className:(0,m.Z)("fade-out-bottom text-accent-secondary-100 pointer-events-none visible relative z-[1] h-full overflow-hidden break-words text-left leading-tight tracking-tighter opacity-70",("md"===n||"auto"===n)&&"px-3.5 pt-3.5 text-[0.5rem] font-semibold","lg"===n&&"px-3 pt-5 text-[0.5rem] font-semibold"),children:t.extracted_content.substring(0,200)}):(0,r.jsx)(L,{file_name:t.file_name,size:n}),(0,r.jsx)(Z,{fileExtension:function(e){if(T(e))return"pasted";if("text/plain"===e.file_type)return"txt";if("text/html"===e.file_type)return"html";{if(""===e.file_name)return"";let t=e.file_name.match(/\.[^.]+$/);return t&&(0,i.tB)({imagesEnabled:!0}).includes(t[0].toLowerCase())?t[0].slice(1):"text"}}(t),size:n,extensionAccessory:"pdf"===t.file_type&&(0,r.jsx)(a.u,{tooltipContent:"PDF converted to text",side:"bottom",children:(0,r.jsxs)("div",{className:"inline-flex ml-1",children:[(0,r.jsx)("div",{className:"inline-block w-[0.5px] bg-border-300"}),(0,r.jsx)(u.k,{className:"ml-1.5 mr-0.5",weight:"bold",size:12})]})})})]})})})]})};function A(e){let{onRemoveFile:t}=e,n=(0,v.Z)();return(0,r.jsx)("button",{className:"border-0.5 border-border-200 text-text-500 bg-bg-000 hover:bg-danger-100 hover:text-oncolor-100 -translate-x-1/2 -translate-y-1/2 rounded-full p-1 transition hover:scale-105",onClick:t,"aria-label":n.formatMessage({defaultMessage:"Remove file",id:"hgAzMVK+jq"}),children:(0,r.jsx)(f.X,{size:12,weight:"bold"})})}function T(e){return e.file_name.match(/paste(-\d+)?\.txt/)}function R(e){let t=e.match(/\.[^/.]+$/);return t&&(0,i.tB)({imagesEnabled:!0}).includes(t[0].toLowerCase())?e.replace(/\.[^/.]+$/,""):e}function G(e){let{size:t,children:n,isInteractive:i=!0,testId:s,classname:a,...l}=e,o=(0,m.Z)("relative grid grid-rows-[1fr_auto] items-center","xxs"===t&&"h-7 w-[1.625rem]","xs"===t&&"h-10 w-10","md"===t&&"h-20 w-28","mdlg"===t&&"h-[120px] w-[120px]","lg"===t&&"h-36 w-32 drop-shadow-sm","auto"===t&&"h-full w-full",a);return l.href?(0,r.jsx)("a",{"data-testid":s,target:"_blank",className:o,href:l.href,children:n}):(0,r.jsx)("button",{"data-testid":s,disabled:!i,className:o,onClick:l.onClick,children:n})}let P=()=>(0,s.b)()?(0,r.jsx)(_.vQ,{title:"Images hidden in shared chats",isError:!0}):(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center rounded-lg bg-bg-300/80 h-36 w-56 px-6 py-3",children:[(0,r.jsx)(h.f,{size:24,className:"text-text-500"}),(0,r.jsx)("div",{className:"text-text-500 text-sm text-center mt-2",children:(0,r.jsx)(b.Z,{defaultMessage:"Images are not supported in shared chats",id:"vmTlLHPu8j"})})]}),O=()=>(0,s.b)()?(0,r.jsx)(_.vQ,{title:"Files hidden in shared chats",isError:!0}):(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center rounded-lg bg-bg-300/80 h-36 w-56 px-6 py-3",children:[(0,r.jsx)(x.h,{size:24,className:"text-text-500"}),(0,r.jsx)("div",{className:"text-text-500 text-sm text-center mt-2",children:(0,r.jsx)(b.Z,{defaultMessage:"Files are not supported in shared chats",id:"8u6r5ZY4A7"})})]})},91887:function(e,t,n){n.d(t,{fz:function(){return R},l1:function(){return O},mB:function(){return E},vQ:function(){return A},yL:function(){return T}});var r=n(41596),i=n(27573),s=n(5161),a=n(5984),l=n(9788),o=n(10571),d=n(32737),c=n(84464),u=n(1133),f=n(53949),h=n(30070),x=n(80151),m=n(10607),p=n(68425),g=n(8927),v=n(7653),b=n(45790),j=n(23529),y=n(26047),w=n(53186),N=n(32846);function _(){let e=(0,r._)(["\n  min-w-0\n  h-[18px] \n  flex \n  flex-row \n  items-center \n  justify-center\n  gap-0.5\n  px-1 \n  border-0.5\n  border-border-300/25\n  shadow-sm\n  rounded\n  bg-bg-000/70\n  backdrop-blur-sm\n  font-medium\n"]);return _=function(){return e},e}function k(e){return e.file_name.match(/paste(-\d+)?\.txt/)}function C(e){if("file_kind"in e){let t=e.file_name.split(".");return t.length>1?t[t.length-1]:void 0}if(k(e))return"pasted";if("text/plain"===e.file_type)return"txt";if("text/html"===e.file_type)return"html";{if(""===e.file_name)return"";let t=e.file_name.match(/\.[^.]+$/);return t&&(0,s.tB)({imagesEnabled:!0}).includes(t[0].toLowerCase())?t[0].slice(1):"text"}}n(85306);let M=e=>{let{handleClick:t,isInSelectionMode:n,handleSelect:r}=e,[i,s]=(0,v.useState)(!1);return{onClick:()=>{n&&r?r(!0,!1):t?t():s(!0)},isPreviewOpen:i,setIsPreviewOpen:s}},z={icon:{height:28,width:28},normal:{height:120,width:120},stretch:{height:120,width:"100%"}},S=e=>e&&z[e]?z[e]:z.normal,E=e=>{let{file:t,isEditable:n,showWarnings:r,...s}=e;if("file_kind"in t)switch(t.file_kind){case f.Y.Image:return(0,i.jsx)(L,{...s,file:t,showWarnings:r,isEditable:n});case f.Y.Blob:return(0,i.jsx)(Z,{...s,file:t,isEditable:n});case f.Y.SanitizedDocument:return(0,i.jsx)(F,{...s,file:t,isEditable:n})}return(0,i.jsx)(I,{...s,file:t,isEditable:n})},L=e=>{let{disabled:t,size:n,file:r,showWarnings:s,handleRemove:a,handleClick:l,isSelected:o,handleSelect:d,isInSelectionMode:u,isEditable:f}=e,{height:h,width:x}=S(n),{onClick:p,isPreviewOpen:g,setIsPreviewOpen:v}=M({handleClick:l,isInSelectionMode:u,handleSelect:d}),b=s&&(0,c.e)(r);return(0,i.jsxs)("div",{className:"relative group/thumbnail",children:[(0,i.jsxs)("div",{"data-testid":r.file_name,style:{width:x,height:h,minWidth:x,minHeight:h},className:(0,m.Z)("rounded-lg overflow-hidden can-focus-within rounded-lg",!t&&"cursor-pointer"),children:[(0,i.jsx)(D,{"data-testid":"file-thumbnail",disabled:t,width:x,height:h,fileName:r.file_name,src:r.preview_asset.url,onClick:p}),(0,i.jsx)(U,{isAbsolute:!0,right:b?(0,i.jsx)(q,{type:"warning",tooltipText:"Attach a higher resolution image for better results"}):void 0,isSelected:o,handleSelect:d,isEditable:f}),(0,i.jsx)(w.e,{file:r,isOpen:g,onClose:()=>v(!1)}),(0,i.jsx)("div",{className:(0,m.Z)("transition-colors absolute pointer-events-none top-0 left-0 right-0 bottom-0 rounded-lg shadow-always-white/40 shadow-[inset_0_0_0_2px_var(--tw-shadow-color)]",!t&&"group-hover/thumbnail:shadow-always-white/60")})]}),(0,i.jsx)(H,{disabled:t,handleRemove:a,isEditable:f,isInSelectionMode:u})]})},Z=e=>{let{file:t,handleClick:n,...r}=e,{onClick:s,isPreviewOpen:a,setIsPreviewOpen:l}=M({handleClick:n,isInSelectionMode:r.isInSelectionMode,handleSelect:r.handleSelect}),o=C(t);return(0,i.jsxs)("div",{children:[(0,i.jsx)(A,{...r,"data-testid":t.file_name,title:t.file_name,handleClick:s,tag:!!o&&(0,i.jsx)(B,{tagName:o,tooltipText:o?"Claude can analyze ".concat(o.toUpperCase()," files with the analysis tool."):"Claude can analyze this file with the Analysis tool."})}),(0,i.jsx)(j.y,{isOpen:a,setIsOpen:l,fileName:t.file_name,fileUuid:t.file_uuid})]})},I=e=>{let{file:t,handleClick:n,...r}=e,{onClick:s,isPreviewOpen:a,setIsPreviewOpen:l}=M({handleClick:n,isInSelectionMode:r.isInSelectionMode,handleSelect:r.handleSelect}),o=k(t),d=o?"Pasted Text":t.file_name,c=t.extracted_content.split("\n").length,u=(0,i.jsx)(b.Z,{defaultMessage:"{count, plural, one {# line} other {# lines}}",id:"AFTxeGB4qO",values:{count:c}}),f=t.extracted_content.substring(0,300),h=C(t);return(0,i.jsxs)("div",{children:[(0,i.jsx)(A,{...r,"data-testid":t.file_name,...o?{text:f}:{title:d,subtitle:u},handleClick:s,tag:!!h&&(0,i.jsx)(B,{tagName:h,tooltipText:"pdf"===t.file_type?"PDF converted to text":void 0})}),(0,i.jsx)(y.J,{file:t,isOpen:a,onClose:()=>l(!1)})]})},F=e=>{let{disabled:t,size:n,file:r,handleRemove:s,handleClick:a,isSelected:l,handleSelect:o,isInSelectionMode:d,isEditable:c}=e,{height:u,width:f}=S(n),{onClick:h,isPreviewOpen:x,setIsPreviewOpen:p}=M({handleClick:a,isInSelectionMode:d,handleSelect:o}),g=C(r);return(0,i.jsxs)("div",{className:"group/thumbnail relative",children:[(0,i.jsxs)("div",{"data-testid":r.file_name,style:{width:f,height:u,minWidth:f,minHeight:u},className:(0,m.Z)("rounded-lg overflow-hidden border-0.5 border-border-300/25 shadow-sm shadow-always-black/5 can-focus-within rounded-lg",!t&&"cursor-pointer hover:border-border-200/50 hover:shadow-always-black/10"),children:[(0,i.jsx)(D,{disabled:t,width:"100%",height:"100%",fileName:r.file_name,src:r.thumbnail_asset.url,onClick:h}),(0,i.jsx)(U,{isSelected:l,handleSelect:o,isAbsolute:!0,left:g?(0,i.jsx)(B,{tagName:g}):void 0,isEditable:c}),(0,i.jsx)(N.i,{isOpen:x,setIsOpen:p,documentFile:r})]}),(0,i.jsx)(H,{disabled:t,handleRemove:s,isEditable:c,isInSelectionMode:d})]})},D=e=>{let{disabled:t,width:n,height:r,fileName:s,src:a,onClick:l}=e,[o,d]=(0,v.useState)(!1);return(0,i.jsx)("button",{className:"relative bg-bg-000",style:{width:n,height:r},disabled:t,onClick:l,children:(0,i.jsx)("img",{className:(0,m.Z)("w-full h-full object-cover transition duration-400",o?"opacity-1":"opacity-0 blur-sm"),onLoad:()=>d(!0),alt:s,src:a,onDragStart:e=>e.preventDefault()})})},A=e=>{let{disabled:t,size:n,url:r,handleClick:s,title:a,subtitle:l,text:o,isLoading:d=!1,tag:c,actions:u,isError:f,handleRemove:h,isEditable:x,isSyncing:g,handleSelect:v,isSelected:b,isInSelectionMode:j}=e,{height:y,width:w}=S(n),N=(0,i.jsxs)(p.E.div,{className:"group/thumbnail relative",whileHover:x?"actionsVisible":g||j?"actionsVisible":void 0,animate:j||g?"actionsVisible":"initial","data-testid":"file-thumbnail",children:[(0,i.jsxs)("div",{style:{width:w,height:y,minWidth:w},className:(0,m.Z)("font-styrene transition-all rounded-lg border-0.5 border-border-300/25 flex flex-col justify-between gap-2.5 overflow-hidden px-2.5 py-2",f?"bg-danger-200/5":d?"bg-bg-100":"bg-bg-000",!!(r||s)&&!d&&!t&&"hover:border-border-200/50 hover:shadow-always-black/10",!d&&"shadow-sm shadow-always-black/5"),children:[(0,i.jsxs)("div",{className:"relative flex flex-col gap-1 min-h-0",children:[o?(0,i.jsx)("div",{className:"max-w-full overflow-hidden absolute h-[112px] [mask-image:linear-gradient(to_bottom,hsl(var(--always-black)/80%)_0%,_hsl(var(--always-black)/10%)_100%)]",children:(0,i.jsx)(p.E.p,{initial:{opacity:0},animate:{opacity:1},className:"text-[8px] text-text-100 break-words",children:o})}):f||a&&!d?(0,i.jsx)(p.E.h3,{initial:{opacity:0},animate:{opacity:1},inherit:!1,className:(0,m.Z)("text-[12px] tracking-tighter break-words",f?"text-text-500":"text-text-100",l?"line-clamp-3":"line-clamp-4"),children:a}):(0,i.jsx)(G,{}),!!l&&!d&&!f&&(0,i.jsx)(p.E.p,{initial:{opacity:0},animate:{opacity:1},inherit:!1,className:"text-[10px] line-clamp-1 tracking-tighter break-words text-text-500",children:l})]}),d?(0,i.jsx)(P,{}):(0,i.jsx)(U,{isSelected:b,handleSelect:v,left:c,right:f&&(0,i.jsx)(q,{type:"error"}),actions:u,isEditable:x})]}),(0,i.jsx)(H,{disabled:t,handleRemove:h,isEditable:x,isInSelectionMode:j})]});return s?(0,i.jsx)("button",{disabled:t,className:(0,m.Z)("rounded-lg text-left block",!t&&"cursor-pointer"),onClick:s,children:N}):r?(0,i.jsx)("a",{href:t?void 0:r,target:"_blank",className:"block rounded-lg",children:N}):N},T=e=>{let{file:t}=e,n=C(t);return(0,i.jsx)("div",{className:"w-[38px] h-[38px] min-w-[38px] font-styrene rounded-lg border-0.5 border-border-300/25 shadow-sm shadow-always-black/5 flex items-center justify-center overflow-hidden bg-bg-000",children:!!n&&(0,i.jsx)("p",{className:"font-bold uppercase font-styrene text-text-300 text-[9px] tracking-tighter pt-0.5",children:n})})},R=e=>{let{size:t,tag:n,isShown:r=!0}=e,{width:s}=S(t);return(0,i.jsx)(g.M,{children:!!r&&(0,i.jsx)(p.E.div,{initial:{opacity:0,maxWidth:0},animate:{opacity:1,maxWidth:s},children:(0,i.jsx)(A,{isLoading:!0,tag:n,size:t})})})},G=()=>(0,i.jsxs)(p.E.div,{initial:{opacity:0},animate:{opacity:1},className:"w-full flex flex-col",children:[(0,i.jsx)(o.g,{width:"100%",height:"12px",className:"mt-1 !bg-border-400 !rounded after:!via-always-white/50"}),(0,i.jsx)(o.g,{width:"66%",height:"12px",className:"mt-1 !bg-border-400 !rounded after:!via-always-white/50"})]}),P=()=>(0,i.jsx)(p.E.div,{initial:{opacity:0},animate:{opacity:1},children:(0,i.jsx)(o.g,{width:"48px",height:"18px",className:"mt-1 !bg-border-400 !rounded after:!via-always-white/50"})}),O=l.q.div(_()),U=e=>{let{isAbsolute:t=!1,left:n,right:r,actions:s,handleSelect:l,isSelected:o,isEditable:d}=e,c=!!n,u=!!r||!!l;return c||u?(0,i.jsx)("div",{className:(0,m.Z)(t&&"absolute bottom-2 left-0 right-0 px-2.5 overflow-x-hidden overflow-y-visible"),children:(0,i.jsxs)("div",{className:(0,m.Z)("relative flex flex-row items-center gap-1",u&&!c?"justify-end":"justify-between"),children:[c&&(0,i.jsx)(p.E.div,{initial:{opacity:0},animate:{opacity:1},className:"flex flex-row gap-1 shrink min-w-0",children:n}),u&&(0,i.jsxs)("div",{className:"flex flex-row gap-1 shrink-0",children:[r,!!l&&!!d&&(0,i.jsxs)(p.E.div,{variants:{actionsVisible:{opacity:1,position:"relative"},initial:{opacity:0,position:"absolute"}},className:"flex flex-row gap-1 h-[18px] right-0 top-0",onClick:e=>e.stopPropagation(),transition:{ease:"easeOut",duration:.2},children:[s,(0,i.jsx)(a.XZ,{checked:o,onChange:l,label:"Select file",hideLabel:!0,className:(0,m.Z)("!w-[18px] !h-[18px] -mt-1 !border-0.5 !border-border-300/25 !shadow-sm !rounded"),checkmarkClassName:"!w-3 !h-3"})]})]})]})}):null},B=e=>{let{tagName:t,tooltipText:n,className:r}=e,s=(0,i.jsx)(O,{className:r,children:(0,i.jsx)("p",{className:"uppercase truncate font-styrene text-text-300 text-[11px] leading-[13px]",children:t})});return n?(0,i.jsx)(d.u,{tooltipContent:n,children:s}):s},q=e=>{let{type:t,tooltipText:n,className:r}=e,s=(0,i.jsx)(O,{className:(0,m.Z)("shrink-0","error"===t?"text-danger-000 border-danger-200/50 bg-danger-900":"text-warning-orange border-warning-orange/50 bg-bg-000/70",r),children:(0,i.jsx)(h.v,{size:12})});return n?(0,i.jsx)(d.u,{tooltipContent:n,children:s}):s},H=e=>{let{disabled:t,handleRemove:n,isEditable:r,isInSelectionMode:s}=e;return!n||!r||s||t?null:(0,i.jsx)(d.u,{tooltipContent:(0,i.jsx)(b.Z,{defaultMessage:"Remove",id:"G/yZLul6P1"}),side:"bottom",children:(0,i.jsx)("button",{className:(0,m.Z)("transition-all hover:bg-bg-000/50 text-text-500 hover:text-text-200 group-focus-within/thumbnail:opacity-100 group-hover/thumbnail:opacity-100 opacity-0 w-5 h-5 absolute -top-2 -left-2 rounded-full border-0.5 border-border-300/25 bg-bg-000/90 backdrop-blur-sm flex items-center justify-center",(0,u.tq)()&&"!opacity-100 !bg-bg-000/50"),onClick:e=>{e.stopPropagation(),e.preventDefault(),n()},children:(0,i.jsx)(x.X,{size:12,weight:"bold"})})})}},67677:function(e,t,n){n.d(t,{s:function(){return s}});var r=n(27573),i=n(10607);let s=e=>{let{icon:t,title:n,subtitles:s,tag:a,disabled:l,url:o,isError:d,handleClick:c}=e;return(0,r.jsx)("a",{target:"_blank",href:l?void 0:o,tabIndex:-1,children:(0,r.jsxs)("button",{disabled:l,className:(0,i.Z)("flex flex-row items-center gap-3 rounded-md tracking-tight min-h-[1.875rem] h-[1.875rem] px-[3px] w-full min-w-0",!l&&"hover:bg-bg-100",!l&&(c||o)?"cursor-pointer":"cursor-default"),onClick:c,children:[(0,r.jsx)("div",{className:"h-4 w-4 flex items-center justify-center",children:t}),(0,r.jsx)("p",{className:(0,i.Z)("text-[12px] whitespace-nowrap overflow-hidden text-ellipsis shrink leading-[16px]",d?"text-danger-000":"text-text-000"),children:n}),!!(null==s?void 0:s.length)&&s.map((e,t)=>(0,r.jsx)("p",{className:"text-[11px] text-text-500 line-clamp-1 shrink-0 leading-[16px]",children:e},t)),!!a&&(0,r.jsx)("div",{className:"text-[9px] text-text-300 border-border-400 border-0.5 rounded px-1 h-4.5 flex items-center justify-center uppercase font-medium",children:a})]})})}},23529:function(e,t,n){n.d(t,{y:function(){return m}});var r,i,s=n(27573),a=n(11607),l=n(52939),o=n(49167),d=n(88738),c=n(11510),u=n(45790),f=n(5362),h=n(27218),x=n(13262);function m(e){let{isOpen:t,setIsOpen:n,fileName:r,fileUuid:m}=e,{data:p,isLoading:g}=function(e){let{fileUuid:t,enabled:n}=e,{activeOrganization:r}=(0,h.t)(),i=null==r?void 0:r.uuid;return(0,f.WE)("/api/organizations/".concat(i,"/files/").concat(t,"/content_preview"),{queryKey:[x.Ej,{orgUuid:i,fileUuid:t}],enabled:!!r&&n})}({fileUuid:m,enabled:t}),v=null;return v=g?(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,s.jsx)(a.Loading,{size:"md"})}):p?p.file_type===i.Csv?(0,s.jsxs)("div",{className:"w-full h-full flex flex-col items-center justify-center",children:[(0,s.jsxs)("div",{className:"bg-bg-100 w-[15rem] h-[12.5rem] rounded-lg border border-border-400 mb-5",children:[(0,s.jsxs)("div",{className:"h-[2.25rem] text-text-100 font-medium border-b border-border-400 px-3 flex items-center",children:[(0,s.jsx)(d.z,{className:"mr-2",size:16}),(0,s.jsx)("div",{children:(0,s.jsx)(u.Z,{defaultMessage:"Columns",id:"SUa8mpheAG"})})]}),(0,s.jsx)(o.$,{className:"h-[10.25rem] w-[15rem] pt-3 px-3 pb-1 text-text-200",children:p.column_names.map((e,t)=>(0,s.jsx)("div",{className:"truncate mb-2",children:e},t))})]}),(0,s.jsx)("div",{className:"text-lg text-text-100 mb-2",children:(0,s.jsx)(u.Z,{defaultMessage:"{columnCount, plural, one {# column} other {# columns}}, {rowCount, plural, one {# row} other {# rows}}",id:"wvGBF/FvBd",values:{columnCount:p.column_count,rowCount:p.row_count}})}),(0,s.jsxs)("div",{className:"flex items-center text-text-300 text-xs",children:[(0,s.jsx)(c.k,{className:"mr-2",size:12}),(0,s.jsx)("div",{children:(0,s.jsx)(u.Z,{defaultMessage:"Claude can analyze CSVs with the Analysis tool.",id:"gtvz8LDd6q"})})]})]}):(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,s.jsx)(u.Z,{defaultMessage:"File previews are not supported for this file type",id:"99ghrgx5j8"})}):(0,s.jsx)("div",{className:"w-full h-full flex items-center justify-center",children:(0,s.jsx)(u.Z,{defaultMessage:"Could not load file preview",id:"ATy/CxAxS4"})}),(0,s.jsx)(l.u_,{isOpen:t,hasCloseButton:!0,title:r,onClose:()=>n(!1),className:"w-[40rem] h-[24rem]",modalSize:"xl",children:v})}(r=i||(i={})).Generic="generic",r.Csv="csv",r.Excel="excel"},82274:function(e,t,n){n.d(t,{R:function(){return s}});var r=n(27573),i=n(45790);function s(e){let{showPDFWarning:t=!1,metaData:n}=e;return(0,r.jsxs)("span",{className:"text-text-500 mb-3 mt-0.5 flex flex-wrap gap-y-2 items-start items-center text-xs",children:[(0,r.jsx)("span",{children:n}),(0,r.jsx)("span",{className:"mx-1.5 opacity-50 hidden lg:inline",children:""}),t?(0,r.jsx)("span",{children:(0,r.jsx)(i.Z,{defaultMessage:"This PDF was converted to text due to its large size",id:"o/G2cAuU9n"})}):(0,r.jsx)("span",{children:(0,r.jsx)(i.Z,{defaultMessage:"Formatting may be inconsistent from source",id:"9NeTb00/cM"})})]})}},26047:function(e,t,n){n.d(t,{J:function(){return o}});var r=n(27573),i=n(2130),s=n(52939),a=n(7653),l=n(82274);let o=e=>{let{file:t,isOpen:n,onClose:o}=e,d=(0,a.useMemo)(()=>(0,i.G)(t),[t]);return(0,r.jsx)("div",{children:(0,r.jsx)(s.u_,{modalSize:"xl",isOpen:!!n,onClose:o,hasCloseButton:!0,title:d.title,subtitle:(0,r.jsx)(l.R,{showPDFWarning:"pdf"===t.file_type,metaData:d.metaData}),autoCloseOnFocusOut:!0,children:(0,r.jsx)("div",{className:"bg-bg-000 rounded-lg border-0.5 border-border-300 shadow-sm whitespace-pre-wrap break-all text-xs p-4 font-mono",children:t.extracted_content})})})}},53186:function(e,t,n){n.d(t,{e:function(){return m}});var r=n(41596),i=n(27573),s=n(9788),a=n(70354),l=n(34422),o=n(8927);let d=e=>{let{isOpen:t,children:n,initialFocus:r,className:s,onClose:a}=e;return(0,i.jsx)(o.M,{children:t&&(0,i.jsx)(l.V,{open:t,onClose:a,initialFocus:r,className:s,static:!0,children:n})})};var c=n(80151),u=n(68425),f=n(7653),h=n(40950);function x(){let e=(0,r._)(["\n  rounded-md\n  overflow-hidden\n  shadow-[0_4px_32px_hsl(var(--always-black)/30%),_0_0_0_0.5px_hsl(var(--always-black)/25%)]\n"]);return x=function(){return e},e}let m=e=>{let{file:t,isOpen:n,onClose:r}=e,s=(0,h.Z)(),l=(0,f.useRef)(null);return(0,i.jsxs)(d,{isOpen:n,initialFocus:l,onClose:r,className:"fixed inset-0 z-modal grid place-items-center px-3 pb-14 pt-3",children:[(0,i.jsx)(u.E.div,{onClick:e=>{e.preventDefault(),e.stopPropagation(),r()},className:"fixed inset-0 bg-always-black/70 backdrop-blur-[0px]",initial:{opacity:0},animate:{opacity:1,transition:{duration:.15,delay:.015}},exit:{opacity:0,transition:{opacity:{duration:.15}}}}),(0,i.jsxs)(u.E.div,{className:"relative max-w-[40rem]",initial:{opacity:0,scaleY:.925,scaleX:.95,translateY:"12px"},animate:{opacity:1,scaleX:1,scaleY:1,translateY:"0px",transition:{type:"spring",stiffness:750,damping:38,opacity:{duration:.15}}},exit:{opacity:0,scale:.95,transition:{duration:.15}},children:[(0,i.jsx)(a.z,{className:"hover:!text-text-100 !ring-border-200 !absolute left-full top-0 ml-1.5 !text-always-white !ring-offset-0",variant:"ghost",size:"icon_sm","aria-label":s.formatMessage({defaultMessage:"Close image preview",id:"gylVBxmE7Z"}),onClick:e=>{e.preventDefault(),e.stopPropagation(),r()},ref:l,option:"rounded","data-testid":"close-file-preview",children:(0,i.jsx)(c.X,{size:"16"})}),(0,i.jsx)(p,{children:(0,i.jsx)("img",{loading:"eager",src:t.preview_asset.url,width:t.preview_asset.image_width,height:t.preview_asset.image_height,onClick:e=>{e.preventDefault(),e.stopPropagation(),r()},alt:s.formatMessage({defaultMessage:"Preview of {fileName}",id:"djtHiJ5aej"},{fileName:t.file_name}),onDragStart:e=>e.preventDefault(),className:"block w-full max-h-[calc(100vh-4rem)]"})}),(0,i.jsx)("div",{style:{textShadow:"0 0 8px hsl(var(--always-black)/25%)"},className:"pt-1.5 text-center text-always-white",children:t.file_name})]})]})},p=s.q.div(x())},32846:function(e,t,n){n.d(t,{i:function(){return o}});var r=n(27573),i=n(52939),s=n(78278),a=n(40950),l=n(45790);function o(e){let{isOpen:t,setIsOpen:n,documentFile:o}=e,d=(0,a.Z)();return(0,r.jsx)(i.u_,{isOpen:t,hasCloseButton:!0,title:o.file_name,onClose:()=>n(!1),children:(0,r.jsxs)("a",{className:"self-center group text-center",href:"".concat(o.document_asset.url,"/").concat(o.file_name),target:"_blank",children:[(0,r.jsxs)("div",{className:"w-fit rounded-lg relative m-2 mt-8",children:[(0,r.jsx)("img",{className:"bg-always-white rounded-lg border border-border-300 group-hover:border-accent-secondary-000/70 shadow-sm group-hover:-rotate-1 transition",alt:d.formatMessage({defaultMessage:"{fileName} thumbnail",id:"1bEhiGnHtL"},{fileName:o.file_name}),src:o.thumbnail_asset.url,style:{width:o.thumbnail_asset.image_width/1.5,height:o.thumbnail_asset.image_height/1.5}}),(0,r.jsx)("div",{className:"absolute w-full h-full inset-0 group-hover:bg-gradient-to-t from-accent-secondary-200/5 to-60% group-hover:-rotate-1 transition rounded-lg"}),(0,r.jsx)(e=>{let{pageCount:t}=e;return t<=1?null:(0,r.jsxs)("div",{className:"*:absolute *:w-full *:bg-always-white *:rounded-lg *:group-hover:border-accent-secondary-100/50 *:transition-all *:border *:border-border-300",children:[(0,r.jsx)("div",{className:"h-[98%] ml-1 group-hover:ml-[5px] group-hover:rotate-2 -z-10 shadow-sm top-[1%] opacity-70"}),(0,r.jsx)("div",{className:"h-[96%] ml-2 group-hover:ml-[10px] group-hover:rotate-3 group-hover:top-[2%]  -z-20 shadow top-[2%] opacity-50"})]})},{pageCount:o.document_asset.page_count})]}),(0,r.jsxs)("div",{className:"relative text-center inline-flex items-center justify-center text-pretty gap-2 p-1 text-sm text-text-300 *:transition",children:[(0,r.jsx)("p",{className:"group-hover:opacity-0 group-hover:scale-75",children:(0,r.jsx)(l.Z,{defaultMessage:"{count, plural, one {# page} other {# pages}}",id:"RyCW0gT/7M",values:{count:o.document_asset.page_count}})}),(0,r.jsxs)("div",{className:"absolute inset-0 opacity-0 group-hover:opacity-100 inline-flex items-center justify-center gap-1 text-accent-secondary-000",children:[(0,r.jsx)(s.b,{size:16,weight:"fill",className:"scale-50 group-hover:scale-100 transition-all "}),(0,r.jsx)("p",{children:(0,r.jsx)(l.Z,{defaultMessage:"Download",id:"5q3qC0sC3r"})})]})]})]})})}},2130:function(e,t,n){n.d(t,{G:function(){return s}});var r=n(27573),i=n(45790);function s(e){return{title:(()=>{if("html"===e.file_type){let t=e.extracted_content.match(/<title>(.*?)<\/title>/);return t?t[1]:e.file_name}return"paste.txt"===e.file_name?(0,r.jsx)(i.Z,{defaultMessage:"Pasted content",id:"okKwHjIO0b"}):e.file_name})(),metaData:(()=>{var t;let n=(0,r.jsx)(i.Z,{defaultMessage:"{count, plural, one {# line} other {# lines}}",id:"AFTxeGB4qO",values:{count:e.extracted_content.split("\n").length}}),s=(t=e.file_size)<1048576?(0,r.jsx)(i.Z,{defaultMessage:"{size} KB",id:"/hgypvsrtJ",description:"File size in kilobytes",values:{size:(t/1024).toFixed(2)}}):(0,r.jsx)(i.Z,{defaultMessage:"{size} MB",id:"8amcCGO7ya",description:"File size in megabytes",values:{size:(t/1048576).toFixed(2)}});if("html"===e.file_type){let t=e.file_name,i=e.file_name.match(/^(?:https?:\/\/)?(?:[^@\n]+@)?(?:www\.)?([^:\\/\n?]+)/gim);return i&&(t=i[0].replace("www.","")),(0,r.jsxs)("span",{children:[n,"\xa0",(0,r.jsx)("span",{className:"opacity-50 mx-1",children:""}),t]})}return(0,r.jsxs)("span",{children:[s,"\xa0",(0,r.jsx)("span",{className:"opacity-50 mx-1",children:""}),n]})})()}}},96070:function(e,t,n){n.d(t,{b:function(){return r}});let r=()=>!0},6766:function(e,t,n){n.d(t,{M:function(){return o}});var r=n(87033),i=n(5068),s=n(7653),a=n(99205),l=n(76220);let o=()=>{let e="sticky-model-selector",{value:t}=(0,r.FL)("sticky_model_selector"),{value:n}=(0,r.FL)("model_selector_enabled"),{activeModelOptions:o}=(0,l.u)(),d=(0,a.wN)(null),c=(0,i.useQuery)({queryKey:[e],queryFn:()=>{if(!t||!n)return null;let r=localStorage.getItem(e);return r===d?null:r&&o.find(e=>e.model===r)?r:null},initialData:null}),u=(0,s.useCallback)(t=>{t&&localStorage.setItem(e,t),c.refetch()},[c]);return{stickyModelPreference:c.data,setStickyModelPreference:u}}},66557:function(e,t,n){n.d(t,{c:function(){return i}});var r=n(7653);function i(e){let{skip:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},[i,s]=(0,r.useState)(0),a=(0,r.useRef)(null);return(0,r.useEffect)(()=>{if(!t){if(!a.current){if("undefined"==typeof Worker)return;try{let e=new Worker(n.tu(new URL(n.p+n.u(6344),n.b)));e.onmessage=e=>s(e.data),a.current=e}catch(t){var e;throw(null==t?void 0:null===(e=t.toString)||void 0===e?void 0:e.call(t).includes("Invalid URL"))&&console.error("useTokenCounter invalid URL error hit; baseUrl = ".concat("file:///app/packages/chat/utils/useTokenCounter.tsx","")),t}}return()=>{var e;null===(e=a.current)||void 0===e||e.terminate(),a.current=null}}},[t]),(0,r.useEffect)(()=>{a.current&&a.current.postMessage(e)},[e]),i}},9677:function(e,t,n){n.d(t,{Z:function(){return s}});var r=n(27573),i=n(10607);function s(e){let{className:t,variant:n,width:s=36,height:l=20,...o}=e,d="number"==typeof l?"".concat(l,"px"):l,c="calc(".concat(d," - 4px)");return(0,r.jsxs)("div",{className:(0,i.Z)("group/switch relative select-none cursor-pointer",t),children:[(0,r.jsx)("input",{type:"checkbox",className:"peer sr-only",...o}),(0,r.jsx)("div",{style:{width:s,height:d},className:(0,i.Z)("border-border-300 rounded-full peer:can-focus peer-disabled:opacity-50",a.pill[n||"default"])}),(0,r.jsx)("div",{style:{height:c,width:c},className:(0,i.Z)("absolute start-[2px] top-[2px] rounded-full transition-all peer-checked:translate-x-full rtl:peer-checked:-translate-x-full",a.circle[n||"default"])})]})}let a={pill:{default:"\n    bg-bg-500\n    transition-colors\n    peer-checked:bg-accent-secondary-100\n    "},circle:{default:"\n    group-hover/switch:opacity-80\n    bg-white\n    transition\n    "}}},35354:function(e,t,n){n.d(t,{EO:function(){return o},h7:function(){return i},rE:function(){return d}});var r,i,s=n(27573),a=n(7653);(r=i||(i={})).IDLE="IDLE",r.DRAGGING_OFF_TARGET="DRAGGING_OFF_TARGET",r.DRAGGING_ON_TARGET="DRAGGING_ON_TARGET",r.DROPPED="DROPPED";let l=(0,a.createContext)(void 0),o=()=>{let e=(0,a.useContext)(l);if(!e)throw Error("useDropZone must be used within a DropZoneProvider");return e},d=e=>{let{onDrop:t,children:n,className:r,disabled:i=!1}=e,[o,d]=(0,a.useState)("IDLE"),c=a.useRef(null),u=(0,a.useCallback)(e=>{var t;e.preventDefault(),e.stopPropagation(),(null===(t=c.current)||void 0===t?void 0:t.contains(e.target))?d("DRAGGING_ON_TARGET"):d("DRAGGING_OFF_TARGET")},[]),f=(0,a.useCallback)(e=>{var t;e.preventDefault(),e.stopPropagation(),(null===(t=c.current)||void 0===t?void 0:t.contains(e.relatedTarget))||e.target!==document.body&&null!==e.relatedTarget||d("IDLE")},[]),h=(0,a.useCallback)(e=>{var t;(null===(t=c.current)||void 0===t?void 0:t.contains(e.target))||(e.preventDefault(),d("IDLE"))},[]),x=(0,a.useCallback)(e=>{e.preventDefault(),e.stopPropagation(),t(e),d("DROPPED"),setTimeout(()=>{d("IDLE")},500)},[t]);return(0,a.useEffect)(()=>{if(!i)return document.body.addEventListener("dragover",u),document.body.addEventListener("dragleave",f),document.body.addEventListener("drop",h),()=>{document.body.removeEventListener("dragover",u),document.body.removeEventListener("dragleave",f),document.body.removeEventListener("drop",h)};d("IDLE")},[u,f,h,x,i]),(0,s.jsx)(l.Provider,{value:{dragState:o,setDragState:d},children:(0,s.jsx)("div",{ref:c,className:r,onDrop:i?void 0:x,children:n})})}},45033:function(e,t,n){n.d(t,{A2:function(){return C},AZ:function(){return _},HF:function(){return w},Lt:function(){return p},Vy:function(){return j},WR:function(){return k},YG:function(){return g},hP:function(){return N},nI:function(){return y},u2:function(){return M}});var r=n(41596),i=n(27573),s=n(9788),a=n(49002);function l(){let e=(0,r._)(["\n  outline-none\n  py-2\n  px-1.5\n  -mx-1\n  -mt-1\n  mb-1\n  border-b-0.5\n  border-border-300\n"]);return l=function(){return e},e}function o(){let e=(0,r._)(["\n  z-dropdown\n  bg-bg-000\n  border-0.5\n  border-border-300\n  backdrop-blur-xl\n  rounded-lg\n  min-w-[8rem]\n  overflow-hidden\n  p-1\n  text-text-300\n  shadow-diffused \n  shadow-[hsl(var(--always-black)/4%)]\n"]);return o=function(){return e},e}function d(){let e=(0,r._)(["\n  rounded\n  py-1\n  px-2\n  max-w-full\n  whitespace-nowrap\n  text-ellipsis\n  overflow-hidden\n"]);return d=function(){return e},e}function c(){let e=(0,r._)(["text-text-500 pt-1 px-2"]);return c=function(){return e},e}function u(){let e=(0,r._)(["\n  py-1\n  px-2\n  rounded-md\n  cursor-pointer\n  whitespace-nowrap\n  overflow-hidden\n  text-ellipsis\n  grid\n  grid-cols-[minmax(0,_1fr)_auto]\n  gap-2\n  items-center\n  outline-none\n  select-none\n  [&[data-highlighted]]:bg-bg-200\n  [&[data-highlighted]]:text-text-300\n  ","\n  ","\n"]);return u=function(){return e},e}function f(){let e=(0,r._)(["\n  py-1\n  px-2\n  rounded-md\n  whitespace-nowrap\n  overflow-hidden\n  text-ellipsis\n  flex\n  justify-between\n  gap-2\n  items-center\n"]);return f=function(){return e},e}function h(){let e=(0,r._)(["\n  py-1\n  px-2\n  rounded\n  cursor-pointer\n  whitespace-nowrap\n  overflow-hidden\n  text-ellipsis\n  grid\n  grid-cols-[minmax(0,_1fr)_auto]\n  gap-2\n  items-center\n  outline-none\n  select-none\n  [&[data-highlighted]]:bg-bg-200\n  [&[data-highlighted]]:text-text-300\n"]);return h=function(){return e},e}function x(){let e=(0,r._)(["\n  z-dropdown\n  bg-bg-000\n  border-0.5\n  border-border-300\n  backdrop-blur-xl\n  rounded-lg\n  min-w-[8rem]\n  overflow-hidden\n  p-1\n  text-text-300\n  shadow-diffused \n  shadow-[hsl(var(--always-black)/4%)]\n"]);return x=function(){return e},e}function m(){let e=(0,r._)(["\n  h-0\n  border-t-0.5\n  border-border-300\n  m-1\n"]);return m=function(){return e},e}function p(e){var t;let{trigger:n,children:r,unstyledTrigger:s=!1,matchTriggerWidth:l=!1,open:o,onOpenChange:d,...c}=e;return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)(a.fC,{open:o,onOpenChange:d,children:[s?(0,i.jsx)(a.xz,{asChild:!0,children:n}):(0,i.jsx)(b,{asChild:!0,children:n}),(0,i.jsx)(a.Uv,{children:(0,i.jsx)(v,{style:l?{width:"var(--radix-dropdown-menu-trigger-width)"}:void 0,sideOffset:null!==(t=c.sideOffset)&&void 0!==t?t:4,...c,children:r})})]})})}n(7653);let g=(0,s.q)(a.Ju)(l()),v=(0,s.q)(a.VY)(o()),b=(0,s.q)(a.xz)(d());a.Qk;let j=a.Tr,y=a.Uv,w=(0,s.q)(a.Ju)(c()),N=(0,s.q)(a.ck)(u(),e=>{let{disabled:t}=e;return t&&"\n    opacity-50\n    pointer-events-none\n  "},e=>{let{danger:t}=e;return t&&"\n    !text-danger-000\n    [&[data-highlighted]]:bg-danger-900\n  "}),_=s.q.div(f()),k=(0,s.q)(a.fF)(h()),C=(0,s.q)(a.tu)(x()),M=(0,s.q)(a.VD)(m())},10571:function(e,t,n){n.d(t,{g:function(){return d}});var r=n(41596),i=n(27573),s=n(9788),a=n(10607),l=n(45790);function o(){let e=(0,r._)(["\n  relative\n  bg-text-500/50\n  overflow-hidden\n  after:absolute\n  after:inset-0\n  after:translate-x-[-100%]\n  after:bg-gradient-to-r after:from-always-white/0 after:from-0% after:via-always-white/20 after:via-50% after:to-100% after:to-always-white/0\n  after:animate-[shimmer_1.5s_infinite]\n"]);return o=function(){return e},e}function d(e){let{className:t,height:n=24,width:r,rounded:s=!0}=e;return(0,i.jsx)(c,{className:(0,a.Z)(t,s&&"rounded-full"),style:{height:n,width:r||"100%"},children:(0,i.jsx)("span",{className:"sr-only",children:(0,i.jsx)(l.Z,{defaultMessage:"Loading...",id:"gjBiyjshwX"})})})}let c=s.q.div(o())},49167:function(e,t,n){n.d(t,{$:function(){return d}});var r=n(41596),i=n(27573),s=n(47190),a=n(9788),l=n(7653);function o(){let e=(0,r._)(["",""]);return o=function(){return e},e}let d=e=>{let{hideBottomShadow:t,scrollContainerRef:n,persistedScrollToRef:r,...s}=e,a=(null==r?void 0:r.current)!==void 0,o=(0,l.useRef)(null),d=n||o,u=(0,l.useCallback)(()=>{let e=d.current;if(e&&!t){let{scrollTop:t,offsetHeight:n,scrollHeight:i}=e;t+n>=i?e.classList.remove("has-bottom-scroll"):e.classList.add("has-bottom-scroll"),a&&0!==t&&Math.abs(t-r.current)>10&&(r.current=t)}},[t,d,a,r]);return u(),(0,l.useEffect)(()=>{let e=d.current;requestAnimationFrame(()=>{a&&e&&(null==e||e.scrollTo({top:r.current,behavior:"instant"}))})},[d,a,r]),(0,l.useEffect)(()=>{let e=d.current;return null==e||e.addEventListener("scroll",u),()=>null==e?void 0:e.removeEventListener("scroll",u)},[u,d]),(0,i.jsx)(c,{ref:d,...s,children:s.children})},c=a.q.div(o(),s.X)},44512:function(e,t,n){n.d(t,{nh:function(){return o},pp:function(){return l},xK:function(){return a}});var r=n(40287),i=n(7653),s=n(77879);let a=()=>{var e,t;let n=window,r=null==n?void 0:null===(e=n.document)||void 0===e?void 0:e.hidden,[a,l]=(0,i.useState)(r),o=(0,i.useRef)(null!==(t=null==n?void 0:n.document)&&void 0!==t?t:null);return(0,s.OR)("visibilitychange",()=>l(!(null==n?void 0:n.document.hidden)),o),a},l=e=>{let{shouldFocus:t,target:n,delayMs:r=100}=e;(0,i.useEffect)(()=>{if(t&&n){let e=setTimeout(()=>{var e;null===(e=n.current)||void 0===e||e.focus()},r);return()=>clearTimeout(e)}},[t,n,r])},o=(e,t)=>{let n=(0,r.f)(),s=n.get(e),[a,l]=(0,i.useState)(void 0!==s?"true"===s:t);return[a,(0,i.useCallback)(t=>{l(r=>{let i="function"==typeof t?t(r):t;return n.set(e,i.toString()),i})},[n,e])]}},84464:function(e,t,n){n.d(t,{e:function(){return r}});let r=e=>{if(!e.preview_asset)return!1;let{image_width:t,image_height:n}=e.preview_asset;return t<200||n<200}},53949:function(e,t,n){var r,i;n.d(t,{Y:function(){return r}}),(i=r||(r={})).Image="image",i.Blob="blob",i.SanitizedDocument="document"},13890:function(e,t,n){n.d(t,{X_:function(){return a},ir:function(){return i},p5:function(){return s}});var r=n(10228);let i=e=>e===r.co.ACCESS_DENIED||e===r.co.UNAUTHENTICATED||e===r.co.DISABLED,s="Your organization has turned off this integration. Please contact your administrator to re-enable.",a={[r.Fg.GDRIVE]:"Google",[r.Fg.GITHUB]:"GitHub",[r.Fg.OUTLINE]:"Outline",[r.Fg.SALESFORCE]:"Salesforce",[r.Fg.GMAIL]:"Gmail",[r.Fg.GCAL]:"Google Calendar",[r.Fg.SLACK]:"Slack",[r.Fg.ASANA]:"Asana"}}}]);