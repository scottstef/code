"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1421],{12099:function(e,t,n){n.d(t,{Ml:function(){return r},Vl:function(){return o}});var s=n(5362),a=n(27218),l=n(87033),i=n(58183);function r(){let e=(0,i.useLayer)("frontend"),{value:t}=(0,l.FL)("chat_suggestion_chips_enabled"),n=e.get("chat_suggestion_chips",!1);return t||n}function o(e){let{mutateAsync:t,enabled:n}=function(){let{activeOrganization:e}=(0,a.t)(),{value:t}=(0,l.FL)("chat_autocomplete"),n=(0,s.uC)("/api/organizations/".concat(null==e?void 0:e.uuid,"/dust/chat_autocomplete"),"POST",{enabled:t,onError:()=>{console.warn("Failed to fetch completion")},meta:{noToast:!0}});return{mutateAsync:n.mutateAsync,isPending:n.isPending,isIdle:n.isIdle,enabled:t}}();return{fetchInputAutocompletion:async s=>{if(!n||!e)return"";let[a,l]=(await t({conversationUUID:null!=e?e:"",prompt:s})).prompt.split("\n").map(e=>e.trim());return"Yes"===a?" "===s[s.length-1]?l||"":" "+(l||""):"No"===a&&l||""}}}},42814:function(e,t,n){n.d(t,{GB:function(){return o},HK:function(){return u},KM:function(){return d},fq:function(){return c},h9:function(){return r}});var s=n(5362),a=n(27218),l=n(13262),i=n(77930);let r=()=>{let{activeOrganization:e}=(0,a.t)(),t=null==e?void 0:e.uuid;return(0,s.WE)("/api/organizations/".concat(t,"/list_styles"),{queryKey:[l.it,{orgUUID:t}]})},o=()=>{let{activeOrganization:e}=(0,a.t)(),t=null==e?void 0:e.uuid,n=(0,i.useQueryClient)();return(0,s.uC)("/api/organizations/".concat(t,"/styles/create"),"POST",{onSuccess:()=>{n.invalidateQueries({queryKey:[l.it,{orgUUID:t}]})}})},c=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],{activeOrganization:n}=(0,a.t)(),r=null==n?void 0:n.uuid,o=(0,i.useQueryClient)();return(0,s.uC)("/api/organizations/".concat(r,"/styles/").concat(e,"/edit"),"PUT",{onSuccess:()=>{o.invalidateQueries({queryKey:[l.it,{orgUUID:r}]})},enabled:!t})},d=e=>{let{activeOrganization:t}=(0,a.t)(),n=null==t?void 0:t.uuid,r=(0,i.useQueryClient)();return(0,s.uC)("/api/organizations/".concat(n,"/styles/").concat(e,"/delete"),"DELETE",{onSuccess:()=>{r.invalidateQueries({queryKey:[l.it,{orgUUID:n}]})}})},u=()=>{let{activeOrganization:e}=(0,a.t)(),t=null==e?void 0:e.uuid;return(0,s.uC)("/api/organizations/".concat(t,"/styles/preview"),"POST")}},1445:function(e,t,n){n.d(t,{Ad:function(){return u},hU:function(){return f},kk:function(){return m},oc:function(){return g},wH:function(){return x}}),n(19170);var s=n(27218),a=n(87033),l=n(10228),i=n(58183),r=n(2949),o=n(19132),c=n(46200);let d=()=>{let{value:e}=(0,a.FL)("use_incoherent_traffic_light_noises");return e},u=()=>{let e=d(),t=(0,s.rW)(),n=h();return e&&t&&n},m=e=>{var t,n;let a=u(),{account:l}=(0,s.t)();return!!a&&(e?!!(null==e?void 0:null===(t=e.conversationSettings)||void 0===t?void 0:t.enabled_compass):!!(null==l?void 0:null===(n=l.settings)||void 0===n?void 0:n.enabled_compass))},x=e=>{let t=(0,i.useDynamicConfig)("claudeai_compass_unsupported_models");return!e||!t.get("unsupported_models",[]).includes(e)},p=()=>{let{value:e}=(0,a.FL)("use_rock_gym_taco_truck");return e},h=()=>{let e=(0,c.ou)(),t=(0,r.ez)(),n=(0,o.te)(l.Fg.GMAIL),s=(0,o.te)(l.Fg.GCAL);return e||t||n||s},f=()=>{let e=(0,c.qS)(),t=(0,r.EU)(),{isAuthenticated:n}=(0,r.oE)(),s=(0,o.j5)(l.Fg.GMAIL),{isAuthenticated:a}=(0,o.QD)(l.Fg.GMAIL),i=(0,o.j5)(l.Fg.GCAL),{isAuthenticated:d}=(0,o.QD)(l.Fg.GCAL);return e||t&&n||s&&a||i&&d},g=()=>{let e=p(),t=(0,s.rW)(),n=h();return e&&t&&n}},46200:function(e,t,n){n.d(t,{FD:function(){return o},j9:function(){return u},ou:function(){return c},qS:function(){return d},uH:function(){return r}});var s=n(27218),a=n(87033),l=n(58183),i=n(59016);let r=()=>{let{value:e}=(0,a.FL)("claudeai_web_search");return e},o=()=>{var e;let t=(0,s.Cf)(),{data:n}=(0,i.Kg)(),a=!(null==n?void 0:null===(e=n.disabled_features)||void 0===e?void 0:e.includes("web_search"));return!t||a},c=()=>{let e=r(),t=o();return e&&t},d=e=>{var t,n,l;let i=o(),{account:r}=(0,s.t)(),{value:c}=(0,a.FL)("claudeai_web_search_default_on");if(!i)return!1;let d=c?(null==r?void 0:null===(t=r.settings)||void 0===t?void 0:t.enabled_web_search)!==!1:!!(null==r?void 0:null===(n=r.settings)||void 0===n?void 0:n.enabled_web_search);return e?!!(null==e?void 0:null===(l=e.conversationSettings)||void 0===l?void 0:l.enabled_web_search):d},u=e=>!(0,l.useDynamicConfig)("claudeai_web_search_unsupported_models").get("unsupported_models",[]).includes(e)},61377:function(e,t,n){n.d(t,{F4:function(){return c}});var s=n(5362),a=n(27218),l=n(13262),i=n(10228),r=n(2949);let o=e=>[i.co.CREATED,i.co.PENDING,i.co.UPDATING].includes(e),c=()=>{let e=(0,r.EU)(),t=(0,r.r7)(),n=(0,r.ez)(),{data:s}=d(i.Fg.GDRIVE),a=null==s?void 0:s.state;return!!(e&&t&&n&&a&&[i.co.CREATED,i.co.UPDATING,i.co.PENDING].includes(a))},d=e=>{let{account:t,activeOrganization:n}=(0,a.t)(),i=null==t?void 0:t.uuid,r=null==n?void 0:n.uuid;return(0,s.WE)("/api/organizations/".concat(r,"/sync/ingestion/").concat(e,"/progress"),{queryKey:[l.dY,{orgUuid:r,accountUuid:i,syncSourceType:e}],enabled:!!n,refetchInterval:e=>!!(e.state.data&&o(e.state.data.state))&&6e4,meta:{noToast:!0}})}},35102:function(e,t,n){n.d(t,{B4:function(){return r},i7:function(){return o},jL:function(){return i}});var s=n(87033),a=n(7653);let l=(0,a.createContext)({enabled:!1,sharedResources:{},selectedResource:null,setSelectedResource:()=>void 0,isActive:!1}),i=()=>{var e;return null!==(e=(0,a.useContext)(l).enabled)&&void 0!==e&&e},r=()=>(0,a.useContext)(l).isActive,o=()=>(0,s.FL)("claudeai_tiny_pancakes").value},61421:function(e,t,n){n.d(t,{x:function(){return lx}});var s,a,l,i,r=n(41596),o=n(27573),c=n(9788),d=n(69321),u=n(87033),m=n(10607),x=n(8927),p=n(68425),h=n(7653),f=n(40950),g=n(77879),v=n(66605),j=n(12099),y=n(76220),b=n(6766),w=n(27218),k=n(70354),C=n(6385),M=n(10228),N=n(65683),S=n(97695),_=n(45790),E=n(8905),Z=n(92676),I=n(61377),A=n(23098),z=n(47082);function D(e){let{warning:t,placement:n,theme:s}=e;return(0,o.jsx)(x.M,{children:t&&(0,o.jsx)(p.E.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},children:(0,o.jsx)("div",{className:(0,m.Z)("border-0.5 relative z-[5] px-3.5","bottom"===n?"-mb-1 rounded-t-xl border-b-0 pb-2.5 pt-2":"-mb-1 -mt-1 rounded-b-xl border-t-0 pb-2 pt-2.5",{"bg-danger-900 border-danger-100/20":"danger"===s,"text-text-200 border-accent-pro-100/20 bg-accent-pro-900":"pro"===s,"bg-bg-200 border-border-300":"info"===s}),children:t})})})}var T=n(91217),L=n(58183),F=n(43290),R=n(67311),P=n(49185),O=n(27895),U=n(11607),G=n(52939),H=n(29670),K=n(40287),B=n(60509),W=n(2723),V=n(67587),Y=n(32151),q=n(5984);function Q(e){let{onReady:t,children:n,onSuccess:s}=e,a=(0,Y.useStripe)(),l=(0,Y.useElements)(),{account:i}=(0,w.t)(),[r,c]=(0,h.useState)(null),[d,u]=(0,h.useState)(!1),[m,x]=(0,h.useState)(!1),{mutateAsync:p}=(0,E.RF)(),f=async()=>{if(!d&&a&&l){u(!0);try{let e=await l.submit();if(e.error){e.error.message&&c(e.error.message);return}let t=await p(),{error:n}=await a.confirmPayment({elements:l,clientSecret:t.clientSecret,redirect:"if_required"});(null==n?void 0:n.message)&&"validation_error"!==n.type&&c(n.message),n||s()}catch(e){c(e.message)}finally{u(!1)}}};return(0,o.jsxs)(q.l0,{onSubmit:()=>{d||f()},children:[(0,o.jsx)(Y.PaymentElement,{id:"payment-element",options:{readOnly:d,layout:"tabs",terms:{card:"never"},defaultValues:{billingDetails:{email:null==i?void 0:i.email_address,name:null==i?void 0:i.full_name}}},onReady:()=>{x(!0),t&&t()}}),r&&(0,o.jsx)("div",{className:"text-danger-000 mt-4",id:"payment-message",children:r}),(0,o.jsxs)("div",{className:"mt-5 flex flex-row flex-wrap items-center justify-end gap-3",children:[n,(0,o.jsx)(k.z,{type:"submit",loading:d,variant:"flat",className:"bg-accent-pro-100 hover:bg-accent-pro-200 w-full py-6",disabled:!m,children:(0,o.jsx)(_.Z,{defaultMessage:"Confirm payment",id:"Dja1nAdMHW"})})]}),(0,o.jsx)("div",{className:"mt-3 text-text-500 text-sm text-center",children:(0,o.jsx)(_.Z,{defaultMessage:"By providing your payment information, you allow Anthropic to charge your card in the amount above. Purchase non-refundable.",id:"0L0VGgMTRs"})})]})}function J(e){let{amount:t,currency:n,children:s,className:a,onSuccess:l}=e,i=(0,B.x2)(),[r,c]=(0,h.useState)(!0),{theme:d,mode:u}=(0,V.F)(),x=(0,K.f)().get(C.cn.COLOR_MODE),p={fontSizeBase:"16px",colorBackground:(0,W.J)(d,u,x,"bg-000"),colorText:(0,W.J)(d,u,x,"text-100")},f={mode:"payment",amount:t,currency:null==n?void 0:n.toLowerCase(),payment_method_types:["card","link"],loader:"never",appearance:{theme:"stripe",variables:p}};return(0,o.jsxs)("div",{className:(0,m.Z)("relative",a),children:[(0,o.jsx)("div",{className:(0,m.Z)("w-full pt-1 transition-opacity duration-1000",{"opacity-0":r}),children:(0,o.jsx)(Y.Elements,{options:f,stripe:i,children:(0,o.jsx)(Q,{onReady:()=>c(!1),onSuccess:l,children:s})})}),r&&(0,o.jsx)(X,{})]})}let X=()=>(0,o.jsx)("div",{className:"absolute inset-0 flex h-full w-full items-center justify-center",children:(0,o.jsx)(U.Loading,{})});function $(e){var t,n;let s,{isOpen:a,onClose:l,conversationUUID:i}=e,r=(0,O.e)(),{activeOrganization:c}=(0,w.t)(),d=(0,P.n)(),u=(0,h.useCallback)(()=>{r.addSuccess((0,o.jsx)(_.Z,{defaultMessage:"Message limits reset. Let’s chat!",id:"LGCoQdVha4"})),(null==c?void 0:c.uuid)&&i&&d({type:"within_limit"},c.uuid,i),l()},[null==c?void 0:c.uuid,i,l,r,d]),{data:m,isLoading:x}=(0,E.w3)();return m&&(s=(0,H.xG)(m.price+(null!==(t=m.taxAmount)&&void 0!==t?t:0),m.currency,{preferWholeNumber:!0})),(0,o.jsx)(G.u_,{isOpen:a,onClose:l,title:(0,o.jsx)("div",{className:"text-text-200 font-copernicus text-xl font-medium tracking-tight mt-2",children:(0,o.jsx)(_.Z,{defaultMessage:"Reset usage limits",id:"YKpO8tTise"})}),hasCloseButton:!0,modalSize:"lg",children:(0,o.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,o.jsxs)("div",{className:"flex p-3 justify-center items-center gap-10 self-stretch rounded-xl border border-accent-pro-100 bg-accent-pro-900 mt-6",children:[(0,o.jsx)("div",{className:"flex flex-col px-5 gap-2",children:x||!m?(0,o.jsx)(U.Loading,{size:"sm"}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("p",{className:"text-text-100 text-3xl/6 font-medium tracking-tighter",children:s}),null===m.taxAmount&&(0,o.jsx)("p",{className:"text-text-500 text-sm/3 tracking-tight text-nowrap",children:(0,o.jsx)(_.Z,{defaultMessage:"+ tax",id:"H/9uGFjKzR"})})]})}),(0,o.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,o.jsx)("p",{className:"text-text-200 text-sm tracking-tight",children:(0,o.jsx)(_.Z,{defaultMessage:"Immediately get access to Claude instead of waiting for usage limits to reset.",id:"6Gj58FRZ27"})}),(0,o.jsx)("p",{className:"text-text-200 text-sm tracking-tight",children:(0,o.jsx)(_.Z,{defaultMessage:"This is a one-time payment.",id:"lVfQHZlUq0"})})]})]}),(0,o.jsx)(J,{amount:m?m.price+(null!==(n=m.taxAmount)&&void 0!==n?n:0):500,currency:(null==m?void 0:m.currency)||"USD",onSuccess:u})]})})}function ee(e){let{messageLimit:t,placement:n,defaultWarning:s,defaultTheme:a}=e,l=(0,L.useExperiment)("rate_limit_resets").get("allow_rate_limit_resets",!1);return l&&("exceeded_limit"===t.type||"approaching_limit"===t.type&&0===t.remaining)?(0,o.jsx)(D,{theme:"pro",placement:n,warning:(0,o.jsx)(en,{messageLimit:t})}):l&&"approaching_limit"===t.type?(0,o.jsx)(D,{theme:"info",placement:n,warning:(0,o.jsx)(et,{messageLimit:t})}):(0,o.jsx)(D,{theme:a,warning:s,placement:n})}let et=e=>{let{messageLimit:t}=e,[n,s]=(0,h.useState)(!1);return(0,o.jsxs)("div",{className:"w-full",children:[(0,o.jsxs)("div",{className:"flex w-full flex-col items-center md:flex-row gap-2",children:[(0,o.jsx)("div",{className:"flex flex-row items-center gap-2 md:w-full",children:(0,o.jsx)("div",{children:(0,o.jsx)("div",{className:"text-sm",children:1===t.remaining?(0,o.jsx)(_.Z,{id:"RoowG4DICE",defaultMessage:"You have 1 message left before hitting usage limits"}):(0,o.jsx)(_.Z,{id:"4rS9S85sm+",defaultMessage:"You have {numMessagesRemaining} messages left before hitting usage limits",values:{numMessagesRemaining:t.remaining}})})})}),(0,o.jsx)("div",{className:"-mt-px w-full whitespace-nowrap md:w-fit",children:(0,o.jsx)(k.z,{variant:"unstyled",className:(0,m.Z)("@lg:w-fit w-full shrink-0","text-sm font-medium","text-accent-pro-000","hover:text-accent-pro-000 hover:bg-bg-500/40"),onClick:()=>{s(!0)},children:(0,o.jsx)(_.Z,{id:"0Lg76lu7jn",defaultMessage:"Reset limits"})})})]}),(0,o.jsx)($,{isOpen:n,onClose:()=>s(!1),conversationUUID:t.conversationUUID})]})},en=e=>{let{messageLimit:t}=e,n=F.ou.fromSeconds(t.resetsAt),[s,a]=(0,h.useState)(!1);return(0,o.jsxs)(R.P,{minimalUi:!0,actionButton:(0,o.jsxs)(k.z,{variant:"unstyled",size:"sm",className:(0,m.Z)("@lg:w-fit w-full shrink-0","bg-accent-pro-100 text-oncolor-100 font-medium font-styrene transition-colors hover:bg-accent-pro-200"),onClick:()=>{a(!0)},children:[(0,o.jsx)(_.Z,{id:"0Lg76lu7jn",defaultMessage:"Reset limits"}),(0,o.jsx)("span",{className:"inline-block text-[0.65rem] bg-bg-000/20 ml-2 px-1.5 py-0.5 rounded",children:(0,o.jsx)(_.Z,{id:"vroSRZd5vI",defaultMessage:"BETA"})})]}),children:[(0,o.jsx)(_.Z,{id:"74NSYSM2xX",defaultMessage:"You can reset usage limits now or wait until {time}.",values:{time:(0,o.jsx)("span",{className:"inline-block",children:n.toLocaleString(F.ou.TIME_SIMPLE)})}}),(0,o.jsx)($,{isOpen:s,onClose:()=>a(!1),conversationUUID:t.conversationUUID})]})},es=e=>{let t=(0,A.nR)(e),n=(0,A.mo)();return void 0!==t&&t>n};var ea=n(90377),el=n(3053),ei=n(81695),er=n(41270);let eo=er.z.object({warningCount:er.z.number().optional(),blockInputCount:er.z.number().optional()}),ec={};function ed(e){let{onDismiss:t}=e,n=(0,el.z$)(),s=(0,ei.useRouter)();(0,h.useEffect)(()=>{n.track({event_key:"chat.conversation.too_long_prompt_warning:loaded"})},[n]);let a=(0,h.useCallback)(()=>{n.track({event_key:"chat.conversation.too_long_prompt_warning:accepted"}),s.push("/chats")},[n,s]),l=(0,h.useCallback)(()=>{n.track({event_key:"chat.conversation.too_long_prompt_warning:dismissed"}),t()},[n,t]);return(0,o.jsx)(ea.A,{children:(0,o.jsxs)("div",{className:"text-text-200 flex w-full items-center justify-between",children:[(0,o.jsx)("div",{className:"flex items-center gap-1",children:(0,o.jsx)(_.Z,{defaultMessage:"<bold>Tip:</bold> <span>Long chats cause you to reach your usage limits faster.</span>",id:"Kq9VxBpVQk",values:{bold:e=>(0,o.jsx)("b",{children:e}),span:e=>(0,o.jsx)("span",{children:e})}})}),(0,o.jsxs)("div",{children:[(0,o.jsx)("button",{className:"text-text-100 font-medium hover:underline",onClick:a,children:(0,o.jsx)(_.Z,{defaultMessage:"Start a new chat",id:"c/Hjsh8c90"})}),"\xa0",(0,o.jsx)(k.z,{className:"ml-2 h-4 w-4 translate-y-[0.5px] rounded !bg-transparent",size:"unset",variant:"ghost",onClick:l,children:(0,o.jsx)(N.X,{size:12})})]})]})})}var eu=n(88146);function em(){let e=(0,w.cs)(),t=(0,f.Z)();return(0,o.jsx)(R.P,{actionButton:null,title:t.formatMessage({defaultMessage:"Team plan canceled",id:"KuqVOfg9/0"}),children:e?(0,o.jsx)(_.Z,{defaultMessage:"You can no longer chat with Claude. To restore full access, <link>renew your subscription</link>.",id:"L2pC0kiNNO",values:{link:e=>(0,o.jsx)(eu.default,{className:"whitespace-nowrap font-medium underline",href:"/settings/billing",children:e})}}):(0,o.jsx)(_.Z,{defaultMessage:"You can no longer chat with Claude.",id:"hxcpUUnV0b"})})}var ex=n(82056);let ep=()=>{let e=(0,ex.F)({allowSelfUpgrade:!1});return(0,o.jsx)(R.P,{actionButton:e,children:(0,o.jsx)(_.Z,{defaultMessage:"Due to capacity constraints, chatting with Claude is currently not available. Please try again shortly.",id:"kfyWX0MxKQ"})})};var eh=n(85465),ef=n(48894);let eg=e=>{let{className:t,...n}=e;return(0,o.jsx)("a",{className:(0,m.Z)("text-text-100 font-medium hover:underline",t),...n})},ev=e=>{var t;let n,{inaccessibleSyncSources:s}=e,{chatResourceState:a}=(0,z.Y)(),l=(0,eh.l)(),{isDrawerExpanded:i,setIsDrawerExpanded:r}=(0,ef.b)(),c=s.every(e=>e.status.state===M.co.UNAUTHENTICATED)&&1===new Set(s.map(e=>e.type)).size,d=null===(t=s[0])||void 0===t?void 0:t.type,u=(0,o.jsx)("button",{onClick:()=>{r(!0)},children:(0,o.jsx)(eg,{children:(0,o.jsx)(_.Z,{defaultMessage:"Show {count, plural, one {# Item} other {# Items}}",id:"1HlfJxfH7H",values:{count:s.length}})})});return c&&null!==d?n=(0,o.jsx)("button",{onClick:()=>l(d),children:(0,o.jsx)(eg,{children:(0,o.jsx)(_.Z,{defaultMessage:"Reconnect with {sourceName}",id:"dUareRZF9G",values:{sourceName:M.hP[d]}})})}):a.conversationUUID&&!i&&(n=u),(0,o.jsx)(ea.A,{children:(0,o.jsx)(_.Z,{defaultMessage:"Some of your content could not be loaded. {actionButton}",id:"Ibsz06ys2B",values:{actionButton:n}})})},ej=er.z.array(er.z.object({text:er.z.string(),href:er.z.string().optional(),button:er.z.boolean().optional()})).nullable();function ey(e){let{messageComponents:t}=e;return(0,o.jsx)(ea.A,{children:(0,o.jsx)(eb,{messageComponents:t})})}function eb(e){let{messageComponents:t}=e;return(0,o.jsx)("div",{children:t.map((e,t)=>e.button?(0,o.jsx)(k.z,{href:e.href,target:"_blank",children:e.text},t):e.href?(0,o.jsx)(eu.default,{href:e.href,className:"underline",target:"_blank",children:e.text},t):(0,o.jsx)("span",{children:e.text},t))})}var ew=n(7418),ek=n(5161),eC=n(53949),eM=n(95899),eN=n(4746);function eS(e){let{isOpen:t,setIsOpen:n,files:s,isNewConversation:a}=e,l=(0,f.Z)();return(0,o.jsxs)(G.u_,{isOpen:t,hasCloseButton:!0,title:l.formatMessage({defaultMessage:"Analysis tool required",id:"jvGhSl5Gpz"}),onClose:()=>n(!1),children:[(0,o.jsxs)("div",{className:"my-4 text-pretty flex flex-col gap-2",children:[(0,o.jsx)("div",{children:(0,o.jsx)(_.Z,{defaultMessage:"Claude requires the analysis tool to be enabled to analyze the following files:",id:"DWgtKtw1y9"})}),(0,o.jsx)("ul",{className:"list-disc pl-4",children:s.map(e=>(0,o.jsx)("li",{children:e.file_name},e.file_uuid))}),(0,o.jsx)("div",{children:a?l.formatMessage({defaultMessage:"If you start this conversation without turning on the analysis tool, these files will not be available to Claude.",id:"0r1iTiKoSi"}):l.formatMessage({defaultMessage:"Please enable the analysis tool and then start a new chat in this project to analyze these files.",id:"YLHCS8L8fc"})})]}),(0,o.jsx)(G.dm,{layout:"right",children:(0,o.jsx)(G.mH,{type:"button",size:"lg",onClick:()=>n(!1),children:(0,o.jsx)(_.Z,{defaultMessage:"OK",id:"kAEQyVFWDv"})})})]})}function e_(e){let{files:t,isNewConversation:n}=e,{track:s}=(0,el.z$)(),{openFeaturePreviewModal:a}=(0,eN.h9)(),[l,i]=(0,h.useState)(!1);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(eS,{isOpen:l,setIsOpen:i,isNewConversation:n,files:t}),(0,o.jsx)(ea.A,{children:(0,o.jsxs)("div",{className:"flex w-full items-center justify-between",children:[(0,o.jsx)("div",{children:(0,o.jsx)(_.Z,{defaultMessage:"Claude cannot access some of the <a>files attached</a> to this conversation",id:"dlrqZaDnOO",values:{a:e=>(0,o.jsx)("a",{className:"underline",href:"#",onClick:()=>i(!0),children:e})}})}),(0,o.jsx)("div",{children:(0,o.jsx)("a",{className:"text-accent-secondary-000 font-medium",href:"#",onClick:()=>{s({event_key:"claudeai.settings.preview_feature.opened",source:"ooc_files_warning"}),a()},children:(0,o.jsx)(_.Z,{defaultMessage:"Enable analysis tool",id:"UDUWEABw3p"})})})]})})]})}var eE=n(2210),eZ=n(99205),eI=n(18013),eA=n(80151),ez=n(48912);let eD=er.z.object({id:er.z.string(),bodyMd:er.z.string(),isDismissable:er.z.boolean(),proUpsell:er.z.boolean(),alertForModels:er.z.array(er.z.string())}).nullable(),eT=e=>{let t=(0,u.Zr)("claude_ai_system_alerts","alert",null,eD),[n,s]=(0,eI.R)("".concat(e,":").concat(null==t?void 0:t.id,":hideAlertOnConversation"),!1),a=null==t?void 0:t.alertForModels,l=(0,eZ.wN)(e);return e&&(!a||a.includes(l))&&t&&!n?{systemAlertFromConfig:{alert:t,component:(0,o.jsx)(eL,{alert:t,setHideAlert:s})}}:{}},eL=e=>{let{alert:t,setHideAlert:n}=e,s=(0,w.w7)(),a=(0,ex.F)();return(0,o.jsxs)(ea.A,{children:[(0,o.jsx)(eE.J$,{children:(0,o.jsx)(ez.U,{children:t.bodyMd})}),s&&t.proUpsell&&a,t.isDismissable&&(0,o.jsx)(k.z,{className:"ml-2 h-4 w-4 translate-y-[0.5px] rounded",size:"unset",variant:"ghost",onClick:()=>n(!0),children:(0,o.jsx)(eA.X,{size:12})})]})};var eF=n(28803);let eR=e=>{let{className:t,...n}=e;return(0,o.jsx)("button",{className:"text-text-100 text-sm font-medium hover:underline text-nowrap",...n})};var eP=n(35548);let eO=e=>{let t=(0,eP.ZW)(e.projectKnowledgebaseTokens,e.maxConversationTokens),n=(0,eF.$H)("push");return(0,o.jsx)(R.P,{actionButton:(0,o.jsx)(eR,{onClick:()=>n({projectUuid:e.projectUuid}),children:(0,o.jsx)(_.Z,{defaultMessage:"Start a new conversation",id:"Lc72GmPP25"})}),children:t?(0,o.jsx)(_.Z,{defaultMessage:"This conversation has reached its <link>maximum length</link>. You may want to remove some files from your project’s knowledge base.",id:"8KrIIDzvA1",values:{link:e=>(0,o.jsx)("a",{className:"underline",target:"_blank",rel:"noreferrer",href:C.jC,children:e})}}):(0,o.jsx)(_.Z,{defaultMessage:"This conversation has reached its <link>maximum length</link>.",id:"h7H72fz8l5",values:{link:e=>(0,o.jsx)("a",{className:"underline",target:"_blank",rel:"noreferrer",href:C.jC,children:e})}})})};var eU=n(74187),eG=n(18409);let eH=e=>{let{conversationUUID:t,conversationTokensSoFar:n,conversationFiles:s,projectKnowledgebaseTokens:a,input:l,attachments:i,syncSourceUuids:r,chatInputModel:o}=e;a=null!=a?a:0;let c=s.filter(e=>e.file_kind===eC.Y.Image),d=n+(0,eP.hn)(c)+s.filter(e=>e.file_kind===eC.Y.SanitizedDocument).reduce((e,t)=>e+(0,eP.ZJ)(t),0)+a,u=(0,eP.y1)(l,c,i),m=d+u+(0,v.fg)(r),x=(0,eG.e)(t,o),p=null;return d>x?p="exceeded":m>x&&(p="will-exceed"),[p,{conversationTokens:d,msgTokens:u,totalTokens:m,maxConversationTokens:x}]},eK=e=>{let t;let n=(0,eF.$H)("push"),{tokenTotals:s,numAttachments:a,projectKnowledgebaseTokens:l}=e,{msgTokens:i,totalTokens:r,maxConversationTokens:c}=s,d=null!=l?l:0,u=(0,eP.ZW)(d,c),m=r/c-1;return t=a&&u?(0,o.jsx)(_.Z,{defaultMessage:"Try replacing the attached {numAttachments, plural, one {file} other {files}} with smaller excerpts or removing files from your project’s knowledge base.",id:"LZJa/izuge",values:{numAttachments:a}}):a?(0,o.jsx)(_.Z,{defaultMessage:"Try replacing the attached {numAttachments, plural, one {file} other {files}} with smaller excerpts.",id:"doIlMUx6Hu",values:{numAttachments:a}}):u?(0,o.jsx)(_.Z,{defaultMessage:"Try removing files from your project’s knowledge base.",id:"rTmS1cuCeD"}):(0,o.jsx)(_.Z,{defaultMessage:"Try shortening your message.",id:"vd0y42PhHK"}),(0,o.jsx)(ea.A,{children:(0,o.jsxs)("span",{children:[(0,o.jsx)(_.Z,{defaultMessage:"Conversation is {percentage}% over the <link>length limit</link>.",id:"IGar1JqHAm",values:{percentage:Math.ceil(100*m),link:e=>(0,o.jsx)("a",{className:"underline",target:"_blank",rel:"noreferrer",href:C.jC,children:e})}}),"\xa0",t,"\xa0",i+d<c&&(0,o.jsx)("a",{className:"underline",href:"#",onClick:()=>n({projectUuid:e.projectUuid}),children:(0,o.jsx)(_.Z,{defaultMessage:"Start a new conversation?",id:"8ha4a4N9Uq"})})]})})},eB=e=>{let{switchToSonnet:t,dismissOpusHint:n,copyText:s,modelName:a}=e;return(0,o.jsx)(ea.A,{children:(0,o.jsxs)("div",{className:"text-text-200 flex w-full items-center flex-wrap justify-between",children:[(0,o.jsx)("div",{className:"flex items-center gap-1",children:s}),(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("button",{className:"text-text-100 text-sm font-medium hover:underline text-nowrap",onClick:t,children:(0,o.jsx)(_.Z,{defaultMessage:"Switch to {modelName}",values:{modelName:a},id:"1APwtKAkCy"})}),"\xa0",n&&(0,o.jsx)(k.z,{className:"ml-2 h-4 w-4 translate-y-[0.5px] rounded",size:"unset",variant:"ghost",onClick:n,children:(0,o.jsx)(N.X,{size:12})})]})]})})},eW=e=>{var t,n,s,a,l,i,r,c,d,m,x,p,f,g,v,j,k,N,L,F,R,P;let O,{placement:U}=e,{prompt:G,model:H,setModel:K,attachments:B,conversation:W,projectUuid:V,syncSourceUuids:Y,files:q}=(0,T.r)(),Q=(0,A.nR)(V),[J,X]=eH({conversationUUID:null!==(n=null==W?void 0:W.id)&&void 0!==n?n:null,conversationTokensSoFar:null!==(s=null==W?void 0:W.tokensSoFar)&&void 0!==s?s:0,conversationFiles:(null!==(a=null==W?void 0:W.files)&&void 0!==a?a:[]).concat(q),projectKnowledgebaseTokens:null!==(l=null==W?void 0:W.projectKnowledgebaseTokens)&&void 0!==l?l:Q,input:G,attachments:B,syncSourceUuids:Y,chatInputModel:H}),{exceededMessageLimitWarning:$,approachingMessageLimitWarning:et,messageLimit:en}=(0,ew.k)(null!==(i=null==W?void 0:W.id)&&void 0!==i?i:null),el="exceeded"===J?(0,o.jsx)(eO,{projectKnowledgebaseTokens:null!==(r=null==W?void 0:W.projectKnowledgebaseTokens)&&void 0!==r?r:0,maxConversationTokens:X.maxConversationTokens,projectUuid:V}):null,{isRavenCanceled:ei}=(0,E.pV)(),er=ei?(0,o.jsx)(em,{}):void 0,eu=(0,w.uh)()?(0,o.jsx)(ep,{}):void 0,ex=(()=>{let{chatResourceState:e}=(0,z.Y)();return[...e.syncSources||[],...(0,Z.yg)(V).data||[]].filter(e=>{var t;return M.qC.includes(null==e?void 0:null===(t=e.status)||void 0===t?void 0:t.state)})})(),eh=ex.length?(0,o.jsx)(ev,{inaccessibleSyncSources:ex}):void 0,{value:ef}=(0,u.FL)("sonnet_3_7_500k"),{allModelOptions:eg}=(0,y.u)();O=ef?"claude-3-7-sonnet-20250219":"claude-3-5-sonnet-20241022";let eb=null!==(c=null===(t=eg.find(e=>e.model===O))||void 0===t?void 0:t.name)&&void 0!==c?c:"Sonnet",{setStickyModelPreference:eN}=(0,b.M)(),eS=(0,eG.c)(O),eE=(null==H?void 0:H.toLowerCase())!==O.toLowerCase()&&("exceeded"===J||"will-exceed"===J)&&X.totalTokens<eS,eZ=(0,h.useCallback)(()=>{K(O),eN(O)},[K,eN,O]),eI=eE?(0,o.jsx)(eB,{switchToSonnet:eZ,modelName:eb,copyText:(0,o.jsx)("span",{children:(0,o.jsx)(_.Z,{defaultMessage:"Your message is over the <link>length limit</link>",id:"sFF+OamRk1",values:{link:e=>(0,o.jsx)("a",{className:"underline",target:"_blank",rel:"noreferrer",href:C.jC,children:e})}})})}):void 0,eA="will-exceed"===J?(0,o.jsx)(eK,{tokenTotals:X,numAttachments:B.length,projectKnowledgebaseTokens:null==W?void 0:W.projectKnowledgebaseTokens,projectUuid:V}):null,ez=X.msgTokens<eU.D?null:(0,o.jsx)(eU.w,{}),eD=(0,I.F4)(),eL=(0,w.Cf)(),eF=eD&&!eL?(0,o.jsx)(ea.A,{children:(0,o.jsxs)("div",{className:"text-danger-000 flex items-center gap-1",children:[(0,o.jsx)(S.v,{className:"h-4 w-4 shrink-0",weight:"regular"}),(0,o.jsx)("span",{children:(0,o.jsx)(_.Z,{defaultMessage:"Less accurate Google Drive search results while Claude catalogs your Drive files",id:"ljvRWwDUyf"})})]})}):void 0,eR=es(V)?(0,o.jsx)(ea.A,{children:(0,o.jsxs)("div",{className:"text-danger-000 flex items-center gap-1",children:[(0,o.jsx)(S.v,{className:"h-4 w-4 shrink-0",weight:"regular"}),(0,o.jsx)("span",{children:(0,o.jsx)(_.Z,{defaultMessage:"Project knowledge exceeds maximum. Remove files to continue.",id:"IqUMWBoy4d"})})]})}):void 0,[eP,eW]=(0,h.useState)(!1),eV=function(e){let{warningCount:t,blockInputCount:n}=(0,u.xQ)("prompt_new_conversation_count",ec,eo);return void 0!==e&&void 0!==t&&void 0!==n&&e>=t&&e<n}(null==W?void 0:W.messagesSoFar)&&!eP,eY=eV?(0,o.jsx)(ed,{onDismiss:()=>eW(!0)}):null,{systemAlertFromConfig:eq}=eT(null!==(d=null==W?void 0:W.id)&&void 0!==d?d:null),eQ=eq?eq.component:null,eJ=function(e,t,n){let{data:s=[]}=(0,eM.pK)(n),a=(0,ek.eh)(),l=[...e,...t?t.files:[],...s].filter(e=>e.file_kind===eC.Y.Blob);return!a&&l.length?(0,o.jsx)(e_,{files:l,isNewConversation:!t}):null}(q,W,V),eX=function(){let e=(0,u.Zr)("claudeai_warning_message","components",null,ej);return e?(0,o.jsx)(ey,{messageComponents:e}):null}(),e$=null!=eR?eR:null,e0=null!==(P=null!==(R=null!==(F=null!==(L=null!==(N=null!==(k=null!==(j=null!==(v=null!==(g=null!==(f=null!==(p=null!==(x=null!==(m=null!=e$?e$:$)&&void 0!==m?m:eI)&&void 0!==x?x:el)&&void 0!==p?p:er)&&void 0!==f?f:eu)&&void 0!==g?g:eh)&&void 0!==v?v:eA)&&void 0!==j?j:eJ)&&void 0!==k?k:ez)&&void 0!==N?N:eY)&&void 0!==L?L:eQ)&&void 0!==F?F:eF)&&void 0!==R?R:eX)&&void 0!==P?P:null,e1=eq&&eq.alert.proUpsell||eV,e2=!!($||eJ||eF),e5=e1?"pro":e2?"info":"danger",e3=(0,w.ZJ)(),e7=(0,w.ue)();return!e$&&en&&(e3||e7)&&(et||$)?(0,o.jsx)(ee,{messageLimit:en,defaultWarning:e0,defaultTheme:e5,placement:U}):(0,o.jsx)(D,{warning:e0,placement:U,theme:e5})};var eV=n(16282),eY=n(91887),eq=n(96070),eQ=n(95606),eJ=n(98279);let eX=e=>{let{attachments:t,files:n,syncSourceResults:s,onRemoveAttachment:a,onRemoveFile:l,onRemoveSyncSource:i,isUploadingFile:r,isUploadingSync:c}=e,d=(0,eq.b)();return(0,o.jsxs)("div",{className:(0,m.Z)(d?"flex flex-row overflow-x-auto gap-3 px-3.5 py-2.5 -my-1":"flex pb-3 pt-2.5 items-end flex-wrap gap-x-1 gap-y-2 px-4","border-border-300/25 border-t-0.5 rounded-b-2xl bg-bg-100 !p-3.5 !m-0"),children:[t.map((e,t)=>(0,o.jsx)(eV.mB,{file:e,size:"md",onRemoveFile:()=>a(t),isEditable:!0},t)),n.map((e,t)=>(0,o.jsx)(eV.mB,{file:e,showWarnings:!0,size:"md",onRemoveFile:()=>l(t),isEditable:!0},e.file_uuid)),d?(0,o.jsx)(eY.fz,{isShown:r}):(0,o.jsx)(eQ.e,{isShown:r,className:"p-0.5"}),s.map(e=>{let{syncSource:t,uuid:n}=e;return(0,o.jsx)(eJ.Q,{uuid:n,syncSource:t,size:"md",onRemove:()=>i(n),isEditable:!0},n)}),d?(0,o.jsx)(eY.fz,{isShown:c}):(0,o.jsx)(eQ.e,{isShown:c,className:"p-0.5"})]})},e$=(0,h.createContext)({setOverrideSubmit:()=>!1});var e0=n(1133),e1=n(17845),e2=n(81631),e5=n(10761),e3=n(93785),e7=n(51716),e4=n(81165),e6=n(96633),e8=n(19021),e9=n(29860),te=n.n(e9);let tt=new e5.H$("inputAutocomplete"),tn=()=>({decoration:null,completion:null}),ts=(e,t)=>e5.Y1.atEnd(e).$anchor.pos===t.$anchor.pos,ta=e=>{let{editor:t}=e;if(!ts(t.state.doc,t.state.selection))return!1;let n=tt.getState(t.state);return!!n.decoration&&(t.view.dispatch(t.state.tr.insertText(n.completion.content)),!0)},tl=(e,t,n,s)=>{let a=e.getMeta(tt);if(a&&a.prompt===s.doc.textContent&&(t.completion=a),!ts(s.doc,s.selection)||!t.completion||t.completion.prompt!==s.doc.textContent)return t.decoration=null,t;let l=document.createElement("span");l.className="text-text-500",l.textContent=t.completion.content;let i=document.createElement("span");i.className="ml-1 px-1 border rounded-lg align-[1px] font-medium text-xs text-text-500",i.textContent="Tab";let r=s.selection.$head.pos,o=e8.p.widget(r,l),c=e8.p.widget(r,i),d=e8.EH.create(s.doc,[o,c]);return t.decoration=d,t},ti=e3.hj.create({name:"inputAutocompletion",addOptions:()=>({fetchInputAutocompletion:e=>Promise.resolve("")}),addProseMirrorPlugins(){let e=te()(async(e,t)=>{try{let n=this.options.fetchInputAutocompletion,s=await n(t);s&&e.dispatch(e.state.tr.setMeta(tt,{prompt:t,content:s}))}catch(e){}},300);return[new e5.Sy({key:tt,state:{init:tn,apply:tl},props:{decorations(e){return this.getState(e).decoration}},view:t=>{let{textContent:n}=t.state.doc;return n.length>=3&&e(t,n),{update:(t,n)=>{var s;let{state:a}=t,{doc:l}=a;!n.doc.eq(l)&&(null===(s=tt.getState(a).completion)||void 0===s?void 0:s.prompt)!==l.textContent&&l.textContent.length>=3&&e(t,l.textContent)}}}})]},addKeyboardShortcuts:()=>({Tab:ta})});var tr=n(64295);let to=e=>0===e.state.selection.$from.parentOffset,tc=e=>"codeBlock"===e.state.selection.$from.parent.type.name,td=e=>e.state.selection.$from.marks().some(e=>"code"===e.type.name),tu=e=>"heading"===e.state.selection.$from.parent.type.name,tm=e=>e.state.selection.$from.marks().some(e=>"bold"===e.type.name),tx=e=>e.state.selection.$from.marks().some(e=>"italic"===e.type.name),tp=e=>e.state.selection.$from.marks().some(e=>"strike"===e.type.name),th=e=>{let t=e.state.selection.$from;return t.parentOffset===t.parent.nodeSize-2},tf=e=>{let t=e.state.tr;t.setStoredMarks([]),t.insertText("​"),e.view.dispatch(t)},tg=e=>!(e.state.selection.$from.before()>0)&&(tf(e),!0),tv=e=>!(e.state.selection.$from.after()<e.state.doc.content.size)&&(tf(e),!0),tj=e=>!(e.state.selection.$from.before()>0)&&e.chain().insertContentAt(0,"<p></p>").run(),ty=e=>!(e.state.selection.$from.after()<e.state.doc.content.size)&&e.chain().insertContent("<p></p>").run(),tb=e3.hj.create({name:"CodeBlockKeyboardNavExtension",addKeyboardShortcuts:()=>({ArrowUp:e=>{let{editor:t}=e;return!!(tc(t)&&to(t))&&tj(t)}})}),tw=e3.hj.create({name:"InlineCodeKeyboardNavExtension",addKeyboardShortcuts:()=>({ArrowUp:e=>{let{editor:t}=e;return!!(td(t)&&to(t))&&tj(t)},ArrowDown:e=>{let{editor:t}=e;return!!(td(t)&&th(t))&&ty(t)},ArrowRight:e=>{let{editor:t}=e;return!!(td(t)&&th(t))&&tv(t)},ArrowLeft:e=>{let{editor:t}=e;return!!(td(t)&&to(t))&&tg(t)}})}),tk=e3.hj.create({name:"HeadingKeyboardNavExtension",addKeyboardShortcuts:()=>({ArrowUp:e=>{let{editor:t}=e;return!!(tu(t)&&to(t))&&tj(t)},ArrowDown:e=>{let{editor:t}=e;return!!(tu(t)&&th(t))&&ty(t)}})}),tC=e3.hj.create({name:"BoldKeyboardNavExtension",addKeyboardShortcuts:()=>({ArrowRight:e=>{let{editor:t}=e;return!!(tm(t)&&th(t))&&tv(t)}})}),tM=e3.hj.create({name:"ItalicKeyboardNavExtension",addKeyboardShortcuts:()=>({ArrowRight:e=>{let{editor:t}=e;return!!(tx(t)&&th(t))&&tv(t)}})}),tN=e3.hj.create({name:"StrikeKeyboardNavExtension",addKeyboardShortcuts:()=>({ArrowRight:e=>{let{editor:t}=e;return!!(tp(t)&&th(t))&&tv(t)}})}),tS=e3.hj.create({name:"PTagShiftEnterCreateExtension",addKeyboardShortcuts:()=>({"Shift-Enter":e=>{let{editor:t}=e;return t.commands.enter(),t.commands.scrollIntoView(),!0},"Alt-Enter":e=>{let{editor:t}=e;return t.commands.enter(),t.commands.scrollIntoView(),!0}})}),t_=e3.hj.create({name:"pasteCodeAsPlainText",addProseMirrorPlugins:()=>[new e5.Sy({key:new e5.H$("pasteCodeAsPlainText"),props:{handlePaste:(e,t,n)=>{let{schema:s}=e.state;if(!t.clipboardData||!t.clipboardData.types.includes("vscode-editor-data"))return!1;let a=t.clipboardData.getData("text/plain"),l=s.text(a);return e.dispatch(e.state.tr.replaceSelectionWith(l)),!0}}})]}),tE=()=>(0,o.jsx)(e7.T5,{className:"code-block",children:(0,o.jsx)("pre",{className:"my-4 block rounded-md bg-[#282c34] p-2 text-[0.875rem] text-[#abb2bf]",children:(0,o.jsx)(e7.ms,{as:"code"})})}),tZ=e=>{let{tipTapEditorState:t,setTipTapEditorState:n,onReady:s,placeholder:a,extraEditorAttributes:l={},fetchInputAutocompletion:i}=e,r=[e4.Z.configure({codeBlock:!1,blockquote:!1,hardBreak:!1,heading:!1,horizontalRule:!1}),e1.Z.extend({addNodeView:()=>(0,e7.fW)(tE)}).configure({lowlight:e6.$}),tC,tb,tk,tw,tM,tN,t_,tS,e2.Z.configure({placeholder:a,emptyEditorClass:"is-editor-empty before:!text-text-500 before:whitespace-nowrap"}),ti.configure({fetchInputAutocompletion:i})];return{editor:(0,e7.jE)({editorProps:{attributes:{enterkeyhint:"enter",class:"break-words max-w-[60ch]",...l}},onCreate:()=>{null==s||s()},autofocus:!(0,e0.tq)()&&"end",extensions:r,content:t,onUpdate(e){let{editor:t}=e,s=t.isEmpty,a=t.getJSON();n((0,tr._B)(a)),s&&t.commands.focus("end")}})}},tI=(0,h.forwardRef)((e,t)=>{let{disabled:n,prompt:s,tipTapEditorState:a,setTipTapEditorState:l,placeholder:i,onSubmit:r,onReady:c,onFocus:d,onBlur:u,placement:x,fetchInputAutocompletion:p}=e,g=(0,f.Z)(),{editor:v}=tZ({tipTapEditorState:a,setTipTapEditorState:l,onReady:c,placeholder:i,fetchInputAutocompletion:p}),[j,y]=(0,h.useState)(!1);return(0,h.useImperativeHandle)(t,()=>({setContent(e){e!==s&&(null==v||v.commands.setContent(e,!1,{preserveWhitespace:"full"}))},setEditable(e){v.setOptions({editable:e})},focus(){null==v||v.commands.focus()},getPosition:()=>null==v?void 0:v.state.selection.$anchor,getEditor:()=>v,getIsAtEnd(){if(!v)return;let e=v.state.selection.$anchor.pos;return e5.Y1.atEnd(v.state.doc).$anchor.pos===e}}),[v,s]),(0,h.useEffect)(()=>{null==v||v.setOptions({editable:!n})},[v,n]),(0,h.useEffect)(()=>{if(null!==v&&""!==i){let e=v.extensionManager.extensions.filter(e=>"placeholder"===e.name)[0];e&&(e.options.placeholder=i,v.view.dispatch(v.state.tr))}},[v,i]),(0,o.jsx)(e$.Provider,{value:{setOverrideSubmit:y},children:(0,o.jsx)(e7.kg,{"aria-label":g.formatMessage({defaultMessage:"Write your prompt to Claude",id:"Lxn7p6AQvE"}),className:(0,m.Z)("max-h-96 w-full overflow-y-auto break-words","bottom"===x?"min-h-[1.5rem]":"min-h-[3rem]"),editor:v,onKeyDownCapture:e=>{"Enter"===e.key&&(!r||j||e.shiftKey||e.altKey||e.nativeEvent.isComposing||(0,e0.tq)()&&!e.metaKey&&!e.ctrlKey||(e.preventDefault(),r(e)))},onFocus:d,onBlur:u})})});tI.displayName="PromptInput";var tA=n(26525),tz=n(2949),tD=n(70712),tT=n(56767);let tL=()=>{let{setSyncSourceUuids:e,isAtMaxNumUploads:t,setIsUploadingDriveSync:n,prompt:s}=(0,T.r)(),a=(0,tz.Aj)(),{addError:l}=(0,O.e)(),i=(0,f.Z)(),{mutate:r}=(0,v.cE)({onMutate:()=>{n(!0)},onSuccess:t=>{e(e=>[...e,t.uuid]),n(!1)},onError:e=>{n(!1),l((0,tT.A)(e))},meta:{noToast:!0}}),{isDriveAuthenticated:c,initDriveAuth:d}=(0,tz.nC)({callerIdentifier:"chat-input",handleAuthSuccess:()=>{for(let e of s.match(/(https?:\/\/[^\s]+)/gi)||[]){let t=(0,tD.g)(e);t&&u(t,!0)}}}),u=(0,h.useCallback)(function(e){let n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(a||n){if(!c&&!n){l((0,o.jsx)("span",{children:(0,o.jsx)(_.Z,{defaultMessage:"<button>Authenticate</button> to paste link as attachment",id:"85AH1hyv0s",values:{button:e=>(0,o.jsx)("button",{className:"underline",onClick:d,children:e})}})}));return}if(t){l(i.formatMessage({defaultMessage:"You can add at most {maxUploads, plural, one {# attachment} other {# attachments}} to a message.",id:"wvnM4s8976"},{maxUploads:tA.Qe}));return}r({sync_source_type:M.Fg.GDRIVE,sync_source_config:{uri:e}})}},[a,c,t,r,d,l,i]);return u};var tF=n(87683),tR=n(5362),tP=n(45144);let tO=()=>{let{setPrompt:e,setAttachments:t,setFiles:n}=(0,T.r)(),{failedStreamRetryData:s,setFailedStreamRetryData:a}=(0,eZ.Qk)();(0,h.useEffect)(()=>{null!==s&&(e(s.prompt),t(s.attachments),n(s.files),a(null))},[s,t,a,n,e])};var tU=n(35919),tG=n.n(tU);function tH(){let e=(0,r._)(["\n  flex\n  flex-row\n  gap-2\n  justify-between\n  items-center\n  p-6\n  -mx-1\n  sm:mx-0\n  transition-all\n  focus-within:border-border-200\n  relative\n  z-[5]\n"]);return tH=function(){return e},e}function tK(e){let{onDismiss:t,projectUuid:n}=e,s=(0,el.z$)(),a=(0,ei.useRouter)();(0,h.useEffect)(()=>{s.track({event_key:"chat.conversation.too_long_prompt:loaded"})},[s]);let l=(0,h.useCallback)(()=>{s.track({event_key:"chat.conversation.too_long_prompt:accepted"}),n?a.push("/project/".concat(n)):a.push("/chats")},[s,a,n]),i=(0,h.useCallback)(()=>{s.track({event_key:"chat.conversation.too_long_prompt:dismissed"}),t()},[s,t]),r=(0,h.useRef)(null),{width:c=0}=(0,g.yU)({ref:r}),d=c<400,u=(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"flex flex-col",children:[(0,o.jsx)("p",{className:"text-sm font-medium",children:(0,o.jsx)(_.Z,{defaultMessage:"The chat is getting long.",id:"bkaK5uVbky"})}),(0,o.jsx)("p",{className:"text-xs",children:(0,o.jsx)(_.Z,{defaultMessage:"Long chats cause you to reach your usage limits faster.",id:"QsXKYzHfxO"})})]}),(0,o.jsxs)("div",{className:(0,m.Z)("flex justify-center",{"text-sm flex-col gap-2 mt-2 w-full":d,"gap-4":!d}),children:[(0,o.jsx)(k.z,{onClick:i,variant:"secondary",children:(0,o.jsx)(_.Z,{defaultMessage:"Continue chat",id:"/XpmIDW6G2"})}),(0,o.jsx)(k.z,{onClick:l,children:(0,o.jsx)(_.Z,{defaultMessage:"Start new chat",id:"KcA+xo4hhh"})})]})]});return(0,o.jsx)(tB,{ref:r,className:(0,m.Z)({"flex-col":d,"mt-6":!d}),children:u})}let tB=c.q.div(tH());var tW=n(1445),tV=n(35102),tY=n(67762);let tq=/(?:(?:https?|ftp):\/\/)?(?:www\.)?[a-zA-Z0-9-]+(?:\.[a-zA-Z]{2,})+(?:\/[^\s]*)?/i,tQ=/(?:(https?|ftp):\/\/)(?!(?:[\w-]+\.)*docs\.google\.com\/document\/d\/)(?:[\w-]+\.)+[\w-]+(?:\/[^\s]*)?/i,tJ=e=>{let{input:t}=e;return((0,tz.Aj)()?tQ:tq).test(t)?{claudeDoesNotReadInternetWarning:(0,o.jsx)(tX,{})}:{}},tX=()=>(0,o.jsx)(ea.A,{children:(0,o.jsxs)("div",{className:"flex items-center gap-1",children:[(0,o.jsx)(tY.V,{className:"h-3.5 w-3.5 shrink-0"}),(0,o.jsx)("span",{children:(0,o.jsx)("a",{href:"https://support.anthropic.com/en/articles/7996846-does-claude-have-access-to-the-internet",className:"hover:underline",target:"_blank",children:(0,o.jsx)(_.Z,{defaultMessage:"Claude cannot access links",id:"QjqTrkXwnb"})})})]})}),t$=e=>{var t,n,s,a,l;let{model:i,projectUuid:r,prompt:c,conversation:d}=e,{claudeDoesNotReadInternetWarning:u}=tJ({input:c}),{approachingMessageLimitWarning:m}=(0,ew.k)(null!==(n=null==d?void 0:d.id)&&void 0!==n?n:null),{allModelOptions:x}=(0,y.u)(),p=(0,A.nR)(r),h=(null!=p?p:0)>(null!==(s=null===(t=x.find(e=>e.model===i))||void 0===t?void 0:t.slow_kb_warning_threshold)&&void 0!==s?s:155e3)?(0,o.jsx)("div",{className:"max-md:hidden",children:(0,o.jsx)(_.Z,{defaultMessage:"Large knowledge may slow responses",id:"d6mr4c6d+8"})}):void 0,f=null!==(l=null!==(a=null!=u?u:m)&&void 0!==a?a:h)&&void 0!==l?l:void 0;return(0,o.jsx)("div",{className:"text-text-400 text-xs ml-2",children:f})};var t0=n(45033),t1=n(32737),t2=n(85689),t5=n(96346),t3=n(60983),t7=n(52165),t4=n(22235);function t6(){let e=(0,r._)(["\n  uppercase\n  mt-0.3\n  bg-accent-pro-100/10\n  text-accent-pro-000\n  rounded-full\n  px-2\n  ml-2\n  -mr-1\n  border-0.5\n  border-accent-pro-100/10\n  leading-4\n  h-4\n  text-[0.6rem]\n  font-medium\n  max-md:absolute\n  max-md:top-1.5\n  max-md:left-2\n  max-md:mt-px\n"]);return t6=function(){return e},e}function t8(){let e=(0,r._)(["\n  border-0.5\n  border-border-300\n  -mr-1\n  ml-2\n  translate-y-px\n  rounded-full\n  px-2\n  py-px\n  text-xs\n  text-text-500\n  tracking-tight\n  group-hover:bg-bg-100\n"]);return t8=function(){return e},e}let t9=c.q.div(t6()),ne=c.q.div(t8()),nt=(0,o.jsx)(_.Z,{defaultMessage:"Upgrade to Claude Pro to use our best and latest models",id:"GFsmqWxmnh"}),nn={model:"missing-model",name:"Legacy Model",description:"",inactive:!0},ns=e=>{var t;let{model:n,currentModelOption:s,opensInNewChat:a,onSelect:l,hasMultiModalContent:i,tag:r,tooltip:c}=e,d=function(){let e=(0,f.Z)();return(0,h.useMemo)(()=>({"claude-3-5-haiku-20241022":e.formatMessage({defaultMessage:"Fastest model for daily tasks",description:"A description of the AI model",id:"75wJbzj8Tm"}),"claude-3-7-sonnet-20250219":e.formatMessage({defaultMessage:"Our most intelligent model yet",description:"A description of the AI model",id:"WW0Apyq96E"})}),[e])}(),u=n.model===(null==s?void 0:s.model),x=(0,t4.g)(n.name,n.model,i);return(0,o.jsx)(t1.u,{tooltipContent:c,children:(0,o.jsxs)(t0.hP,{onClick:()=>{u||l(n)},className:(0,m.Z)("group pr-1 py-1.5"),children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)("div",{className:"flex-1 text-sm",children:(0,o.jsx)("div",{className:"flex items-center gap-1.5",children:(0,o.jsx)("div",{children:x})})}),r&&!u&&(0,o.jsx)(t9,{children:r}),!u&&a&&!r&&(0,o.jsx)(ne,{children:(0,o.jsx)(_.Z,{defaultMessage:"New chat",id:"ATDyLPIoxz"})})]}),(0,o.jsx)("div",{className:"text-text-500 pr-4 text-xs",children:null!==(t=d[n.model])&&void 0!==t?t:n.description})]}),u&&(0,o.jsx)(t2.J,{className:"text-accent-secondary-100 mb-1 mr-1.5",size:16,weight:"bold"})]})})},na=e=>{let{selectedModel:t,conversationUUID:n,onSelect:s,placement:a,hasMultiModalContent:l,paprikaMode:i,onPaprikaModeSelect:r,open:c,onOpenChange:d,isNewConversation:x,hideModelNameLogo:p}=e,f=!x,g=(0,ei.useRouter)(),{allModelOptions:v,mainModels:j,overflowModels:C}=(0,y.u)(),M=(0,eZ.wN)(n||null),N=null!=t?t:M,S=(0,h.useRef)(null),E=v.find(e=>e.model===N);E||(E=nn);let{value:Z}=(0,u.FL)("model_selector_enabled"),I=(0,w.rW)(),A=!Z&&!I,{setStickyModelPreference:z}=(0,b.M)(),[D,T]=(0,h.useState)(!1),L=()=>{g.push("/upgrade/pro")},F=e=>{if(Z){var t;!i||(null===(t=e.paprika_modes)||void 0===t?void 0:t.includes(i))||null==r||r(void 0),z(e.model),s(e)}},R=e=>e.map(e=>(0,o.jsx)(ns,{model:e,currentModelOption:E,opensInNewChat:f,onSelect:A?L:F,hasMultiModalContent:l,tag:A&&e.model!==(null==E?void 0:E.model)?"PRO":void 0,tooltip:A&&e.model!==(null==E?void 0:E.model)?nt:void 0},e.model));return(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)(t0.Lt,{className:(0,m.Z)("!min-w-[17rem] relative"),..."bottom"===a?{side:"top",sideOffset:4}:{side:"bottom",sideOffset:4},align:"end",unstyledTrigger:!0,onCloseAutoFocus:e=>e.preventDefault(),open:c,onOpenChange:e=>{d&&d(e),e||T(!1)},trigger:(0,o.jsx)("div",{className:"overflow-hidden shrink-0 p-1 -m-1",children:(0,o.jsxs)(k.z,{ref:S,variant:"unstyled",size:"unset","data-testid":"model-selector-dropdown",className:(0,m.Z)("h-7 border-0.5 text-text-100 ml-1.5 inline-flex items-start gap-[0.175em] rounded-md border-transparent text-sm opacity-80 transition hover:opacity-100 disabled:!opacity-80 sm:ml-0 sm:pb-1 sm:pl-1.5 sm:pr-1 sm:pt-1 hover:bg-bg-100 hover:border-border-400"),children:[(0,o.jsx)(t7.u,{model:E,hasMultiModalContent:l,paprikaMode:i,hideModelNameLogo:p}),(0,o.jsx)(t5.p,{size:12,className:"text-text-500 shrink-0"})]})}),children:[R(j),C.length>0&&((0,e0.tq)()?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t0.u2,{}),(0,o.jsx)("div",{className:"text-xs text-text-500 pt-2 pb-1 px-2",children:(0,o.jsx)(_.Z,{defaultMessage:"More models",id:"9yxvA9+l6B"})}),R(C)]}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t0.u2,{}),(0,o.jsxs)(t0.Vy,{children:[(0,o.jsxs)(t0.WR,{className:"pl-2 py-1.5 gap-2",children:[(0,o.jsx)("div",{className:"group-hover:text-text-100  text-sm",children:(0,o.jsx)(_.Z,{defaultMessage:"More models",id:"9yxvA9+l6B"})}),(0,o.jsx)(t3.T,{className:"text-text-500 group-hover:text-text-300 mr-1",size:16})]}),(0,o.jsx)(t0.nI,{children:(0,o.jsx)(t0.A2,{sideOffset:4,children:R(C)})})]})]}))]})})};var nl=n(94872),ni=n(15595),nr=n(25075),no=n(12403);let nc=e=>{let{prompt:t,files:n,attachments:s,syncSourceUuids:a,conversation:l,onSend:i,onStop:r,isSending:c,isDisabled:d,disabledReason:u}=e,m=(null==l?void 0:l.isStoppingSampling)===!0&&(null==l?void 0:l.isSampling)===!0?"stopping":(null==l?void 0:l.isSampling)===!0?"sampling":t.length>0||n.length>0||s.length>0||a.length>0?"drafting":"empty";return(0,o.jsx)(x.M,{children:"sampling"===m||"stopping"===m?(0,o.jsx)(nd,{onStop:r,isLoading:"stopping"===m},"stop"):(0,o.jsx)(nu,{isSending:c,isDisabled:d,disabledReason:u,onSend:i},"send")})},nd=e=>{let{onStop:t,isLoading:n}=e,s=(0,f.Z)();return(0,h.useEffect)(()=>{let e=e=>{"Escape"!==e.key||n||t()};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}},[t,n]),(0,o.jsx)(t1.u,{tooltipContent:(0,o.jsxs)("div",{className:"inline-flex items-center justify-center gap-1",children:[(0,o.jsx)(_.Z,{defaultMessage:"Stop Claude response",id:"BonFmr6O3r"}),(0,o.jsx)("div",{className:"border-border-200 rounded-md border px-0.5 py-px text-center font-mono",children:(0,o.jsx)(_.Z,{defaultMessage:"ESC",description:"The escape key",id:"xoF0kR5Fua"})})]}),children:(0,o.jsx)(k.z,{variant:"secondary",size:"icon_sm",className:"!rounded-lg",onClick:()=>t(),"aria-label":s.formatMessage({defaultMessage:"Stop response",id:"RANC4/S/j1"}),children:n?(0,o.jsx)(ni.U,{className:"animate-spin",size:18}):(0,o.jsx)(nr.P,{weight:"bold",size:16})})})},nu=e=>{let{isSending:t,isDisabled:n,disabledReason:s,onSend:a}=e,l=(0,f.Z)(),i=(0,h.useCallback)(()=>{(0,nl.bq)("event","msg_sent",{location:"chat_input"}),a()},[a]);return(0,o.jsx)(p.E.div,{initial:{scale:.3,opacity:0},animate:{scale:1,opacity:1,transition:{delay:.15,scale:{type:"spring",stiffness:600,damping:30},opacity:{duration:.1}}},children:(0,o.jsx)(t1.u,{tooltipContent:s,children:(0,o.jsx)("div",{children:(0,o.jsx)(k.z,{variant:"flat",size:"icon_sm",className:"!rounded-lg !h-8 !w-8",disabled:n,onClick:()=>i(),"aria-label":l.formatMessage({defaultMessage:"Send message",id:"Xx0WZVz8QS"}),children:t?(0,o.jsx)(ni.U,{className:"animate-spin",weight:"bold",size:16}):(0,o.jsx)(no.a,{weight:"bold",size:16})})})})})};var nm=n(4801),nx=n(98649),np=n(87801),nh=n(9677),nf=n(7992),ng=n(39727);let nv=e=>{let{count:t}=e;return(0,o.jsx)("span",{className:"w-[1.125rem] h-[1.125rem] border-border-300 border-0.5 flex items-center justify-center text-[0.625rem] font-medium bg-accent-secondary-100/[8%] text-accent-secondary-100 rounded-full",children:t})};function nj(){let e=(0,r._)(["\n  flex \n  flex-row \n  items-center \n  flex-1 \n  min-w-28\n"]);return nj=function(){return e},e}function ny(){let e=(0,r._)(["\n  flex \n  flex-col  \n  flex-1 \n  min-w-0\n"]);return ny=function(){return e},e}function nb(){let e=(0,r._)(["\n  text-[0.75rem]\n  text-text-500\n  text-ellipsis \n  break-words \n  whitespace-nowrap \n  min-w-0\n  overflow-hidden\n"]);return nb=function(){return e},e}let nw=e=>{let{item:t,onClick:n,isSelected:s,isHighlighted:a,onMouseOver:l}=e,i=a&&!(0,e0.r3)(),r={disabled:t.isDisabled,onClick:t.isDisabled?void 0:n,onMouseOver:l},c=t.isDisabled||"pro"===t.tag||"new chat"===t.tag;return"subheader"===t.type?(0,o.jsx)(nk,{tooltip:t.tooltip,tooltipImage:t.tooltipImage,children:(0,o.jsx)(nC,{...r,children:(0,o.jsx)(n_,{children:t.label})})}):"button"===t.type?(0,o.jsx)(nk,{tooltip:t.tooltip,tooltipImage:t.tooltipImage,children:(0,o.jsxs)(nC,{className:(0,m.Z)("primary"===t.variant&&"justify-center pr-4","primary"===t.variant&&i&&"!bg-accent-secondary-900/50 !text-accent-secondary-100"),isHighlighted:i,...r,children:[(0,o.jsx)(nM,{appearsDisabled:c,isHighlighted:i,itemKey:t.key,children:t.icon}),(0,o.jsxs)(nN,{children:[(0,o.jsx)(nE,{isHighlighted:i,appearsDisabled:c,children:t.label}),(0,o.jsx)(nA,{tag:t.tag})]}),(0,o.jsx)(nI,{className:"!text-text-500 opacity-70",children:t.secondaryText}),t.isExternal&&(0,o.jsx)(nf.O,{size:16,className:"text-text-500 opacity-70"})]})}):"buttonGroup"===t.type?(0,o.jsx)(nk,{tooltip:t.tooltip,tooltipImage:t.tooltipImage,children:(0,o.jsxs)(nC,{...r,isHighlighted:i,children:[(0,o.jsx)(nM,{appearsDisabled:c,isHighlighted:i,itemKey:t.key,children:t.icon}),(0,o.jsxs)(nN,{children:[(0,o.jsx)(nE,{isHighlighted:i,appearsDisabled:c,children:t.label}),(0,o.jsx)(nA,{tag:t.tag})]}),(0,o.jsx)(t3.T,{className:"h-4 w-4 text-text-500 opacity-80"})]})}):"toggleGroup"===t.type?(0,o.jsx)(nk,{tooltip:t.tooltip,tooltipImage:t.tooltipImage,children:(0,o.jsxs)(nC,{...r,isHighlighted:i,children:[(0,o.jsx)(nM,{appearsDisabled:c,isHighlighted:i,itemKey:t.key,children:t.icon}),(0,o.jsxs)(nN,{children:[(0,o.jsx)(nE,{isHighlighted:i,appearsDisabled:c,children:t.label}),(0,o.jsx)(nA,{tag:t.tag})]}),t.enabledCount>0&&(0,o.jsx)(nv,{count:t.enabledCount}),(0,o.jsx)(t3.T,{className:"h-4 w-4 text-text-500 opacity-80"})]})}):"optionGroup"===t.type?(0,o.jsx)(nk,{tooltip:t.tooltip,tooltipImage:t.tooltipImage,children:(0,o.jsxs)(nC,{...r,isHighlighted:i,children:[(0,o.jsx)(nM,{appearsDisabled:c,isHighlighted:i,itemKey:t.key,children:t.icon}),(0,o.jsxs)(nN,{children:[(0,o.jsx)(nE,{isHighlighted:i,appearsDisabled:c,children:t.label}),(0,o.jsx)(nA,{tag:t.tag})]}),(0,o.jsx)(nI,{children:t.secondaryText}),(0,o.jsx)(t3.T,{className:"h-4 w-4 text-text-500 opacity-80"})]})}):"toggle"===t.type||"switch"===t.type||"option"===t.type?(0,o.jsx)(nk,{tooltip:t.tooltip,tooltipImage:t.tooltipImage,children:(0,o.jsxs)(nC,{...r,hasSubtitle:!!t.subtitle,className:(0,m.Z)("active:!scale-100",s&&"text-primary-500"),isHighlighted:i,children:[(0,o.jsx)(nM,{appearsDisabled:c,isHighlighted:i,itemKey:t.key,children:t.icon}),(0,o.jsxs)(nS,{children:[(0,o.jsxs)(nN,{children:[(0,o.jsx)(nE,{isHighlighted:i,appearsDisabled:c,children:t.label}),(0,o.jsx)(nz,{tag:t.timeTag}),(0,o.jsx)(nA,{tag:t.tag})]}),(0,o.jsx)(nZ,{children:t.subtitle})]}),"toggle"===t.type&&(0,o.jsx)(q.XZ,{checked:s,label:"",hideLabel:!0,className:(0,m.Z)("!-mt-1",c&&"opacity-50",t.isDisabled&&"!cursor-default")}),"switch"===t.type&&(0,o.jsx)(nh.Z,{readOnly:!0,height:16,width:28,checked:t.isChecked,className:(0,m.Z)(!t.isDisabled&&"!cursor-pointer",c&&"opacity-50")}),"option"===t.type&&s&&(0,o.jsx)(t2.J,{weight:"bold",size:16,className:"text-accent-secondary-100 shrink-0"})]})}):"divider"===t.type?(0,o.jsx)("div",{className:"h-[0.5px] my-1.5 mx-0.5 bg-border-300"}):"back"===t.type?(0,o.jsx)(nk,{tooltip:t.tooltip,tooltipImage:t.tooltipImage,children:(0,o.jsxs)(nC,{...r,isHighlighted:i,children:[(0,o.jsx)(nM,{itemKey:t.key,children:(0,o.jsx)(ng.X,{size:16,className:(0,m.Z)("h-4 w-4 text-text-500 group-hover:!text-text-400",i&&"!text-text-400")})}),(0,o.jsx)("span",{className:"relative",children:(0,o.jsxs)(nN,{children:[(0,o.jsx)(nE,{className:(0,m.Z)("opacity-100 transition-opacity text-text-500 group-hover:!text-text-400",i&&"!text-text-400"),children:t.label}),(0,o.jsx)(nA,{tag:t.tag})]})})]})}):null},nk=e=>{let{tooltip:t,tooltipImage:n,children:s}=e;n&&(new Image().src=n);let a=(0,o.jsx)("div",{className:"",children:s});return t?(0,o.jsx)(t1.u,{sideOffset:10,contentStyle:n?"sampleImage":"inputMenu",tooltipContent:(0,o.jsxs)("div",{className:"flex flex-col gap-1",children:[!!n&&(0,o.jsx)("img",{src:n,alt:"",className:"rounded-[6px] overflow-hidden w-[12.5rem]"}),(0,o.jsx)("p",{className:"p-1",children:t})]}),side:"right",children:a}):a},nC=e=>{let{isHighlighted:t,className:n,hasSubtitle:s,...a}=e;return(0,o.jsx)("button",{...a,className:(0,m.Z)("group flex w-full items-center text-left gap-2.5 py-auto px-1.5 text-[0.875rem] text-text-200 rounded-md transition-colors select-none",t&&!a.disabled&&"!bg-bg-200/50 !text-text-000",n,!a.disabled&&"active:scale-[0.995] hover:bg-bg-200/50 hover:text-text-000",s?"h-[3rem]":"h-[2rem]")})},nM=e=>{let{appearsDisabled:t,isHighlighted:n,itemKey:s,children:a,...l}=e;return(0,o.jsx)("div",{className:(0,m.Z)("group/icon min-w-4 min-h-4 flex items-center justify-center text-text-300 shrink-0",t&&"opacity-50",n&&!t&&"!text-text-100",!t&&"group-hover:text-text-100"),...l,children:a})},nN=c.q.div(nj()),nS=c.q.div(ny()),n_=e=>{let{className:t,...n}=e;return(0,o.jsx)("p",{...n,className:(0,m.Z)("text-[0.8125rem] text-text-500 text-ellipsis break-words whitespace-nowrap min-w-0 overflow-hidden",t)})},nE=e=>{let{appearsDisabled:t,isHighlighted:n,className:s,...a}=e;return(0,o.jsx)("p",{...a,className:(0,m.Z)("text-[0.9375rem] text-text-300 text-ellipsis break-words whitespace-nowrap min-w-0 overflow-hidden",n&&!t&&"!text-text-100",s,t&&"opacity-50",!t&&"group-hover:text-text-100")})},nZ=c.q.p(nb()),nI=e=>{let{className:t,...n}=e;return n.children?(0,o.jsx)("p",{...n,className:(0,m.Z)("flex-initial text-right shrink text-[0.875rem] text-accent-secondary-100 text-ellipsis break-words whitespace-nowrap min-w-0 overflow-hidden",t)}):null},nA=e=>{let{tag:t,className:n}=e;return t?(0,o.jsx)("div",{className:(0,m.Z)("uppercase inline-flex items-center text-[0.5625rem] font-medium h-4 px-2 rounded-2xl ml-2.5 relative top-[1px] shrink-0",("pro"===t||"new chat"===t)&&"text-text-300 bg-bg-300/60","beta"===t&&"text-accent-secondary-100 bg-accent-secondary-100/[8%]",n),children:t}):null},nz=e=>{let{tag:t,className:n}=e;return t?(0,o.jsx)("div",{className:(0,m.Z)("text-text-500 bg-bg-100 inline-flex items-center text-[0.5625rem] h-4 px-2 rounded-2xl ml-2.5 relative top-[1px] shrink-0",n),children:t}):null},nD=h.forwardRef(e=>{let{indicatorActive:t,disabled:n,text:s,tag:a,buttonClassName:l,tooltip:i,hideIndicatorText:r,icon:c,showRemoveIcon:d,showCaretIcon:u,...x}=e,h=(0,o.jsx)(p.E.div,{layout:!0,className:(0,m.Z)("flex",s?"shrink min-w-8":"shrink-0"),initial:{opacity:0,scale:.6},animate:{opacity:1,scale:1},transition:{type:"spring",stiffness:700,damping:32,mass:.7},children:(0,o.jsxs)(k.z,{variant:"unstyled",size:"unset",className:(0,m.Z)("border-0.5 transition-all h-8 min-w-8 rounded-lg flex items-center px-[7.5px] group !pointer-events-auto",t?"text-accent-secondary-100 bg-accent-secondary-100/[8%] border-accent-secondary-200/20":"text-text-300 border-border-300",!n&&(t?"active:scale-[0.98] hover:text-accent-secondary-000 hover:bg-accent-secondary-100/[12%]":"active:scale-[0.98] hover:text-text-200/90 hover:bg-bg-100"),l),disabled:n,...x,children:[c,!!s&&!r&&(0,o.jsxs)("div",{className:"min-w-0 flex items-center",children:[(0,o.jsx)("p",{className:"min-w-0 pl-1 text-xs tracking-tight text-ellipsis whitespace-nowrap break-words overflow-hidden shrink",children:s}),!!a&&(0,o.jsx)(nA,{tag:a,className:"!top-0 !ml-1"})]}),u&&(0,o.jsx)(t5.p,{size:12,className:"ml-1 opacity-70"}),!n&&d&&(0,o.jsx)("div",{className:"shrink-0 duration-100 w-3 opacity-70 transition-all ml-0 ml-1",children:(0,o.jsx)(eA.X,{size:12})})]})});return(0,o.jsx)(o.Fragment,{children:i?(0,o.jsx)(t1.u,{tooltipContent:i,disableHoverableContent:!0,side:"bottom",align:"center",children:h}):h})});nD.displayName="InputMenuButton";var nT=n(32006),nL=n(30131),nF=n(19132),nR=n(46200),nP=n(40051);let nO="inputMenu",nU=e=>{let{actions:t}=e,{conversation:n,model:s}=(0,T.r)(),a=(0,eZ.wN)((null==n?void 0:n.id)||null),l=null!=s?s:a,i=nG({actions:t,currentModel:l}),{mcpOptions:r}=nQ(),o=nV({actions:t}),c=nY({actions:t}),d=nq({actions:t,currentModel:l});return(0,w.rW)()?[...i,...i.length?[{key:"divider1",type:"divider",label:""}]:[],...c?[c]:[],...d?[d]:[],...r.length?[{key:"divider2",type:"divider",label:""},...r]:[]]:o},nG=e=>{let{actions:t,currentModel:n}=e,s=nH({actions:t,currentModel:n}),a=nK({actions:t}),l=nW({actions:t}),i=nB({actions:t});return[...s?[s]:[],...a?[a]:[],...l?[l]:[],...i?[i]:[]]},nH=e=>{let{actions:t,currentModel:n}=e,s=(0,f.Z)(),{conversation:a}=(0,T.r)(),l=(0,nR.j9)(n),i=(0,nR.uH)(),r=(0,nR.FD)(),c=(0,nR.qS)(a);if(!i)return null;let d=c&&l;return{key:"webSearch",type:"switch",label:s.formatMessage({defaultMessage:"Web search",id:"x0W7xxxEcv"}),icon:(0,o.jsx)(nm.TH,{size:18,className:"-m-[1px]"}),isChecked:d,onClick:()=>t.onToggleConvoAndAccountSetting({enabled_web_search:!d}),tag:"beta",...r?l?null:{isDisabled:!0,tooltip:s.formatMessage({defaultMessage:"Switch to Sonnet 3.7 to use this feature",id:"2IxQ5WRzA1"})}:{isDisabled:!0,tooltip:s.formatMessage({defaultMessage:"This feature has been disabled by your administrator.",id:"Jpvq2WYysx"})}}},nK=e=>{let{actions:t}=e,n=(0,f.Z)(),{conversation:s}=(0,T.r)(),a=(0,tz.ez)(),l=(0,tz.EU)(s),{isDriveAuthenticated:i,initDriveAuth:r}=(0,tz.nC)({callerIdentifier:nO,handleAuthSuccess:()=>{t.onToggleConvoAndAccountSetting({enabled_bananagrams:!0})}});if(!a)return null;let c={key:"driveSearch",icon:(0,o.jsx)(nT.k6,{size:16}),label:n.formatMessage({defaultMessage:"{drive} search",id:"nUykp097rV"},{drive:"Drive"})};if(!i)return{...c,type:"button",isExternal:!0,secondaryText:n.formatMessage({defaultMessage:"Connect",id:"+vVZ/G11Zg"}),onClick:r};let d=i&&l;return{...c,type:"switch",isChecked:d,onClick:()=>{t.onToggleConvoAndAccountSetting({enabled_bananagrams:!d})}}},nB=e=>{let{actions:t}=e,n=(0,f.Z)(),{conversation:s}=(0,T.r)(),a=(0,nF.te)(M.Fg.GCAL),l=(0,nF.j5)(M.Fg.GCAL,s),{isAuthenticated:i,startAuth:r}=(0,nF.QD)(M.Fg.GCAL,{callerIdentifier:nO,handleAuthSuccess:()=>{t.onToggleConvoAndAccountSetting({enabled_foccacia:!0})}});if(!a)return null;let c={key:"gcal",label:n.formatMessage({defaultMessage:"Calendar search",id:"b7aUhdL5nd"}),icon:(0,o.jsx)(nT.tB,{size:16})};if(!i)return{...c,type:"button",isExternal:!0,secondaryText:n.formatMessage({defaultMessage:"Connect",id:"+vVZ/G11Zg"}),onClick:r};let d=i&&l;return{...c,type:"switch",isChecked:d,onClick:()=>{t.onToggleConvoAndAccountSetting({enabled_foccacia:!d})},tag:"beta"}},nW=e=>{let{actions:t}=e,n=(0,f.Z)(),{conversation:s}=(0,T.r)(),a=(0,nF.te)(M.Fg.GMAIL),l=(0,nF.j5)(M.Fg.GMAIL,s),{isAuthenticated:i}=(0,nF.QD)(M.Fg.GMAIL,{callerIdentifier:nO,handleAuthSuccess:()=>{t.onToggleConvoAndAccountSetting({enabled_sourdough:!0})}});if(!a)return null;let r={key:"gmail",label:n.formatMessage({defaultMessage:"Gmail search",id:"v0qteoUCm+"}),icon:(0,o.jsx)(nT.W9,{size:16})};if(!i)return{...r,type:"button",isExternal:!0,secondaryText:n.formatMessage({defaultMessage:"Connect",id:"+vVZ/G11Zg"}),onClick:()=>{t.openGmailAuthModal()}};let c=i&&l;return{...r,type:"switch",isChecked:c,onClick:()=>{t.onToggleConvoAndAccountSetting({enabled_sourdough:!c})},tag:"beta"}},nV=e=>{let{actions:t}=e,n=(0,f.Z)(),{personalizedStyle:s}=(0,T.r)(),{personalizedStyleOptions:a}=(0,nP.O)();return[...a.map(e=>{let n=(null==s?void 0:s.key)===e.key;return{key:e.key,type:"option",label:e.name,icon:(0,o.jsx)(nm.z0,{size:18,className:"-m-[1px]"}),onClick:()=>{n?t.onStyleChange("Default"):t.onStyleChange(e.key)},isChecked:n}}),{key:"divider1",type:"divider",label:""},{key:"add",type:"button",variant:"primary",icon:(0,o.jsx)(nm.v3,{size:18,className:"-m-[1px]"}),label:n.formatMessage({defaultMessage:"Create & edit styles",id:"cY+Fgc8HvE"}),onClick:t.openStyleModal}]},nY=e=>{let{actions:t}=e,n=(0,f.Z)(),{personalizedStyle:s}=(0,T.r)(),a=nV({actions:t}),l=n.formatMessage({defaultMessage:"Use style",id:"f7VY0ldE+0"});return{key:nx.Mm.STYLES,type:"optionGroup",icon:(0,o.jsx)(nm.z0,{size:18,className:"-m-[1px]"}),label:l,secondaryText:(null==s?void 0:s.isDefault)?void 0:null==s?void 0:s.name,children:[{type:"back",key:"styles-back",label:l},...a],indicatorActive:s&&"Default"!==s.key}},nq=e=>{var t;let{actions:n,currentModel:s}=e,a=(0,f.Z)(),{paprikaMode:l,isNewConversation:i}=(0,T.r)(),{allModelOptions:r}=(0,y.u)(),c=r.find(e=>e.model===s),d=(0,nL.lE)(),m=a.formatMessage({defaultMessage:"Switch to Sonnet 3.7 to use this feature",id:"2IxQ5WRzA1"}),x=a.formatMessage({defaultMessage:"Allow Claude to think out loud for longer for trickier questions and challenges.",id:"bbgQqH7Grg"}),{value:p}=(0,u.FL)("model_selector_enabled"),h=(0,w.rW)(),g=!(null==c?void 0:null===(t=c.paprika_modes)||void 0===t?void 0:t.includes("extended"));if(!d.length||!h||!p)return null;let v={key:nx.Mm.EXTENDED_THINKING,type:"switch",label:a.formatMessage({defaultMessage:"Extended thinking",id:"5j4WakKa2u"}),icon:(0,o.jsx)(nm.U,{size:18,className:"-m-[1px]"}),isChecked:"extended"===l,indicatorActive:"extended"===l,menuItemHidden:!i};return g?{...v,tooltip:m,isDisabled:!0}:{...v,onClick:()=>{n.onTogglePaprika("extended"===l?"default":"extended")},tooltip:x,tooltipImage:"/images/feature-preview/extended-thinking.png"}},nQ=()=>{let e=[],t=e.filter(e=>"toggle"===e.type&&e.isChecked).length;return{mcpOptions:e,numMcpOptionsEnabled:t}};var nJ=n(88755),nX=n(32559),n$=n(89111),n0=n(95586);let n1=e=>{let{actions:t,inputMenuIsOpen:n}=e,s=(0,f.Z)(),a=n2({actions:t}),l=n7({actions:t}),i=n3({actions:t,inputMenuIsOpen:n}),r=n5({actions:t,inputMenuIsOpen:n});return[{key:nx.Mm.UPLOAD,type:"button",icon:(0,o.jsx)(nm.Pg,{size:18,className:"-m-[1px]"}),label:s.formatMessage({defaultMessage:"Upload a file",id:"Zc9xq9TzDD"}),onClick:t.onUpload},...a?[a]:[],...l?[l]:[],...i?[i]:[],...r?[{key:"divider1",type:"divider",label:""},r]:[]]},n2=e=>{let{actions:t}=e,n=(0,f.Z)();return(0,nJ.Q)()||(0,e0.r3)()?null:{key:nx.Mm.ADD_SCREENSHOT,type:"button",icon:(0,o.jsx)(nm.V1,{size:18,className:"-m-[1px]"}),label:n.formatMessage({defaultMessage:"Take a screenshot",id:"aTaOpCB71M"}),onClick:t.onAddScreenshot}},n5=e=>{let{inputMenuIsOpen:t,actions:n}=e,s=(0,f.Z)(),a=(0,w.rW)(),{projectUuid:l,isProjectLocked:i}=(0,T.r)(),r=(0,n0.U)(),{data:c}=(0,nX.O3)({enabled:t&&r}),d=(null==c?void 0:c.slice(0,8).map(e=>({key:e.uuid,type:"option",label:e.name,onClick:()=>n.onSelectProject(e.uuid),icon:(0,o.jsx)(nm.pj,{size:18,className:"-m-[1px]"}),isChecked:e.uuid===l})))||[],u=null==c?void 0:c.find(e=>e.uuid===l);if(i||!r)return null;let m=s.formatMessage({defaultMessage:"Use a project",id:"H/dsl+Px2v"});return{key:nx.Mm.PROJECTS,type:"optionGroup",icon:(0,o.jsx)(nm.pj,{size:18,className:"-m-[1px]"}),label:m,secondaryText:null==u?void 0:u.name,children:[...a?[]:[{type:"back",key:"projects-back",label:m}],...d,{key:"divider1",type:"divider",label:""},{key:"add",type:"button",variant:"primary",icon:(0,o.jsx)(nm.v3,{size:18,className:"-m-[1px]"}),label:s.formatMessage({defaultMessage:"Start a new project",id:"0y7bg6nA29"}),onClick:()=>n.onCreateProject(!1)}],indicatorActive:!!u}},n3=e=>{let{actions:t,inputMenuIsOpen:n}=e,s=(0,f.Z)(),a=(0,w.rW)(),l=(0,tz.Aj)(),{isDriveAuthenticated:i,initDriveAuth:r}=(0,tz.nC)(),{recentDriveDocs:c,isLoading:d}=(0,tz.td)(n);if(!l)return null;let u=s.formatMessage({defaultMessage:"Add from {drive}",id:"hwJ50OkM/9"},{drive:"Google Drive"}),m={key:nx.Mm.DRIVE,icon:(0,o.jsx)(nT.j0,{type:M.Fg.GDRIVE,size:16}),label:u};if(!i)return{...m,type:"button",isExternal:!0,secondaryText:s.formatMessage({defaultMessage:"Connect",id:"+vVZ/G11Zg"}),onClick:r};let x=d?[{key:"drive-loading",type:"button",label:s.formatMessage({defaultMessage:"{drive} documents loading...",id:"PjuSZ/7RIb"},{drive:"Drive"}),isDisabled:!0}]:c.length?c.slice(0,8).map(e=>{var n;return{key:e.uri,type:"button",label:null!==(n=e.title)&&void 0!==n?n:"Untitled",icon:(0,o.jsx)(nT.j0,{type:M.Fg.GDRIVE,variant:nT.cT.DOCS,size:16}),onClick:()=>{t.createDriveSyncSource(e.uri)}}}):[{key:"empty",type:"button",label:s.formatMessage({defaultMessage:"No recent {drive} documents",id:"XepM9W1Mo/"},{drive:"Drive"}),isDisabled:!0}];return{...m,type:"buttonGroup",children:[...a?[]:[{type:"back",key:"drive-back",label:u}],...x]}},n7=e=>{let{actions:t}=e,n=(0,f.Z)();return(0,n$.H7)()?{key:nx.Mm.GITHUB,type:"button",icon:(0,o.jsx)(nT.j0,{type:M.Fg.GITHUB,size:16}),label:n.formatMessage({defaultMessage:"Add from {github}",id:"h3J3E4bRfj"},{github:"GitHub"}),onClick:t.openGithubModal}:null},n4=()=>{let e=(0,f.Z)(),{conversation:t,compassLightEnabled:n,setCompassLightEnabled:s}=(0,T.r)(),a=(0,tW.Ad)(),l=(0,tW.kk)(t),i=(0,tW.oc)(),{toggleConvoAndAccountSetting:r}=(0,eF.Bk)(null==t?void 0:t.id),c=n?"light":l?"advanced":"default";return[{key:"default",type:"option",label:(0,d.lF)({id:"green_chicken_apple",intl:e}),subtitle:e.formatMessage({defaultMessage:"Best for everyday questions",id:"b7sJ9cSxhr"}),icon:(0,o.jsx)(n6,{}),isChecked:"default"===c,onClick:()=>{"default"!==c&&(a&&r({enabled_compass:!1}),i&&s(!1))}},...i?[{key:"light",type:"option",label:a?(0,d.lF)({id:"eagle_beagle",intl:e}):(0,d.lF)({id:"pig_airpod_pond",intl:e}),subtitle:(0,d.lF)({id:"horchata_banana",intl:e}),icon:(0,o.jsx)(n8,{}),isChecked:"light"===c,onClick:()=>{n||r({enabled_compass:!1}),s(!n)},timeTag:e.formatMessage({defaultMessage:"1-2 min",id:"ub2/ah9z+0"})}]:[],...a?[{key:"advanced",type:"option",label:(0,d.lF)({id:"hungry_hippo",intl:e}),subtitle:(0,d.lF)({id:"frantic_la_croix",intl:e}),icon:(0,o.jsx)(n9,{}),isChecked:"advanced"===c,onClick:()=>{l||s(!1),r({enabled_compass:!l})},timeTag:e.formatMessage({defaultMessage:"8+ min",id:"/naiiAyGHR"})}]:[]]},n6=()=>(0,o.jsxs)("svg",{width:"26",height:"26",viewBox:"0 0 26 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.jsx)("path",{d:"M4 0.25H22C24.0711 0.25 25.75 1.92893 25.75 4V22C25.75 24.0711 24.0711 25.75 22 25.75H4C1.92893 25.75 0.25 24.0711 0.25 22V4C0.25 1.92893 1.92893 0.25 4 0.25Z",stroke:"hsl(var(--border-400))",strokeOpacity:"0.15",strokeWidth:"0.5"}),(0,o.jsx)("rect",{x:"8",y:"10",width:"9",height:"1",rx:"0.5",fill:"#E8E6DC"}),(0,o.jsx)("rect",{x:"8",y:"12.5",width:"9",height:"1",rx:"0.5",fill:"#E8E6DC"}),(0,o.jsx)("rect",{x:"8",y:"15",width:"6.5",height:"1",rx:"0.5",fill:"#E8E6DC"})]}),n8=()=>(0,o.jsxs)("svg",{width:"26",height:"26",viewBox:"0 0 26 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.jsx)("rect",{x:"0.25",y:"0.25",width:"25.5",height:"25.5",rx:"3.75",stroke:"hsl(var(--border-400))",strokeOpacity:"0.15",strokeWidth:"0.5"}),(0,o.jsx)("rect",{x:"6",y:"5.5",width:"14.5",height:"1",rx:"0.5",fill:"#E8E6DC"}),(0,o.jsx)("rect",{x:"6",y:"16.5",width:"14.5",height:"1",rx:"0.5",fill:"#E8E6DC"}),(0,o.jsx)("rect",{x:"6",y:"8.5",width:"10.3571",height:"1",rx:"0.5",fill:"#E8E6DC"}),(0,o.jsx)("rect",{x:"6",y:"19.5",width:"12.4286",height:"1",rx:"0.5",fill:"#E8E6DC"}),(0,o.jsx)("circle",{cx:"7.5",cy:"13",r:"1.5",fill:"#D1CFC5"}),(0,o.jsx)("circle",{cx:"11.5",cy:"13",r:"1.5",fill:"#D1CFC5"}),(0,o.jsx)("circle",{cx:"15.5",cy:"13",r:"1.5",fill:"#D1CFC5"})]}),n9=()=>(0,o.jsxs)("svg",{width:"26",height:"26",viewBox:"0 0 26 26",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,o.jsxs)("g",{"clip-path":"url(#clip0_131_534)",children:[(0,o.jsx)("g",{filter:"url(#filter0_d_131_534)",children:(0,o.jsx)("rect",{x:"5.25",y:"5.25",width:"25.5",height:"31.5",rx:"1.75",stroke:"hsl(var(--border-400))",strokeOpacity:"0.15",strokeWidth:"0.5"})}),(0,o.jsx)("rect",{x:"7.25116",y:"7.25",width:"25.5",height:"31.5",rx:"1.55",stroke:"hsl(var(--border-400))",strokeOpacity:"0.15",strokeWidth:"0.5"}),(0,o.jsx)("rect",{x:"9.25",y:"9.25",width:"25.5",height:"31.5",rx:"1.35",stroke:"hsl(var(--border-400))",strokeOpacity:"0.15",strokeWidth:"0.5"}),(0,o.jsx)("rect",{x:"12",y:"13",width:"14",height:"1",rx:"0.5",fill:"#E8E6DC"}),(0,o.jsx)("rect",{x:"12",y:"16",width:"15",height:"1",rx:"0.5",fill:"#E8E6DC"}),(0,o.jsx)("rect",{x:"12",y:"19",width:"12",height:"1",rx:"0.5",fill:"#E8E6DC"})]}),(0,o.jsx)("rect",{x:"0.25",y:"0.25",width:"25.5",height:"25.5",rx:"3.75",stroke:"hsl(var(--border-400))",strokeOpacity:"0.15",strokeWidth:"0.5"}),(0,o.jsxs)("defs",{children:[(0,o.jsxs)("filter",{id:"filter0_d_131_534",x:"3",y:"4",width:"30",height:"36",filterUnits:"userSpaceOnUse","color-interpolation-filters":"sRGB",children:[(0,o.jsx)("feFlood",{"flood-opacity":"0",result:"BackgroundImageFix"}),(0,o.jsx)("feColorMatrix",{in:"SourceAlpha",type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0",result:"hardAlpha"}),(0,o.jsx)("feOffset",{dy:"1"}),(0,o.jsx)("feGaussianBlur",{stdDeviation:"1"}),(0,o.jsx)("feComposite",{in2:"hardAlpha",operator:"out"}),(0,o.jsx)("feColorMatrix",{type:"matrix",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.05 0"}),(0,o.jsx)("feBlend",{mode:"normal",in2:"BackgroundImageFix",result:"effect1_dropShadow_131_534"}),(0,o.jsx)("feBlend",{mode:"normal",in:"SourceGraphic",in2:"effect1_dropShadow_131_534",result:"shape"})]}),(0,o.jsx)("clipPath",{id:"clip0_131_534",children:(0,o.jsx)("rect",{width:"26",height:"26",rx:"4",fill:"white"})})]})]});async function se(e){let t;let n="CaptureController"in window?new CaptureController:null;null==n||n.setFocusBehavior("no-focus-change");try{t=await navigator.mediaDevices.getDisplayMedia({video:!0,controller:n})}catch(e){if(e instanceof DOMException&&"NotAllowedError"===e.name)return null;throw e}let s=document.createElement("video");s.srcObject=t,await new Promise((e,t)=>{s.onloadedmetadata=()=>{s.play().then(e,t)}});let a=document.createElement("canvas");if(e){let t=Math.min(e.width/Math.min(s.videoWidth,e.width),e.height/Math.min(s.videoHeight,e.height));a.width=s.videoWidth*t,a.height=s.videoHeight*t}else a.width=s.videoWidth,a.height=s.videoHeight;let l=a.getContext("2d");if(!l)throw Error("Could not create 2D context");l.drawImage(s,0,0,a.width,a.height);let i=a.toDataURL("image/png");return t.getTracks().forEach(e=>e.stop()),{imageDataUrl:i}}function st(e){return"default"===e.type?e.key:e.uuid}(s=l||(l={})).CREATE="create",s.CREATE_MANUALLY="create_manually",s.LIST="list",s.EDIT="edit";let sn=e=>{let{setStyleModalOpenWithScreen:t,setCreateProjectModalIsOpen:n,setGithubModalIsOpen:s,setGmailAuthModalIsOpen:a}=e,{conversation:i}=(0,T.r)(),r=si(),o=so(),c=sl(),{openFeaturePreviewModal:d}=(0,eN.h9)(),{checkIsGithubAuthenticated:u,initGithubAuth:m}=(0,n$.Yn)(),{initDriveAuth:x}=(0,tz.nC)(),{toggleConvoAndAccountSetting:p}=(0,eF.Bk)(null==i?void 0:i.id),h=sr();return{onUpload:sa,onAddScreenshot:()=>{r()},openGithubModal:()=>{u().then(e=>{if(!e){m();return}s(!0)})},openGmailAuthModal:()=>{a(!0)},initDriveAuth:x,createDriveSyncSource:ss(),onToggleConvoAndAccountSetting:p,onTogglePaprika:h,onStyleChange:e=>{o(e)},openStyleModal:()=>{t(l.LIST)},onSelectProject:c,onCreateProject:e=>{n({isOpen:!0,moveAttachments:e})},openFeaturePreviewModal:d}},ss=()=>{let{addError:e}=(0,O.e)(),{setIsUploadingDriveSync:t,setSyncSourceUuids:n}=(0,T.r)(),{mutate:s}=(0,v.cE)({onMutate:()=>{t(!0)},onSuccess:e=>{t(!1),n(t=>[...t,e.uuid])},onError:n=>{t(!1),e((0,tT.A)(n))},meta:{noToast:!0}});return e=>s({sync_source_type:M.Fg.GDRIVE,sync_source_config:{uri:e}})},sa=()=>{var e;null===(e=document.getElementById("chat-input-file-upload"))||void 0===e||e.click()},sl=()=>{let{projectUuid:e,setProjectUuid:t}=(0,T.r)();return n=>{e===n?t(void 0):t(n)}},si=()=>{let{addError:e}=(0,O.e)(),t=(0,f.Z)(),{handleUpload:n}=(0,T.r)();return async()=>{let s=null;try{s=await se({width:1568,height:1568})}catch(n){(0,tP.Tb)(n),e(t.formatMessage({defaultMessage:"Could not capture screen",id:"GT8HkzCHoM"}))}if(!s)return;let a=new File([await fetch(s.imageDataUrl).then(e=>e.blob())],"screenshot.png",{type:"image/png"});await n([a])}},sr=()=>{let{setPaprikaMode:e}=(0,T.r)();return t=>{e("extended"===t?"extended":void 0)}},so=()=>{let{setPersonalizedStyle:e}=(0,T.r)(),t=(0,el.z$)(),{personalizedStyleOptions:n,setStoredStyle:s}=(0,nP.O)();return a=>{let l=n.find(e=>e.key===a);if(!l)return;e(l);let i=st(l);s({styleKey:i,timestamp:new Date}),t.track({event_key:"styles.selected",style_key:i})}},sc="chat-input-menu-search-input",sd=()=>{if((0,e0.r3)())return;let e=document.getElementById(sc);e&&e.focus()},su=e=>{let{currentItems:t,inputMenuIsOpen:n,setInputMenuIsOpen:s,inputMenuSearchQuery:a,setInputMenuSearchQuery:l,path:i,handleUpdatePath:r,highlightedItemKey:o,setHighlightedItemKey:c}=e,d=(0,ei.useRouter)(),u=(0,h.useCallback)(e=>{if("toggleGroup"===e.type||"optionGroup"===e.type||"buttonGroup"===e.type)s(!0),r(e.key,!0);else if("button"===e.type||"switch"===e.type||"toggle"===e.type||"option"===e.type){var t;null===(t=e.onClick)||void 0===t||t.call(e)}},[s,r]),m=(0,h.useCallback)(e=>{i&&(null==e||e.preventDefault(),r(null),c(i),sd())},[i,c,r]),x=(0,h.useCallback)(e=>{let n;let s=t.filter(e=>!["subheader","divider"].includes(e.type)&&!e.isDisabled&&!e.menuItemHidden),a=s.findIndex(e=>{let{key:t}=e;return t===o});n="ArrowUp"===e?a>0?a-1:s.length-1:a<s.length-1?a+1:0,c(s[n].key)},[t,o,c]),p=(0,h.useCallback)(e=>{var t,a,i;if(!n){u(e);return}if(!e.isDisabled){if("pro"===e.tag){d.push("/upgrade/pro");return}if(l(""),"back"===e.type){m();return}if("button"===e.type){null===(t=e.onClick)||void 0===t||t.call(e),s(!1);return}if("toggleGroup"===e.type||"optionGroup"===e.type||"buttonGroup"===e.type){r(e.key),c(null),sd();return}"option"===e.type&&(null===(a=e.onClick)||void 0===a||a.call(e),s(!1,{withDelay:!0})),("toggle"===e.type||"switch"===e.type)&&(null===(i=e.onClick)||void 0===i||i.call(e),sd())}},[m,u,r,n,l,d,s,c]),f=(0,h.useCallback)((e,n)=>{if(!o)return;let s=t.find(e=>{let{key:t}=e;return t===o});s&&("Enter"===e||["optionGroup","toggleGroup","buttonGroup"].includes(s.type))&&(n.preventDefault(),p(s))},[o,t,p]);return(0,h.useEffect)(()=>{if(!n)return;let e=e=>{"Tab"===e.key?e.preventDefault():"Escape"===e.key?(e.preventDefault(),s(!1)):"ArrowUp"===e.key||"ArrowDown"===e.key?(e.preventDefault(),x(e.key)):"ArrowRight"===e.key||"Enter"===e.key?f(e.key,e):"ArrowLeft"!==e.key||a||m(e)};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[n,s,a,x,f,m]),{handleClickItem:p,handleBack:m}};var sm=n(67578),sx=n(86973);let sp={includeScore:!0,isCaseSensitive:!1,ignoreLocation:!0,threshold:.4},sh=e=>{let{actions:t,inputMenuSearchQuery:n,inputMenuIsOpen:s,pathItems:a,path:l,menuType:i}=e,r=(0,h.useRef)(n),{handleSearchDrive:c,searchedDriveItems:d}=sv({path:l,actions:t,inputMenuSearchQuery:n,inputMenuIsOpen:s,menuType:i}),{handleSearchProjects:u,searchedProjectItems:m}=sg({path:l,actions:t,inputMenuSearchQuery:n,inputMenuIsOpen:s,menuType:i,pathItems:a}),{handleFilterMenuItems:x,filteredMenuItems:p}=sf({path:l,inputMenuSearchQuery:n,pathItems:a}),f=(0,h.useCallback)(()=>{x(),u(),c()},[x,u,c]),g=(0,h.useMemo)(()=>te()(()=>{f()},100),[f]);return((0,h.useEffect)(()=>{if(n&&s&&n!==r.current)return r.current=n,g(),()=>{g.cancel()}},[s,n,g]),p.length||m.length||d.length)?[p,m,d].reduce((e,t,n)=>[...e,...e.length&&t.length?[{key:"divider".concat(n+1),type:"divider",label:""}]:[],...t],[]):[{key:"loading",type:"button",label:"No results found",icon:(0,o.jsx)(sm.Y,{size:18}),onClick:()=>void 0,isDisabled:!0}]},sf=e=>{let{path:t,inputMenuSearchQuery:n,pathItems:s}=e,a=s.filter(e=>{let{menuItemHidden:t}=e;return!t}),[l,i]=(0,h.useState)([]);return"projects"!==t&&"drive"!==t?{handleFilterMenuItems:()=>{let e=n.toLowerCase();if(!e)return a;let t=[];for(let e of a)t.push(e),!e.isDisabled&&"projects"!==e.key&&"drive"!==e.key&&"children"in e&&e.children&&t.push(...e.children);i(t.filter(t=>"back"!==t.type&&"divider"!==t.type&&"string"==typeof t.label&&t.label.toLowerCase().includes(e)).slice(0,7))},filteredMenuItems:l}:{handleFilterMenuItems:()=>[],filteredMenuItems:[]}},sg=e=>{let{path:t,actions:n,inputMenuSearchQuery:s,inputMenuIsOpen:a,menuType:l,pathItems:i}=e,r="projects",c=(0,n0.U)(),d=(i.map(e=>{let{key:t}=e;return t}).indexOf("projects")>-1||"projects"===t)&&(t===r||!t)&&a&&c&&"plus"===l,[u,m]=(0,h.useState)([]),{data:x}=(0,nX.O3)({enabled:d}),p=(0,h.useMemo)(()=>new sx.Z(x||[],{...sp,keys:["name","description"]}),[x]);return d?{handleSearchProjects:()=>{let e=s.toLowerCase();if(!e||!x)return[];m(p.search(e,{limit:t===r?10:5}).map(e=>({type:"button",key:e.item.uuid,label:e.item.name,icon:(0,o.jsx)(nm.pj,{size:18}),onClick:()=>n.onSelectProject(e.item.uuid)})))},searchedProjectItems:u}:{handleSearchProjects:()=>[],searchedProjectItems:[]}},sv=e=>{let{path:t,actions:n,inputMenuSearchQuery:s,inputMenuIsOpen:a,menuType:l}=e,i="drive",r=(t===i||!t)&&a&&"plus"===l,c=(0,tz.Aj)(),[d,u]=(0,h.useState)([]),{recentDriveDocs:m}=(0,tz.td)(r),x=(0,h.useMemo)(()=>new sx.Z(m,{...sp,keys:["title"]}),[m]);return c&&r?{handleSearchDrive:()=>{let e=s.toLowerCase();if(!e||!m)return[];u(x.search(e,{limit:t===i?10:5}).map(e=>({key:e.item.uri,type:"button",label:e.item.title||"",icon:(0,o.jsx)(nT.j0,{type:M.Fg.GDRIVE,variant:nT.cT.DOCS,size:16}),onClick:()=>{n.createDriveSyncSource(e.item.uri)}})))},searchedDriveItems:d}:{handleSearchDrive:()=>[],searchedDriveItems:[]}},sj={path:null,inputMenuSearchQuery:"",setInputMenuSearchQuery:tG(),inputMenuIsOpen:!1,setInputMenuIsOpen:tG(),menuView:{rootItems:[],currentItems:[]},handleClickItem:tG(),handleBack:tG(),highlightedItemKey:null,setHighlightedItemKey:tG(),animationDirection:"none"},sy={...sj,styleModalOpenWithScreen:null,setStyleModalOpenWithScreen:tG(),createProjectModalIsOpen:null,setCreateProjectModalIsOpen:tG(),githubModalIsOpen:!1,setGithubModalIsOpen:tG(),gmailAuthModalIsOpen:!1,setGmailAuthModalIsOpen:tG()},sb=(0,h.createContext)(sy),sw=(0,h.createContext)(sj),sk=(0,h.createContext)(sj),sC=e=>{let{actions:t,rootItems:n,menuType:s,inputMenuIsOpen:a,setInputMenuIsOpen:l}=e,i=(0,h.useRef)(null),[r,o]=(0,h.useState)(null),[c,d]=(0,h.useState)(null),[u,m]=(0,h.useState)(""),x=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!a&&e){l(!0);return}if(a&&!e){m("");let e=()=>{var e;p(null,!0),d(null),l(!1),null===(e=document.getElementById("input-".concat(s,"-menu-trigger")))||void 0===e||e.focus()};t.withDelay?setTimeout(e,200):e()}},p=(e,t)=>{t?i.current=e:i.current=r,o(e)},f=(()=>{if(r){let e=n.find(e=>e.key===r);if(e&&"children"in e)return e.children}return n})(),g=sh({actions:t,inputMenuSearchQuery:u,inputMenuIsOpen:a,pathItems:f,path:r,menuType:s}),v=u.trim().length?g:f,{handleClickItem:j,handleBack:y}=su({currentItems:v,inputMenuIsOpen:a,setInputMenuIsOpen:x,inputMenuSearchQuery:u,setInputMenuSearchQuery:m,path:r,handleUpdatePath:p,highlightedItemKey:c,setHighlightedItemKey:d}),b=i.current&&!r?"back":!i.current&&r?"forward":"none";return{path:r,inputMenuSearchQuery:u,setInputMenuSearchQuery:m,inputMenuIsOpen:a,setInputMenuIsOpen:x,menuView:{rootItems:n,currentItems:v},handleClickItem:j,handleBack:y,highlightedItemKey:c,setHighlightedItemKey:d,animationDirection:b}},sM=e=>{let{rootItems:t,menuType:n,inputMenuIsOpen:s,setInputMenuIsOpen:a}=e,[l,i]=(0,h.useState)(null),r=tG(),o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!s&&e){a(!0);return}if(s&&!e){let e=()=>{var e;i(null),a(!1),null===(e=document.getElementById("input-".concat(n,"-menu-trigger")))||void 0===e||e.focus()};t.withDelay?setTimeout(e,200):e()}},{handleClickItem:c,handleBack:d}=su({currentItems:t,inputMenuIsOpen:s,setInputMenuIsOpen:o,inputMenuSearchQuery:"",setInputMenuSearchQuery:r,path:null,handleUpdatePath:tG(),highlightedItemKey:l,setHighlightedItemKey:i});return{path:null,inputMenuSearchQuery:"",setInputMenuSearchQuery:r,inputMenuIsOpen:s,setInputMenuIsOpen:o,menuView:{rootItems:t,currentItems:t},handleClickItem:c,handleBack:d,highlightedItemKey:l,setHighlightedItemKey:i,animationDirection:"none"}};function sN(e){let{children:t}=e,[n,s]=(0,h.useState)(!1),[a,l]=(0,h.useState)(!1),[i,r]=(0,h.useState)(!1),[c,d]=(0,h.useState)(null),[u,m]=(0,h.useState)(!1),[x,p]=(0,h.useState)(!1),[f,g]=(0,h.useState)(null),v=sn({setStyleModalOpenWithScreen:g,setCreateProjectModalIsOpen:d,setGithubModalIsOpen:m,setGmailAuthModalIsOpen:p}),j=n1({actions:v,inputMenuIsOpen:n}),y=sC({actions:v,rootItems:j,menuType:"plus",inputMenuIsOpen:n,setInputMenuIsOpen:s}),b=nU({actions:v}),w=sC({actions:v,rootItems:b,menuType:"tools",inputMenuIsOpen:a,setInputMenuIsOpen:l}),k=sM({rootItems:n4(),menuType:"research",inputMenuIsOpen:i,setInputMenuIsOpen:r});return(0,o.jsx)(sb.Provider,{value:{...y,styleModalOpenWithScreen:f,setStyleModalOpenWithScreen:g,createProjectModalIsOpen:c,setCreateProjectModalIsOpen:d,githubModalIsOpen:u,setGithubModalIsOpen:m,gmailAuthModalIsOpen:x,setGmailAuthModalIsOpen:p},children:(0,o.jsx)(sw.Provider,{value:w,children:(0,o.jsx)(sk.Provider,{value:k,children:t})})})}function sS(){return(0,h.useContext)(sb)}function s_(){return(0,h.useContext)(sw)}var sE=n(28853),sZ=n(80156),sI=n(49167),sA=n(75140),sz=n(65654),sD=n(88e3),sT=n(43311),sL=n(76203),sF=n(66240);let sR="https://modelcontextprotocol.io";function sP(e,t){if(!Array.isArray(e))return[];let n=e=>e.split(/(\d+)/).map((e,t)=>{if(t%2==1){let t=parseInt(e,10);return isNaN(t)?e.toLowerCase():t}return e.toLowerCase()}),s=(e,t)=>{if(null===e)return null===t?0:-1;if(null===t)return 1;if("number"==typeof e&&"number"==typeof t)return e-t;let s=String(e),a=String(t),l=n(s),i=n(a);for(let e=0;e<Math.min(l.length,i.length);e++){let t=l[e],n=i[e];if(t!==n){if("number"==typeof t&&"number"==typeof n)return t-n;return String(t).localeCompare(String(n))}}return l.length-i.length};return[...e].sort((e,n)=>{for(let a of t){let t=s(e[a],n[a]);if(0!==t)return t}return 0})}let sO=e=>{let{icon:t,name:n,onClick:s}=e;return(0,o.jsxs)("div",{className:"cursor-pointer p-1.5 transition-colors duration-200 hover:bg-bg-100 flex items-center gap-1.5 text-sm",onClick:s,children:[(0,o.jsx)(t,{size:20,weight:"light"}),"\xa0",(0,o.jsx)("div",{className:"flex-1",children:n})]})},sU=e=>{var t;let{prompt:n,onSubmit:s,onClose:a}=e,[l,i]=(0,h.useState)({});return(0,o.jsxs)(G.u_,{title:(0,o.jsx)("div",{className:"font-medium mb-4",children:(0,o.jsx)(_.Z,{defaultMessage:"Fill prompt arguments",id:"MyrBiQM8VD"})}),isOpen:!0,onClose:a,modalSize:"md",children:[null===(t=n.arguments)||void 0===t?void 0:t.map(e=>(0,o.jsx)(q.oi,{label:e.name,value:l[e.name]||"",onChange:t=>i(n=>({...n,[e.name]:t.target.value})),className:"mb-4"},e.name)),(0,o.jsx)(k.z,{onClick:()=>{s(l)},children:(0,o.jsx)(_.Z,{defaultMessage:"Submit",id:"wSZR47Y5kj"})})]})},sG=e=>{let{handleUpload:t,mcpClients:n}=e,[s,a]=(0,h.useState)({}),[l,i]=(0,h.useState)({}),[r,c]=(0,h.useState)(!1),[d,u]=(0,h.useState)(null),{addError:x}=(0,O.e)(),{track:p}=(0,el.z$)(),g=(0,f.Z)();(0,h.useEffect)(()=>{let e=!1;async function t(){if(!n)return;let t=await (0,sA.k)(n,{method:"resources/list",params:{}},sz.Ol,{timeout:5e3}),s=await (0,sA.k)(n,{method:"prompts/list",params:{}},sz.ev,{timeout:5e3});if(e)return;let l={},r={};Object.entries(t).forEach(e=>{var t,n,s;let[a,i]=e;p({event_key:"mcp.resources.listed",resource_count_on_server:null!==(n=null===(t=i.resources)||void 0===t?void 0:t.length)&&void 0!==n?n:0}),l[a]=(null!==(s=i.resources)&&void 0!==s?s:[]).sort((e,t)=>e.name.localeCompare(t.name))}),Object.entries(s).forEach(e=>{var t,n,s;let[a,l]=e;p({event_key:"mcp.prompts.listed",prompt_count_on_server:null!==(n=null===(t=l.prompts)||void 0===t?void 0:t.length)&&void 0!==n?n:0}),r[a]=(null!==(s=l.prompts)&&void 0!==s?s:[]).sort((e,t)=>e.name.localeCompare(t.name))}),a(l),i(r)}t();let s=setInterval(()=>void t(),5e3);return()=>{e=!0,clearInterval(s)}},[n,x,p]);let v=async(e,a)=>{var l;let i=null===(l=s[e])||void 0===l?void 0:l.find(e=>e.uri===a);if(!i){x(g.formatMessage({defaultMessage:"Resource not found: {uri}",id:"JVjYOkR48+"},{uri:a}));return}let r=n[e];if(!r){x(g.formatMessage({defaultMessage:"MCP server not known: {serverName}",id:"lULEBllYjg"},{serverName:e}));return}c(!1);try{let e=(await r.request({method:"resources/read",params:{uri:a}},sz.vg,{timeout:15e3})).contents.map(e=>{let t;return"text"in e?(t=String(e.text),p({event_key:"mcp.resources.read",type:"text",mime_type:e.mimeType})):(t=sH(e.blob),p({event_key:"mcp.resources.read",type:"binary",mime_type:e.mimeType})),new File([t],i.name,{type:e.mimeType})});e.length>0&&await t(e)}catch(e){x("Error uploading resource: ".concat(e))}},j=(e,t)=>{c(!1),t.arguments&&t.arguments.length>0?u({serverName:e,prompt:t}):y(e,t,{})},y=async(e,s,a)=>{let l=n[e];if(!l){x("MCP server not known: ".concat(e));return}try{let e=await l.request({method:"prompts/get",params:{name:s.name,arguments:a}},sz.Go,{timeout:15e3});p({event_key:"mcp.prompts.used",argument_count:Object.keys(a).length,assistant_messages:e.messages.filter(e=>"assistant"===e.role).length,user_messages:e.messages.filter(e=>"user"===e.role).length,text_messages:e.messages.filter(e=>"text"===e.content.type).length,image_messages:e.messages.filter(e=>"image"===e.content.type).length});let n=(e,t)=>{let n=e=>{let t=ek.wI[e];if(!t)throw Error("Unsupported MIME type: ".concat(e));return t},a=e=>"".concat(s.name).concat(t?"_".concat(t):"",".").concat(e);switch(e.content.type){case"text":return new File([e.content.text],a("txt"),{type:"text/plain"});case"image":{let t=n(e.content.mimeType);return new File([sH(e.content.data)],a(t),{type:e.content.mimeType})}case"resource":if("text"in e.content.resource){var l;let t=e.content.resource;return new File([t.text],"".concat(t.uri,".txt"),{type:null!==(l=t.mimeType)&&void 0!==l?l:"text/plain"})}if("blob"in e.content.resource){let t=e.content.resource;if(!t.mimeType)throw Error("Missing MIME type for embedded resource");let s=n(t.mimeType);return new File([sH(t.blob)],"".concat(t.uri,".").concat(s),{type:t.mimeType})}throw Error("Invalid resource content")}};if(1===e.messages.length)await t([n(e.messages[0],0)]);else if(e.messages.length>1){let a=e.messages.flatMap((e,t)=>"image"===e.content.type||"resource"===e.content.type&&"blob"in e.content.resource?[n(e,t)]:[]),l=e.messages.filter(e=>"text"===e.content.type||"resource"===e.content.type&&"text"in e.content.resource);if(l.length>0){let e=JSON.stringify(l,null,2);a.push(new File([e],"".concat(s.name,"_messages.json"),{type:"application/json"}))}await t(a)}u(null)}catch(e){x("Error getting prompt: ".concat(e))}},b=(0,h.useMemo)(()=>[...new Set([...Object.keys(s),...Object.keys(l)])].sort(),[s,l]),w=(0,h.useMemo)(()=>Object.fromEntries(Object.entries(n).map(e=>{let[t,n]=e,s=n.getServerVersion();return s?[t,s]:null}).filter(e=>null!==e).sort((e,t)=>{let[n]=e,[s]=t;return n.localeCompare(s)})),[n]);return(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)(t1.u,{className:"text-center",side:"bottom",tooltipContent:(0,o.jsx)(_.Z,{defaultMessage:"Attach from MCP",id:"CSjaHqajqj"}),children:(0,o.jsx)("div",{className:"min-w-0 border-0.5 border-border-300 transition-colors h-8 rounded-lg flex items-center px-[7.5px] gap-1 cursor-pointer text-text-300 hover:text-text-200/90 hover:bg-bg-100",onClick:()=>c(!0),children:(0,o.jsx)("div",{className:"w-4 h-4 flex items-center justify-center",children:(0,o.jsx)(sD.F,{size:16})})})}),(0,o.jsxs)(G.u_,{title:(0,o.jsx)("div",{className:"font-medium mb-4",children:(0,o.jsx)(_.Z,{defaultMessage:"Share context with Claude",id:"mtl+vwNNdP"})}),isOpen:r,onClose:()=>c(!1),modalSize:"lg",children:[(0,o.jsx)("p",{className:"text-sm mb-2",children:(0,o.jsx)(_.Z,{defaultMessage:"Claude can receive information like prompts and attachments from specialized servers using Model Context Protocol. <link>Learn more about MCP</link>.",id:"X+GLMSGJyU",values:{link:e=>(0,o.jsx)("a",{className:"underline",href:sR,target:"_blank",children:e})}})}),Object.keys(n).length>0?(0,o.jsxs)(o.Fragment,{children:[b.length>0&&(0,o.jsxs)(sF.fC,{children:[(0,o.jsxs)(sF.xz,{className:"bg-bg-300 rounded px-2 py-1 w-fit",children:[(0,o.jsx)(sF.B4,{className:"text-text-000",placeholder:g.formatMessage({defaultMessage:"Choose an integration",id:"5HKIiHkEpc"})}),(0,o.jsx)(sF.JO,{className:"text-text-400 icon",children:(0,o.jsx)(t5.p,{size:16,className:"inline-block ml-2"})})]}),(0,o.jsx)(sF.h_,{children:(0,o.jsx)(sF.VY,{className:"border-0.5 border-border-300 bg-bg-200 min-w-72 rounded-lg p-1 shadow-sm z-dropdown cursor-pointer",position:"popper",side:"bottom",align:"start",sideOffset:4,alignOffset:0,avoidCollisions:!0,collisionPadding:8,children:(0,o.jsx)(sF.l_,{className:"p-2 ",children:(0,o.jsx)(sI.$,{className:"max-h-[40vh] pr-4",children:b.map((e,t)=>{var n,a;return(0,o.jsxs)(sF.ZA,{children:[(0,o.jsx)(sF.__,{className:(0,m.Z)(0===t?"mb-1":"my-1"),children:e}),null===(n=sP(l[e],["name"]))||void 0===n?void 0:n.map(t=>(0,o.jsx)(sO,{icon:sT.N,name:t.name,onClick:()=>j(e,t)},t.name)),null===(a=sP(s[e],["name","uri"]))||void 0===a?void 0:a.map(t=>(0,o.jsx)(sO,{icon:sL.$,name:t.name||t.uri,onClick:()=>v(e,t.uri)},t.uri))]},e)})})})})})]}),(0,o.jsx)("div",{className:"mt-4 text-text-400",children:(0,o.jsxs)("details",{children:[(0,o.jsx)("summary",{className:"font-medium mb-2 text-sm cursor-pointer",children:(0,o.jsx)(_.Z,{defaultMessage:"Installed MCP servers",id:"POjUW4Quau"})}),(0,o.jsx)("ul",{children:Object.entries(w).map(e=>{let[t,n]=e;return(0,o.jsxs)("li",{className:"text-xs flex",children:[(0,o.jsx)("div",{className:"flex-1",children:n.name}),(0,o.jsx)("div",{className:"font-extralight",children:n.version})]},t)})})]})})]}):(0,o.jsx)("p",{children:(0,o.jsx)(_.Z,{defaultMessage:"No servers are installed.",id:"ahF6M7bcp3"})})]}),d&&(0,o.jsx)(sU,{prompt:d.prompt,onSubmit:e=>y(d.serverName,d.prompt,e),onClose:()=>u(null)})]})};function sH(e){let t=window.atob(e),n=new ArrayBuffer(t.length),s=new Uint8Array(n);for(let e=0;e<t.length;e++)s[e]=t.charCodeAt(e);return n}function sK(e){let{isOpen:t,onClose:n,tools:s}=e;return(0,o.jsxs)(G.u_,{title:(0,o.jsx)("div",{className:"font-medium mb-4",children:(0,o.jsx)(_.Z,{defaultMessage:"Available MCP tools",id:"ffDXC8Ezvz"})}),isOpen:t,onClose:n,modalSize:"lg",children:[(0,o.jsx)("p",{className:"text-sm mb-2",children:(0,o.jsx)(_.Z,{defaultMessage:"Claude can use tools provided by specialized servers using Model Context Protocol. <link>Learn more about MCP</link>.",id:"Pmlvrp23XB",values:{link:e=>(0,o.jsx)("a",{className:"underline",href:sR,target:"_blank",children:e})}})}),(0,o.jsx)(sI.$,{className:"max-h-[60vh] pr-4",children:s.map(e=>(0,o.jsxs)("div",{className:"mb-4",children:[(0,o.jsx)("h3",{className:"font-medium text-sm",children:e.name}),(0,o.jsx)("p",{className:"text-sm text-text-400",children:e.description}),(0,o.jsx)("p",{className:"text-xs text-text-300 mt-1 italic",children:(0,o.jsx)(_.Z,{defaultMessage:"From server: {serverName}",id:"h7f9eQRSUE",values:{serverName:e.serverName}})})]},e.name))})]})}function sB(){let[e,t]=(0,h.useState)(!1),{mcpTools:n}=(0,sE.c)(),s=(0,h.useMemo)(()=>[...n].sort((e,t)=>e.name.localeCompare(t.name)),[n]);return 0===n.length?null:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t1.u,{side:"bottom",tooltipContent:(0,o.jsx)("p",{children:(0,o.jsx)(_.Z,{defaultMessage:"{numTools} MCP {numTools, plural, one {tool} other {tools}} available",id:"pw7qRsBAsH",values:{numTools:n.length}})}),children:(0,o.jsxs)("div",{className:"min-w-0 border-0.5 border-border-300 transition-colors h-8 rounded-lg flex items-center px-[7.5px] gap-1 cursor-pointer text-text-300 hover:text-text-200/90 hover:bg-bg-100",onClick:()=>t(!0),children:[(0,o.jsx)("div",{className:"w-4 h-4 flex items-center justify-center",children:(0,o.jsx)(sZ.v,{size:16})}),(0,o.jsx)("p",{className:"text-xs tracking-tight text-ellipsis whitespace-nowrap break-words overflow-hidden min-w-0",children:n.length})]})}),(0,o.jsx)(sK,{isOpen:e,onClose:()=>t(!1),tools:s})]})}function sW(){let{handleUpload:e}=(0,T.r)(),{mcpClients:t,isEnabled:n}=(0,sE.c)();return n?(0,o.jsx)(sG,{mcpClients:t,handleUpload:e}):null}var sV=n(66092),sY=n(69500),sq=n(94449);let sQ=e=>{let{isOpen:t,onClose:n,mcpEnabled:s}=e,{activeOrganization:a}=(0,w.t)(),{data:l}=(0,sq.j6)(null==a?void 0:a.uuid,s),{enabledTools:i,toggleTool:r,isToolEnabled:c,setEnabledTools:d}=(0,sV.$)(),u=Object.values(i).filter(Boolean).length;(0,h.useEffect)(()=>{if(!l)return;let e=new Set;l.forEach(t=>{t.tools.forEach(t=>{e.add(t.tool_key)})});let t=Object.keys(i).filter(t=>i[t]&&!e.has(t));if(t.length>0){let e={...i};t.forEach(t=>{delete e[t]}),d(e)}},[l,i,d,t]);let m=(e,t)=>{r(e,t)};return(0,o.jsx)(G.u_,{title:(0,o.jsx)("div",{className:"font-medium mb-4",children:(0,o.jsx)(_.Z,{defaultMessage:"Servers & tools",id:"LSGdc7r+j3"})}),subtitle:(0,o.jsx)("div",{className:"text-sm mb-4",children:(0,o.jsx)(_.Z,{defaultMessage:"{enabledcount} enabled",id:"j2czpHz6uO",values:{enabledcount:u}})}),isOpen:t,onClose:n,modalSize:"xl",children:(0,o.jsx)(sI.$,{className:"max-h-[60vh] pr-4",children:l&&l.length>0?l.map(e=>(0,o.jsx)(sJ,{server:e,activeOrganizationUuid:null==a?void 0:a.uuid,isToolEnabled:c,onToggleTool:m},e.server_id)):(0,o.jsx)("p",{className:"text-text-400 text-sm",children:(0,o.jsx)(_.Z,{defaultMessage:"No remote MCP servers found.",id:"mmjarUui7Y"})})})})},sJ=e=>{let{server:t,activeOrganizationUuid:n,isToolEnabled:s,onToggleTool:a}=e,l=(0,f.Z)(),{addSuccess:i,addError:r}=(0,O.e)(),{mutate:c,isPending:d}=(0,sq.Us)(n||"",t.server_id,{onSuccess:()=>{i(l.formatMessage({defaultMessage:"Disconnected from server successfully",id:"XMQp6sbYzu"}))},onError:()=>{r(l.formatMessage({defaultMessage:"Failed to disconnect from server",id:"L488a5jdgF"}))}});return(0,o.jsxs)("div",{className:"mb-5 border-b border-border-200 pb-5 last:border-0 last:mb-0 last:pb-0",children:[(0,o.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,o.jsx)("h3",{className:"font-medium",children:t.server_name}),(0,o.jsx)(k.z,{size:"sm",variant:t.is_authenticated?"secondary":"primary",loading:d,className:"text-xs",onClick:()=>{t.is_authenticated?c():window.location.href="".concat(window.location.origin,"/api/organizations/").concat(n,"/mcp/start-auth/").concat(t.server_id)},children:t.is_authenticated?(0,o.jsx)(_.Z,{defaultMessage:"Disconnect",id:"qj1uhzynub"}):(0,o.jsx)(_.Z,{defaultMessage:"Connect",id:"+vVZ/G11Zg"})})]}),(0,o.jsx)("div",{className:"mt-2 space-y-2.5",children:t.tools&&t.tools.map(e=>{let t=e.tool_key;return(0,o.jsxs)("div",{className:"flex items-start gap-2.5 cursor-pointer hover:bg-bg-100/50 py-1.5 px-1.5 -mx-1.5 rounded-md transition-colors",onClick:()=>{a(t,!s(t))},children:[(0,o.jsx)("div",{className:"flex-shrink-0 flex items-center h-full pt-0.5",children:(0,o.jsx)(nh.Z,{checked:s(t),onChange:e=>{a(t,e.target.checked)}})}),(0,o.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,o.jsx)("h4",{className:"font-medium text-sm",children:e.name}),(0,o.jsx)("p",{className:"text-xs text-text-400 mt-0.5 break-words",children:e.description})]})]},t)})})]})},sX=()=>{let{activeOrganization:e}=(0,w.t)(),[t,n]=(0,h.useState)(!1),{value:s}=(0,u.FL)("papi_mcp"),{data:a}=(0,sq.j6)(null==e?void 0:e.uuid,s),{enabledTools:l}=(0,sV.$)(),i=(null==a?void 0:a.reduce((e,t)=>e+t.tools.length,0))||0,r=Object.values(l).filter(Boolean).length;return s&&a?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t1.u,{side:"bottom",align:"center",tooltipContent:(0,o.jsx)("p",{children:(0,o.jsx)(_.Z,{defaultMessage:"Tools",id:"nUT0LvZVOx"})}),children:(0,o.jsxs)("div",{className:"min-w-0 border-0.5 border-border-300 transition-colors h-8 rounded-lg flex items-center px-[7.5px] gap-1 cursor-pointer text-text-300 hover:text-text-200/90 hover:bg-bg-100",onClick:()=>n(!0),children:[(0,o.jsx)("div",{className:"w-4 h-4 flex items-center justify-center",children:(0,o.jsx)(sY.v,{size:16})}),(0,o.jsx)("p",{className:"text-xs tracking-tight text-ellipsis whitespace-nowrap break-words overflow-hidden min-w-0",children:(0,o.jsx)(_.Z,{defaultMessage:"{numEnabledTools} / {numTools}",id:"9mSAgod1ga",values:{numTools:i,numEnabledTools:r}})})]})}),(0,o.jsx)(sQ,{isOpen:t,onClose:()=>n(!1),mcpEnabled:s})]}):null},s$=e=>{let{hideIndicatorText:t,hideIndicators:n}=e,s=(0,f.Z)();return n?null:(0,o.jsx)(np.S,{children:(0,o.jsxs)("div",{className:"flex flex-row items-center gap-2 min-w-0",children:[(0,o.jsx)(s0,{}),(0,o.jsx)(s1,{itemKey:nx.Mm.COMPASS,tooltip:s.formatMessage({defaultMessage:"Research mode",id:"lYf0AUt2RH"})}),(0,o.jsx)(sX,{}),(0,o.jsx)(sB,{}),(0,o.jsx)(sW,{}),(0,o.jsx)(s2,{hideIndicatorText:t}),(0,o.jsx)(s5,{hideIndicatorText:t})]})})},s0=()=>{let e=(0,f.Z)(),{menuView:{rootItems:t}}=s_(),n=t.find(e=>e.key===nx.Mm.EXTENDED_THINKING);return n?(0,o.jsx)(s3,{hideIndicatorText:!0,menuItem:n,icon:n.icon,tooltip:e.formatMessage({defaultMessage:"Extended thinking",id:"5j4WakKa2u"})}):null},s1=e=>{let{itemKey:t,tooltip:n}=e,{menuView:{rootItems:s}}=sS(),{menuView:{rootItems:a}}=s_(),l=[...s,...a].find(e=>e.key===t);return l?(0,o.jsx)(s3,{hideIndicatorText:!0,menuItem:l,icon:l.icon,tooltip:n}):null},s2=e=>{let{hideIndicatorText:t}=e,{menuView:{rootItems:n}}=s_(),s=so(),a=n.find(e=>"styles"===e.key);return a&&"optionGroup"===a.type?(0,o.jsx)(s3,{hideIndicatorText:t,menuItem:a,icon:(0,o.jsx)(nm.z0,{size:18,className:"-m-[1px]"}),text:a.secondaryText,buttonClassName:"!shrink",handleClick:()=>s("Default")}):null},s5=e=>{let{hideIndicatorText:t}=e,{menuView:{rootItems:n}}=sS(),s=sl(),a=n.find(e=>e.key===nx.Mm.PROJECTS);return a&&"optionGroup"===a.type?(0,o.jsx)(s3,{hideIndicatorText:t,menuItem:a,icon:(0,o.jsx)(nm.pj,{size:18,className:"-m-[1px]"}),text:a.secondaryText,buttonClassName:"!shrink-[2]",handleClick:()=>s(void 0)}):null},s3=e=>{let{menuItem:t,handleClick:n,...s}=e,{handleClickItem:a}=sS();if(!t||t.isDisabled||"pro"===t.tag||"new chat"===t.tag||!t.indicatorActive)return null;let{indicatorActive:l}=t,i=!!t.menuItemHidden;return(0,o.jsx)(nD,{onClick:null!=n?n:()=>a(t),indicatorActive:l,disabled:i,showRemoveIcon:!0,...s})},s7=e=>{let{style:t,children:n,duration:s=200,delay:a=0,easing:l="ease-in-out",className:i="",onTransitionEnd:r=()=>void 0}=e,c=(0,h.useRef)(null),[d,u]=(0,h.useState)("auto"),m=(0,h.useRef)(null);return(0,h.useEffect)(()=>{if(c.current)return m.current=new ResizeObserver(e=>{for(let t of e){let e=t.contentRect.height;u("".concat(e,"px"))}}),m.current.observe(c.current),()=>{m.current&&m.current.disconnect()}},[]),(0,o.jsx)("div",{style:{height:d,transitionDelay:"".concat(a,"ms"),transitionTimingFunction:l,transitionDuration:"".concat(s,"ms"),transitionProperty:"height",...t},className:i,onTransitionEnd:()=>{r()},children:(0,o.jsx)("div",{className:"w-full",ref:c,children:n})})};var s4=n(28386),s6=n(11510);let s8=e=>{let{path:t}=e,n={drive:(0,f.Z)().formatMessage({defaultMessage:"Paste a Drive link in the chat to upload it",id:"ZJxjEilF0C"})},s=t&&t in n?n[t]:null;return s?(0,o.jsxs)("div",{className:"h-8 w-full bg-bg-100 border-t-0.5 border-border-300 opacity-80 text-text-500 flex flex-row items-center gap-2.5 px-3 text-[0.8125rem]",children:[(0,o.jsx)(s6.k,{size:14}),s]}):null};var s9=n(47666),ae=n(19186);let at=e=>{let{path:t,inputMenuSearchQuery:n,setInputMenuSearchQuery:s,handleBack:a,menuType:l,className:i}=e,r=(0,f.Z)(),c=(0,e0.r3)(),d={[nx.Mm.DRIVE]:r.formatMessage({defaultMessage:"Search Google Drive",id:"1bbXc6Z3S1"}),[nx.Mm.PROJECTS]:r.formatMessage({defaultMessage:"Search projects",id:"doPT7U8q21"}),[nx.Mm.STYLES]:r.formatMessage({defaultMessage:"Search styles",id:"9oQ0JkPwFY"})},u=t&&t in d?d[t]:"plus"===l?r.formatMessage({defaultMessage:"Search menu",id:"lL4HM3zEqr"}):r.formatMessage({defaultMessage:"Search tools",id:"QVlai1/dYD"});if(!(0,w.rW)())return null;let x=null===t||!!n.trim().length;return(0,o.jsxs)("div",{className:(0,m.Z)("flex flex-row items-center gap-2.5 px-1.5 w-full rounded-md h-[2rem]",i),children:[(0,o.jsxs)("div",{className:"relative",children:[(0,o.jsx)(ae.Y,{size:18,className:(0,m.Z)("text-text-500/50 transition-opacity",x?"opacity-100":"opacity-0")}),(0,o.jsx)("button",{onClick:a,className:(0,m.Z)("transition-opacity text-text-500 hover:text-text-100 absolute left-0 top-0",x?"opacity-0":"opacity-100"),disabled:x,children:(0,o.jsx)(s9.X,{size:16})})]}),(0,o.jsx)("input",{autoFocus:!c,id:sc,className:"block bg-transparent hide-focus-ring leading-6 placeholder:text-text-500/70 text-[15px] text-text-300 w-full",placeholder:u,value:n,onChange:e=>s(e.target.value)})]})};var an=n(89755),as=n(60105);let aa=e=>{let{tooltip:t,text:n,tag:s,showCaretIcon:a,indicatorActive:l=!1,hideIndicatorText:i,canShowDot:r,onDoubleClick:c,menuType:d,menuView:u,inputMenuIsOpen:m,setInputMenuIsOpen:x}=e,g=(0,f.Z)(),v=(0,h.useRef)(null),{rootItems:j}=u,y={indicatorActive:l,text:n||"",tooltip:t},b=(0,w.rW)();if("tools"===d&&!b){y.tooltip=g.formatMessage({defaultMessage:"Style",id:"7mL9QEUFav"});let e=j.find(e=>"option"===e.type&&e.isChecked);e&&"Default"!==e.key&&(y.indicatorActive=!0,y.text=e.label)}let k=j.filter(e=>{let{indicatorActive:t}=e;return t}).length,C=(0,o.jsxs)("div",{className:"flex flex-row items-center justify-center gap-1",children:["plus"===d?(0,o.jsx)(p.E.div,{animate:{rotate:m?45:0},transition:{type:"spring",stiffness:650,damping:32,duration:.1},children:(0,o.jsx)(an.v,{size:16})}):"research"===d?(0,o.jsx)(nm.A9,{size:16}):b?(0,o.jsx)(as.j,{size:16}):(0,o.jsx)(nm.z0,{size:16}),(0,o.jsx)(al,{isShown:r&&k>0})]});return(0,o.jsx)("div",{className:"flex items-center",children:(0,o.jsx)(nD,{tag:s,showCaretIcon:a,hideIndicatorText:!!i,icon:C,id:"input-".concat(d,"-menu-trigger"),ref:v,onClick:()=>{x(!m)},onKeyDown:e=>{m||"Space"!==e.code&&"ArrowDown"!==e.code||x(!0)},onDoubleClick:c?e=>{m||(e.preventDefault(),null==c||c())}:void 0,"aria-expanded":m,"aria-haspopup":"listbox","aria-controls":"input-menu","data-testid":"input-menu-".concat(d),...y})})},al=e=>{let{isShown:t}=e;return!!t&&(0,o.jsx)(p.E.div,{initial:{width:0,opacity:0},animate:{width:"auto",opacity:1},children:(0,o.jsx)("div",{className:"h-1.5 w-1.5 bg-accent-secondary-200 rounded-full mr-0.5"})})},ai={forward:{initial:{x:"20%",opacity:0},animate:{x:0,opacity:1}},back:{initial:{x:"-20%",opacity:0},animate:{x:0,opacity:1}},none:{initial:{x:0},animate:{x:0}}},ar=e=>{let{placement:t,canShowDot:n}=e,s=(0,f.Z)(),a=s_();return(0,o.jsx)(ad,{canShowDot:n,placement:t,menuType:"tools",...a,tooltip:s.formatMessage({defaultMessage:"Search and tools",id:"lhFEU+uT6i"})})},ao=e=>{let{placement:t,canShowDot:n}=e,s=sS();return(0,o.jsx)(ad,{placement:t,menuType:"plus",canShowDot:n,...s})},ac=e=>{let{placement:t,hideIndicatorText:n}=e,s=(0,f.Z)(),{conversation:a,model:l,compassLightEnabled:i,setCompassLightEnabled:r}=(0,T.r)(),c=(0,h.useContext)(sk),u=(0,tW.kk)(a),m=(0,tW.Ad)(),x=(0,tW.oc)(),p=(0,tW.hU)(),g=(0,eZ.wN)((null==a?void 0:a.id)||null),v=(0,tW.wH)(null!=l?l:g);if(!x&&!m)return null;if(!v||!p)return(0,o.jsx)(nD,{disabled:!0,tooltip:v?(0,d.lF)({id:"candid_cantaloupe",intl:s}):s.formatMessage({defaultMessage:"Switch to Sonnet 3.7 to use this feature",id:"2IxQ5WRzA1"}),showCaretIcon:x&&m,hideIndicatorText:!!n,icon:(0,o.jsx)(nm.A9,{size:18,className:"-m-[1px]"}),onClick:tG(),indicatorActive:!1,text:(0,d.lF)({id:"pig_airpod_pond",intl:s}),tag:"beta"});if(x&&!m)return(0,o.jsx)(nD,{showCaretIcon:!1,hideIndicatorText:!!n,icon:(0,o.jsx)(nm.A9,{size:18,className:"-m-[1px]"}),onClick:()=>{r(!i)},indicatorActive:i,text:(0,d.lF)({id:"pig_airpod_pond",intl:s}),tag:"beta"});let j=i?s.formatMessage({defaultMessage:"Light",id:"3cc4CtJM5h"}):u?s.formatMessage({defaultMessage:"Advanced",id:"3Rx6Qo1x+1"}):(0,d.lF)({id:"pig_airpod_pond",intl:s});return(0,o.jsx)(ad,{indicatorActive:i||u,placement:t,menuType:"research",canShowDot:!1,text:j,tag:"beta",hideIndicatorText:n,showCaretIcon:!0,...c})},ad=e=>{let{text:t,tag:n,showCaretIcon:s,indicatorActive:a,canShowDot:l,hideIndicatorText:i,tooltip:r,placement:c,menuType:d,path:u,menuView:f,highlightedItemKey:v,setHighlightedItemKey:j,handleClickItem:y,inputMenuIsOpen:b,setInputMenuIsOpen:w,inputMenuSearchQuery:k,setInputMenuSearchQuery:C,handleBack:M,animationDirection:N}=e,{currentItems:S}=f,_=(0,h.useRef)(null),E=(0,h.useRef)(null),Z=(0,h.useRef)(null),[I,A]=(0,h.useState)(void 0),[z,D]=(0,h.useState)("bottom"===c?"top":"bottom"),[T,L]=(0,h.useState)(0);(0,h.useEffect)(()=>{if(!E.current||!Z.current)return;let e=E.current.getBoundingClientRect(),{updatedHeightAvailable:t,updatedDropdownSide:n}=am({placement:c,triggerRectTop:e.top,triggerRectBottom:e.bottom});A(Math.min(448,t)),D(n);let s=Z.current.getBoundingClientRect();L(Math.min(0,window.innerWidth-s.right-8))},[c,b]),(0,g.t$)(_,()=>{w(!1)},"mouseup"),(0,g.t$)(_,()=>{w(!1)},"touchend");let F="plus"===d?(0,o.jsx)(at,{path:u,inputMenuSearchQuery:k,setInputMenuSearchQuery:C,handleBack:M,menuType:d}):null;return(0,o.jsxs)("div",{className:"relative shrink-0",onClick:e=>{e.preventDefault()},ref:_,children:[(0,o.jsx)("div",{ref:E,children:(0,o.jsx)(aa,{tag:n,tooltip:r,text:t,showCaretIcon:s,indicatorActive:a,hideIndicatorText:i,canShowDot:l,menuType:d,menuView:f,inputMenuIsOpen:b,setInputMenuIsOpen:w,onDoubleClick:"plus"===d?()=>sa:void 0})}),(0,o.jsx)("div",{ref:Z,className:(0,m.Z)("w-[20rem] absolute max-w-[calc(100vw-16px)]","top"===z?"bottom-10":"top-10",b?"block":"hidden"),children:(0,o.jsx)(x.M,{children:b&&(0,o.jsx)(p.E.div,{initial:{opacity:0,scale:.95,y:"top"===z?8:-8,x:-8},animate:{opacity:1,scale:1,y:0,x:0},exit:{opacity:0,scale:.95,y:"top"===z?8:-8,x:-8},transition:{type:"spring",stiffness:650,damping:23,mass:.6,height:{ease:"easeInOut"}},className:(0,m.Z)("relative w-full will-change-transform h-auto overflow-y-auto overscroll-auto flex z-dropdown bg-bg-000 rounded-lg overflow-hidden border-border-300 border-0.5 shadow-diffused shadow-[hsl(var(--always-black)/6%)]","top"===z?"flex-col-reverse":"flex-col"),onMouseEnter:()=>j(null),style:{maxHeight:I?"".concat(I,"px"):void 0,left:T},onClick:e=>{e.stopPropagation(),sd()},children:(0,o.jsxs)(s7,{duration:100,className:(0,m.Z)("flex flex-col min-h-0 w-full !ease-out","top"===z?"justify-end":"justify-start"),children:[(0,o.jsxs)("div",{className:"p-1.5 flex flex-col",children:["bottom"===z&&F,(0,o.jsx)(p.E.div,{variants:ai[N],initial:"initial",animate:"animate",className:"flex flex-col",transition:{x:{duration:.15,ease:s4.J.outCirc},opacity:{duration:.25,ease:"easeInOut"}},children:S.filter(e=>{let{menuItemHidden:t}=e;return!t}).map(e=>(0,o.jsx)(nw,{item:e,onClick:()=>y(e),isSelected:au(e),isHighlighted:v===e.key},e.key))},null!=u?u:"root"),"top"===z&&F]}),(0,o.jsx)(s8,{path:u})]})})})})]})},au=e=>("toggle"===e.type||"option"===e.type||"switch"===e.type)&&!!e.isChecked,am=e=>{let{placement:t,triggerRectTop:n,triggerRectBottom:s}=e,a=window.innerHeight-s-8-8;if("bottom"===t){let e=n-76-8;return e<160&&a>e?{updatedDropdownSide:"bottom",updatedHeightAvailable:a}:{updatedDropdownSide:"top",updatedHeightAvailable:e}}{let e=n-8-8;return a<160&&e>a?{updatedDropdownSide:"top",updatedHeightAvailable:e}:{updatedDropdownSide:"bottom",updatedHeightAvailable:a}}},ax=e=>{let{placement:t,isDisabled:n}=e,s=(0,h.useRef)(null),a=(0,f.Z)(),{projectUuid:l,prompt:i,model:r,setModel:c,attachments:d,files:u,syncSourceUuids:m,sendMessage:x,stopSampling:p,conversation:v,isSending:j,paprikaMode:y,setPaprikaMode:b,isChatSyncing:w,isProjectSyncing:k,isModelSelectorOpen:C,setIsModelSelectorOpen:M,isNewConversation:N}=(0,T.r)(),S=(0,tW.Ad)(),_=(0,tW.oc)(),E=w||k?a.formatMessage({defaultMessage:"Syncing knowledge...",id:"QuwefnZNVj"}):void 0,Z=(0,h.useMemo)(()=>{var e;return[...u,...null!==(e=null==v?void 0:v.files)&&void 0!==e?e:[]].some(e=>e.file_kind===eC.Y.Image||e.file_kind===eC.Y.SanitizedDocument)},[u,v]),I=(0,h.useCallback)(e=>c(e.model),[c]),{width:A=null}=(0,g.yU)({ref:s,box:"border-box"}),z=null===A||A<480,D=null===A||A<396,L=null!==A&&A<440&&!D,F=(0,tV.jL)();return(0,o.jsxs)("div",{className:"flex gap-2.5 w-full items-center",ref:s,children:[(0,o.jsxs)("div",{className:"relative flex-1 flex items-center gap-2 shrink min-w-0",children:[(0,o.jsx)(ao,{placement:t,canShowDot:null!==A&&D}),!F&&(0,o.jsx)(ar,{placement:t,canShowDot:null!==A&&D}),(S||_)&&(0,o.jsx)(ac,{placement:t,hideIndicatorText:z}),null!==A&&(0,o.jsx)(s$,{hideIndicatorText:z,hideIndicators:D}),(0,o.jsx)(t$,{model:r,projectUuid:l,prompt:i,conversation:v})]}),!F&&(0,o.jsx)(na,{selectedModel:r,onSelect:I,hasMultiModalContent:Z,paprikaMode:y,onPaprikaModeSelect:b,placement:t,open:C,onOpenChange:M,isNewConversation:N,hideModelNameLogo:L}),(0,o.jsx)(nc,{isSending:j,isDisabled:n,disabledReason:E,prompt:i,files:u,attachments:d,syncSourceUuids:m,conversation:v,onSend:()=>x(),onStop:()=>p()})]})};var ap=n(35354),ah=n(75502);let af=()=>{let{onDrop:e}=(0,T.r)();return(0,o.jsx)(ap.rE,{onDrop:e,children:(0,o.jsx)(ag,{})})},ag=()=>{let{dragState:e}=(0,ap.EO)(),t=e===ap.h7.DRAGGING_ON_TARGET;return e===ap.h7.DRAGGING_OFF_TARGET||e===ap.h7.DRAGGING_ON_TARGET?(0,o.jsx)("div",{className:"absolute top-0 border border-dashed rounded-2xl min-h-4 h-full w-full border-accent-secondary-100 bg-bg-000 overflow-hidden z-10",children:(0,o.jsx)("div",{className:(0,m.Z)("flex items-center justify-center h-full w-full transition-colors",t?"bg-accent-secondary-900":"bg-accent-secondary-900/50"),children:(0,o.jsxs)("p",{className:"text-accent-secondary-100 flex flex-row items-center gap-2.5",children:[(0,o.jsx)(ah.E,{size:20,className:"opacity-50"}),(0,o.jsx)(_.Z,{defaultMessage:"Drop files here to add to chat",id:"IYBR/J+nuA"})]})})}):null};var av=n(6688),aj=n(63731);let ay=e=>{let{moveAttachments:t=!1,handleProjectCreated:n,isOpen:s,handleClose:a,syncSources:l=[],attachments:i=[],setSyncSourceUuids:r,setAttachments:c}=e,[d,u]=(0,h.useState)(null),{addError:m}=(0,O.e)(),x=(0,av.G)();return ab({project:d,syncSources:l,attachments:i,setSyncSourceUuids:r,setAttachments:c}),(0,o.jsxs)(G.u_,{isOpen:s,onClose:a,modalSize:"xl",children:[(0,o.jsxs)("div",{className:"flex justify-between items-start",children:[(0,o.jsx)("h1",{className:"font-copernicus text-text-200 mb-4 text-2xl font-medium tracking-tight",children:t?(0,o.jsx)(_.Z,{defaultMessage:"Create a project with attachments",id:"wSxz4Q9mjA"}):(0,o.jsx)(_.Z,{defaultMessage:"Create a project",id:"HR5A+UPiIu"})}),(0,o.jsx)(k.z,{onClick:a,size:"icon",variant:"ghost",children:(0,o.jsx)(eA.X,{size:16})})]}),s&&(0,o.jsx)(aj.hK,{syncSources:t?l:void 0,onProjectCreated:e=>{t&&u(e),n(e)},onError:m,onCancel:a,strings:x})]})},ab=e=>{let{project:t,syncSources:n,attachments:s,setSyncSourceUuids:a,setAttachments:l}=e,i=(0,h.useRef)(!1),{addSuccess:r}=(0,O.e)(),o=(0,f.Z)(),{mutate:c}=(0,eM.u3)(null==t?void 0:t.uuid),{mutate:d}=(0,Z.gr)(null==t?void 0:t.uuid),u=(0,h.useCallback)(()=>{t&&(s.length||n.length&&t.is_private)&&(s.forEach(e=>{let{file_name:t,extracted_content:n}=e;c({file_name:t,content:n})}),t.is_private&&(n.forEach(e=>{let t=(0,nF.hJ)(e);t&&d(t)}),a([])),l([]),r(o.formatMessage({defaultMessage:"Attachments successfully added to {projectName}",id:"xw8MJ6Kd/h"},{projectName:t.name||"your project"})))},[t,r,s,c,l,d,a,n,o]);(0,h.useEffect)(()=>{t&&!i.current&&(i.current=!0,u())},[t,u])};var aw=n(80022),ak=n(42814),aC=n(73107),aM=n(42755),aN=n(34505),aS=n(32598),a_=n(30729),aE=n(64070),aZ=n(30947);let aI=()=>{let{addError:e}=(0,O.e)();return{handleRateLimitError:(t,n)=>{t instanceof aZ.Hx&&429===t.statusCode?e("You’ve reached the limit for Claude messages at this time. Please wait before trying again."):e(n)}}},aA=(0,aE.default)(()=>n.e(8446).then(n.bind(n,38446)).then(e=>({default:e.WritingAnimation})),{loadableGenerated:{webpack:()=>[38446]},ssr:!1}),az={default:{type:"spring",stiffness:650,damping:60},opacity:{type:"tween",ease:"easeOut",duration:.35}},aD=(0,h.forwardRef)((e,t)=>{let{setScreen:n,onStyleChange:s,animateBoolRef:a}=e,i=(0,f.Z)(),r=(0,el.z$)(),[c,d]=(0,h.useState)(!1),[u,m]=(0,h.useState)(""),{handleRateLimitError:g}=aI(),{mutateAsync:v}=(0,ak.GB)(),j=(0,h.useRef)(null),y=(0,h.useRef)(null);(0,h.useEffect)(()=>{c&&setTimeout(()=>{var e;return null===(e=y.current)||void 0===e?void 0:e.focus()},50)},[c]);let[b,C]=(0,h.useState)(!1),[M,N]=(0,h.useState)(!1),S=(0,h.useRef)(null),E=(0,h.useRef)(null),Z=4e3,{handleFileUpload:I,handleTextUpload:A}=function(e){let[t,n]=(0,h.useState)(!1),{activeOrganization:s}=(0,w.t)(),{addError:a}=(0,O.e)(),l=(0,tR.OJ)();return{handleFileUpload:async i=>{if(t||!s)return;if(n(!0),!(0,ek.dF)(i))try{let t=await (0,ek.CL)(i);await e(t),n(!1);return}catch(e){}let r=new FormData;r.append("file",i);try{let t=await l("/api/organizations/".concat(s.uuid,"/convert_document"),{method:"POST",body:r});if(!t.ok)throw Error("Document conversion failed");let n=await t.json();if(!(null==n?void 0:n.extracted_content))throw Error("Document conversion failed: No extracted content");await e(n.extracted_content)}catch(e){a(e instanceof Error?e.message:"Error uploading file")}finally{n(!1)}},handleTextUpload:async a=>{!t&&s&&0!==a.trim().length&&(n(!0),await e(a),n(!1))},isUploading:t}}(async e=>{try{let t=await v({content_example:e});S.current=t}catch(e){g(e,i.formatMessage({defaultMessage:"Failed to create style. Please try again.",id:"GF2W10J5zb"})),C(!1)}}),z=()=>{S.current?s(S.current,!0):(Z=1e3,E.current=setTimeout(z,Z))},D=async()=>{F(),await A(u)},T=async e=>{let t=Array.from(e.dataTransfer.files);t&&(N(!0),setTimeout(F,20),await I(t[0]))},L=async e=>{let t=e.target.files;t&&(F(),await I(Array.from(t)[0])),e.target.value=""},F=()=>{C(!0),E.current=setTimeout(z,Z)};return(0,o.jsx)(p.E.div,{ref:t,className:"w-full h-full grid place-items-center",exit:{opacity:0,scale:.8},transition:a.current?az:{duration:0},children:(0,o.jsxs)(x.M,{mode:"popLayout",children:[b&&(0,o.jsx)(p.E.div,{className:"w-full h-full grid place-items-center",initial:{opacity:0},animate:{opacity:1},transition:az,children:(0,o.jsx)(aL,{})},"CreateStyleAnalyzingContentScreen"),!b&&(0,o.jsxs)(p.E.div,{className:"w-full h-full pt-1 flex flex-col sm:grid sm:grid-cols-2 sm:gap-4",children:[(0,o.jsxs)(p.E.div,{exit:{opacity:0,y:40,transition:az},className:"sm:h-full text-center flex flex-col gap-2 items-center justify-center px-2 pt-8 pb-8 sm:pt-14 sm:pb-20",children:[(0,o.jsx)("div",{className:"relative pb-2 w-full flex items-center justify-center",children:(0,o.jsx)(aA,{})}),(0,o.jsx)("p",{className:"text-text-300 font-tiempos sm:text-lg",children:(0,o.jsx)(_.Z,{defaultMessage:"Share a writing example or describe your style and Claude will make a custom writing style tailored just for you.",id:"2qm6Zfzfx3"})})]},"CreatStyleStartScreenExplainer"),(0,o.jsx)(p.E.div,{className:"h-full flex-1",exit:{opacity:0,x:0,scale:.8,transition:{basicTransition:az}},children:c?(0,o.jsxs)("div",{className:"h-full flex flex-col gap-2 p-2 rounded-xl border-0.5 border-border-300",children:[(0,o.jsx)("textarea",{ref:y,className:" flex-1 min-h-0 bg-bg-000 border border-border-200 p-3 leading-5 rounded-lg transition-colors hover:border-border-100 placeholder:text-text-500 focus:border-accent-secondary-100 focus:ring-0 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 whitespace-pre-wrap resize-none",name:"inputText",placeholder:i.formatMessage({defaultMessage:"Paste at least a few paragraphs of example writing, including from multiple various sources if you’d like, for Claude to analyze and the match style of...",id:"mC+9IzmmMY"}),value:u,onChange:e=>m(e.target.value),required:!0}),(0,o.jsxs)("div",{className:"flex gap-2 justify-center",children:[(0,o.jsx)(k.z,{variant:"secondary",onClick:()=>d(!1),children:(0,o.jsx)(_.Z,{defaultMessage:"Cancel",id:"47FYwba+bI"})}),(0,o.jsx)(k.z,{onClick:D,children:(0,o.jsx)(_.Z,{defaultMessage:"Create style",id:"OC52fhpn7g"})})]})]}):(0,o.jsxs)(ap.rE,{className:"w-full h-full text-center border-dashed border border-border-300 bg-bg-000 rounded-xl relative grid place-items-center",onDrop:T,children:[(0,o.jsx)(aT,{showDropCover:M},"DropZoneOverlay"),(0,o.jsx)("input",{ref:j,type:"file",className:"hidden",accept:(0,ek.tB)({imagesEnabled:!1}).join(","),onChange:L,multiple:!0}),(0,o.jsxs)("div",{children:[(0,o.jsxs)(t0.Lt,{trigger:(0,o.jsx)(k.z,{variant:"flat",className:"mt-2 font-medium !text-accent-secondary-100 bg-accent-secondary-900 hover:!bg-accent-secondary-100/15 gap-2",prepend:(0,o.jsx)(aC.$,{weight:"bold"}),children:(0,o.jsx)(_.Z,{defaultMessage:"Add writing example",id:"EhXT0lXWRc"})}),children:[(0,o.jsx)(t0.hP,{children:(0,o.jsxs)("div",{className:"flex items-center gap-2",onClick:()=>{j.current&&j.current.click()},children:[(0,o.jsx)(aM.p,{size:16}),(0,o.jsx)(_.Z,{defaultMessage:"Upload from device",id:"vMaZk5Jcnv"})]})}),(0,o.jsx)(t0.hP,{onClick:()=>d(!0),children:(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)(aN.P,{size:16}),(0,o.jsx)(_.Z,{defaultMessage:"Paste text content",id:"nVQ9XcjUIh"})]})})]}),(0,o.jsxs)("div",{className:"text-xs text-text-400 mt-3 flex flex-col gap-1 max-sm:pb-8",children:[(0,o.jsx)("p",{children:window.innerWidth<=640?(0,o.jsx)(_.Z,{defaultMessage:"Select or paste existing doc, post, message, etc.",id:"7oFd31Vmu3"}):(0,o.jsx)(_.Z,{defaultMessage:"Select, drop, or paste existing doc, post, message, etc.",id:"ugXnNZ7Ix/"})}),(0,o.jsx)("p",{children:(0,o.jsx)(_.Z,{defaultMessage:"Content is not stored after matching style.",id:"bLEGIyr72h"})})]})]}),(0,o.jsx)("div",{className:"absolute w-full bottom-6",children:(0,o.jsx)(k.z,{variant:"underline",size:"inline",className:"text-sm gap-1.5",prepend:(0,o.jsx)(aS.x,{}),onClick:()=>{r.track({event_key:"styles.custom.describe_clicked"}),n(l.CREATE_MANUALLY)},children:(0,o.jsx)(_.Z,{defaultMessage:"Describe style instead",id:"p6hP+KeXkD"})})})]})},"CreatStyleStartScreenDropZone")]},"CreatStyleStartScreen")]})})});aD.displayName="CreateStyle";let aT=e=>{let{showDropCover:t}=e,{dragState:n}=(0,ap.EO)(),s=n===ap.h7.DRAGGING_OFF_TARGET||n===ap.h7.DRAGGING_ON_TARGET||t;return(0,o.jsx)(x.M,{children:s&&(0,o.jsx)(p.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},className:(0,m.Z)("absolute -inset-px z-10 flex flex-col justify-center rounded-xl border border-dashed transition-colors",n===ap.h7.DRAGGING_ON_TARGET||t?"bg-accent-secondary-900 border-accent-secondary-200 text-accent-secondary-000":"bg-bg-100 border-border-200 text-text-300"),children:(0,o.jsxs)("div",{className:"py-1.5 text-center",children:[(0,o.jsx)("div",{className:"relative inline-block opacity-60",children:(0,o.jsx)(a_.y,{size:36,weight:"thin"})}),(0,o.jsx)("div",{className:"font-tiempos pt-2 pb-4 italic tracking-tight",children:(0,o.jsx)(_.Z,{defaultMessage:"Drop example writing here to match the style",id:"VcDT1Dt8dq"})})]})},"drop-zone-overlay")})},aL=()=>(0,o.jsxs)("div",{className:"flex flex-col items-center gap-4",children:[(0,o.jsx)(aA,{animate:!0}),(0,o.jsx)(p.E.div,{className:"font-tiempos italic text-lg",initial:{opacity:0,y:-15},animate:{opacity:1,y:0},transition:{opacity:{delay:.2,ease:"easeOut",duraation:.6},y:{delay:.2,type:"spring",stiffness:230,damping:20}},children:(0,o.jsx)(_.Z,{defaultMessage:"Analyzing your writing...",id:"AnDnGKCn6M"})})]});var aF=n(30028),aR=n(17764),aP=n(99851),aO=n(24038);let aU={objective:{label:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(aF.V,{})," ",(0,o.jsx)(_.Z,{defaultMessage:"Define style objective",id:"gJB/90MGQ7"})]}),description:"Describe the main purpose and goal of this writing style — whether to teach, analyze, persuade, inspire, etc.",placeholder:"Try something like:\nI want to teach complex topics step-by-step, with a focus on building understanding.",promptPrepend:"I’d like the writing to serve this purpose:"},audience:{label:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(aO.E,{})," ",(0,o.jsx)(_.Z,{defaultMessage:"Tailor to an audience",id:"TYdBxyl/f3"})]}),description:"Describe details of the target audience you’d like Claude to write for including relevant information, needs, or preferences.",placeholder:"Try something like:\nWrite for marketing professionals. They’re tech-savvy and appreciate a dash of humor with their data.",promptPrepend:"I’d like to tailor this style to a specific audience:"},voicetone:{label:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(aR.i,{})," ",(0,o.jsx)(_.Z,{defaultMessage:"Use specific voice & tone",id:"1Vo908p7lJ"})]}),description:"Think about characteristics like formality, emotion, personality, and how you want the written responses to feel.",placeholder:"Try something like:\nWrite in a warm, approachable tone with light professional humor - like a friendly mentor.",promptPrepend:"I’d like to write in this voice and tone:"},general:{label:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(aS.x,{})," ",(0,o.jsx)(_.Z,{defaultMessage:"Describe generally",id:"f3JnPS+B3+"})]}),description:"Describe in detail how you would like Claude to write. Be as specific as you can.",placeholder:"Try something like:\nWrite like an excited scientist explaining fascinating discoveries - technical but energetic.",promptPrepend:"I’d like to write like this:"},custom:{label:(0,o.jsx)(_.Z,{defaultMessage:"Use custom instructions (advanced)",id:"hSfu0Sz47T"}),description:"Write exact custom instructions for this style instead of generating a style prompt automatically. Claude will ignore instructions that don’t follow our guidelines.",placeholder:"Write style custom instructions here...",promptPrepend:""}},aG=(0,h.forwardRef)((e,t)=>{let{setScreen:n,onStyleChange:s}=e,a=(0,f.Z)(),i=(0,el.z$)(),[r,c]=(0,h.useState)(!1),[d,u]=(0,h.useState)(""),[g,v]=(0,h.useState)(Object.keys(aU)[0]),{handleRateLimitError:j}=aI(),{mutateAsync:y}=(0,ak.GB)(),b=(0,h.useRef)(null);(0,h.useEffect)(()=>{setTimeout(()=>{var e;return null===(e=b.current)||void 0===e?void 0:e.focus()},50)},[g]);let w=d.replace(/\s/g,"").length>24,C=async()=>{if(!r&&w){c(!0);try{let e="custom"===g?{prompt:d}:{input_text:aU[g].promptPrepend+"\n"+d},t=await y(e);s(t,!1)}catch(e){j(e,a.formatMessage({defaultMessage:"Failed to create style. Please try again.",id:"GF2W10J5zb"}))}finally{c(!1)}}},M=e=>{i.track({event_key:"styles.custom.describe_selected",key:e}),v(e)};return(0,o.jsxs)(p.E.div,{ref:t,className:"w-full h-full flex flex-col sm:grid sm:grid-cols-2 gap-4 pt-3",children:[(0,o.jsxs)("div",{className:"flex flex-col sm:h-full sm:pr-3",children:[(0,o.jsxs)("div",{className:"flex-1 text-text-300",children:[(0,o.jsx)("p",{className:"mb-1 sm:mb-2 text-sm font-medium",children:(0,o.jsx)(_.Z,{defaultMessage:"Generate style from a starting point:",id:"cz09/5alWg"})}),(0,o.jsx)("ul",{className:"hidden sm:flex flex-col gap-1.5",children:Object.keys(aU).map(e=>(0,o.jsx)("li",{children:(0,o.jsxs)("button",{className:(0,m.Z)("flex gap-1.5 items-center font-styrene h-11 rounded-lg border border-border-400 hover:border-border-300 px-3 w-full text-left transition active:scale-[1.015] hover:bg-bg-200",g===e&&"!bg-accent-secondary-900 text-accent-secondary-000 !border-accent-secondary-100/80","custom"===e&&"mt-2 text-sm"),onClick:()=>M(e),children:[(0,o.jsx)("div",{className:"w-4 h-4 rounded-full bg-bg-100 grid place-items-center border border-border-300 mr-1",children:g===e&&(0,o.jsx)("div",{className:"w-2.5 h-2.5 rounded-full bg-accent-secondary-100"})}),aU[e].label]})},e))}),(0,o.jsx)("div",{className:"sm:hidden",children:(0,o.jsx)(t0.Lt,{trigger:(0,o.jsx)(k.z,{variant:"ghost",append:(0,o.jsx)(t5.p,{}),className:"w-full !border !border-border-300",children:(0,o.jsx)("div",{className:"flex-1 text-left flex items-center gap-1",children:aU[g].label})}),children:Object.keys(aU).map(e=>(0,o.jsx)(t0.hP,{onSelect:()=>M(e),children:(0,o.jsx)("div",{className:"flex items-center gap-1",children:aU[e].label})},e))})})]}),(0,o.jsx)("div",{className:"mb-4 max-sm:hidden",children:(0,o.jsx)(k.z,{variant:"underline",size:"inline",className:"text-sm gap-1",onClick:()=>n(l.CREATE),prepend:(0,o.jsx)(aP.D,{}),children:(0,o.jsx)(_.Z,{defaultMessage:"Never mind, I’ll add an example",id:"PpPoeCEz4X"})})})]}),(0,o.jsxs)("form",{className:"flex flex-col h-full rounded-xl border-0.5 border-border-300 bg-bg-200 px-3 py-2 gap-2",onSubmit:e=>{e.preventDefault(),C()},children:[(0,o.jsx)("p",{className:"pt-0 p-1 text-text-300 font-tiempos max-sm:text-sm",children:aU[g].description}),(0,o.jsxs)("div",{className:"relative flex-1 w-full",children:[(0,o.jsx)("textarea",{ref:b,className:" min-h-0 w-full h-full bg-bg-000 border border-border-200 p-3 leading-snug rounded-lg transition-colors hover:border-border-100 placeholder:text-text-500 focus:border-accent-secondary-100 focus:ring-0 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 whitespace-pre-wrap resize-none",name:"inputText",placeholder:aU[g].placeholder,value:d,required:!0,onChange:e=>u(e.target.value)}),(0,o.jsx)(x.M,{children:d.length>0&&!w&&(0,o.jsx)(p.E.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeIn",duration:.1},className:"absolute bottom-1 right-1 left-1 py-2 px-2 rounded-md text-sm bg-accent-secondary-900 text-text-200 text-center",children:(0,o.jsx)(_.Z,{defaultMessage:"Be as descriptive as possible to help Claude generate the best possible style for you",id:"3ObAHHjHgF"})})})]}),(0,o.jsx)(t1.u,{tooltipContent:w?"":a.formatMessage({defaultMessage:"More description needed in order to generate style",id:"vX4dBOsKs3"}),side:"bottom",className:"text-center",children:(0,o.jsx)("div",{className:"flex items-center w-full justify-center pb-1",children:(0,o.jsx)(k.z,{className:"w-full",type:"submit",loading:r,disabled:!w,children:"custom"===g?(0,o.jsx)(_.Z,{defaultMessage:"Create style",id:"OC52fhpn7g"}):(0,o.jsx)(_.Z,{defaultMessage:"Generate style",id:"tILvvoBa87"})})})})]})]})});aG.displayName="CreateStyleManually";var aH=n(72538),aK=n(42253),aB=n(59308),aW=n(87896),aV=n(34141),aY=n(26608),aq=n(52681),aQ=n(38459);function aJ(){let[e,t]=(0,eI.R)("userHiddenStyles",[]),n=(0,h.useCallback)(e=>{let n=st(e);t(e=>[...e,n])},[t]),s=(0,h.useCallback)(()=>{t([])},[t]),a=(0,h.useCallback)(t=>t.filter(t=>{let n=st(t);return!e.includes(n)}),[e]);return{hiddenPresetStyles:e,setHiddenPresetStyles:t,addHiddenPresetStyle:n,resetHiddenPresetStyles:s,filterHiddenStyles:a}}(a=i||(i={})).VIEW="view",a.EDIT="edit",a.EDIT_MANUALLY="edit_manually";let aX=er.z.array(er.z.object({key:er.z.string(),name:er.z.string(),nameKey:er.z.string().optional(),text:er.z.string(),textKey:er.z.string().optional()})),a$=[],a0=()=>(0,u.Zr)("claude_style_previews","previewExamples",a$,aX),a1=e=>{let{isSaveButton:t,children:n}=e;return(0,o.jsx)("div",{className:(0,m.Z)("flex gap-1.5",t?"sm:absolute sm:top-5 sm:right-16 max-sm:mt-3 max-sm:-mb-2":"absolute top-5 right-16"),children:n})},a2=(0,h.forwardRef)((e,t)=>{let{animateBoolRef:n,style:s,setCurrentStyle:a,returnToListScreen:l,setChatStyle:i,setIsEditing:r,setIsEditingName:c}=e,d=(0,f.Z)(),u=st(s),m="default"===s.type,[x,g]=(0,h.useState)("view"),{mutateAsync:v}=(0,ak.fq)(u,m),{handleRateLimitError:j}=aI(),y=async e=>{let{prompt:t,editInput:n}=e;try{let e=await v({prompt:t,edit_instructions:n});e&&a(e)}catch(e){throw j(e,d.formatMessage({defaultMessage:"Failed to edit style. Please try again.",id:"1WkY08RVLW"})),Error}},b=e=>{r("edit"===e||"edit_manually"===e),g(e)};return(0,o.jsxs)(p.E.div,{className:"flex-1 min-h-0 grid sm:grid-cols-2 gap-3 pt-3",ref:t,children:["view"===x&&(0,o.jsxs)(a1,{children:[(0,o.jsx)(k.z,{variant:"secondary",className:"text-sm max-sm:hidden",onClick:()=>i(s),children:(0,o.jsx)(_.Z,{defaultMessage:"Use style",id:"f7VY0ldE+0"})}),(0,o.jsx)(a6,{style:s,returnToListScreen:l,onRename:()=>c(!0),setStateToManualEdit:()=>b("edit_manually")})]}),(0,o.jsxs)(p.E.div,{className:"min-h-0",initial:!!n.current&&{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{scale:{type:"spring",stiffness:230,damping:15,delay:.1},opacity:{duration:.3,delay:.1}},children:["view"===x&&(0,o.jsx)(a7,{style:s,onClick:()=>b("edit")}),"edit"===x&&(0,o.jsx)(a5,{style:s,updateStyle:y,onClose:()=>b("view")}),"edit_manually"===x&&(0,o.jsx)(a3,{style:s,updateStyle:y,onClose:()=>b("view")})]}),(0,o.jsx)(a4,{style:s,animateBoolRef:n})]})});a2.displayName="EditStyle";let a5=e=>{let{style:t,updateStyle:n,onClose:s}=e,a=(0,f.Z)(),l=(0,h.useRef)(t.prompt),i=(0,h.useRef)(null),[r,c]=(0,h.useState)(!1),[d,u]=(0,h.useState)(!1),[g,v]=(0,h.useState)([]),[j,y]=(0,h.useState)(""),b=async e=>{if(e.preventDefault(),r||d)return!1;await w(j)},w=async e=>{y(""),c(!0),v([...g,e]);try{await n({editInput:e})}catch(e){y(j),v(e=>e.slice(0,-1))}c(!1)},C=async()=>{g.length&&(u(!0),await n({prompt:l.current}),u(!1)),s()},M=(0,h.useMemo)(()=>{if(!t.attributes)return[];let e=Math.floor(Math.random()*t.attributes.length),n=e+1<t.attributes.length?e+1:e-1;return[a.formatMessage({defaultMessage:"A bit more {attribute}",id:"au1WTQvqDg"},{attribute:t.attributes[e].name.toLowerCase()}),a.formatMessage({defaultMessage:"Much less {attribute}",id:"dIbq/Ow8Zn"},{attribute:t.attributes[n].name.toLowerCase()})]},[t.attributes,a]);return(0,h.useEffect)(()=>{if(g.length>0){var e;null===(e=i.current)||void 0===e||e.scrollTo({top:i.current.scrollHeight,behavior:"smooth"})}},[g,t.summary]),(0,o.jsxs)("div",{className:"h-full flex flex-col",children:[(0,o.jsxs)("div",{className:"flex-1 min-h-0 flex flex-col gap-2 p-2.5 rounded-xl border border-accent-secondary-100/50 bg-bg-100 ",children:[(0,o.jsxs)("div",{className:(0,m.Z)("border-0.5 rounded-lg p-3 pt-2.5 mb-2 relative transition bg-gradient-to-b",r?"border-border-300 from-accent-secondary-900/50 to-accent-secondary-900/10":"border-accent-secondary-100/50 from-accent-secondary-900/75 to-accent-secondary-900/25"),children:[(0,o.jsx)("div",{className:(0,m.Z)("font-tiempos font-normal text-pretty leading-snug tracking-tight text-text-200 transition",r?"opacity-0 scale-[0.975]":"delay-150 duration-150 ease-out"),children:t.summary}),(0,o.jsx)(x.M,{children:r&&(0,o.jsx)(p.E.div,{className:"absolute inset-0 grid place-items-center",initial:{scale:.75,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.75,opacity:0},children:(0,o.jsx)(aH.p,{state:"thinking"})})})]}),(0,o.jsx)("ul",{ref:i,className:"flex-1 min-h-0 overflow-y-auto flex flex-col gap-2",children:g.map(e=>(0,o.jsx)("li",{children:(0,o.jsx)("div",{className:"inline-block py-2 px-3 rounded-lg bg-bg-300 text-sm",children:e})},e))}),g.length>0?(0,o.jsx)("div",{className:"text-sm text-center text-text-500",children:(0,o.jsx)(_.Z,{defaultMessage:"Ask for more edits, save, or discard changes",id:"zOxoAYYCog"})}):(0,o.jsxs)("div",{className:"mb-2",children:[(0,o.jsx)("div",{className:"text-sm text-text-500 mb-2",children:(0,o.jsx)(_.Z,{defaultMessage:"Describe how you’d like to edit the style, like:",id:"PRDvfjUkNA"})}),(0,o.jsx)("ul",{className:"flex flex-col gap-2",children:M.map((e,t)=>(0,o.jsx)("li",{children:(0,o.jsx)("button",{onClick:t=>{t.preventDefault(),w(e)},className:"text-sm font-medium h-8 px-3 rounded-full border-0.5 border-border-200 text-text-200 bg-gradient-to-b hover:text-text-000 hover:from-bg-400/0 hover:to-bg-400/50 hover:border-border-100 active:scale-x-[0.985] active:scale-y-[0.995] transition",children:e})},t))})]}),(0,o.jsx)("form",{className:"mb-1.5 mx-0.5",onSubmit:e=>b(e),children:(0,o.jsx)(q.oi,{autoFocus:!0,className:"w-full",name:"inputText",placeholder:a.formatMessage({defaultMessage:"Ask Claude to edit the style...",id:"5D1Fao75P8"}),size:"lg",value:j,onChange:e=>y(e.target.value),append:(0,o.jsx)(x.M,{children:j.length>0&&(0,o.jsx)(p.E.div,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},exit:{scale:.85,opacity:0,transition:{ease:"easeIn",duration:.1}},children:(0,o.jsx)(k.z,{type:"submit",size:"icon_sm",variant:"flat",disabled:r||d,children:(0,o.jsx)(aK.a,{})})})})})})]}),(0,o.jsxs)(a1,{isSaveButton:!0,children:[(0,o.jsx)(k.z,{onClick:s,disabled:r||d||j.length>0||0===g.length,children:(0,o.jsx)(_.Z,{defaultMessage:"Save changes",id:"X0ha1a+WYV"})}),(0,o.jsx)(k.z,{onClick:C,disabled:r,loading:d,variant:"secondary",children:g.length>0?(0,o.jsx)(_.Z,{defaultMessage:"Discard",id:"nmpevlUATU"}):(0,o.jsx)(_.Z,{defaultMessage:"Cancel",id:"47FYwba+bI"})})]})]})},a3=e=>{let{style:t,updateStyle:n,onClose:s}=e,[a,l]=(0,h.useState)(!1),[i,r]=(0,h.useState)(t.prompt),c=(0,f.Z)(),d=async e=>{e.preventDefault(),l(!0),await n({prompt:i}),l(!1),s()};return(0,o.jsxs)("form",{className:"flex flex-col gap-2 h-full min-h-0 p-3 pt-2 rounded-xl border-0.5 border-border-200",onSubmit:e=>d(e),children:[(0,o.jsx)("div",{className:"text-center text-sm text-text-200 font-medium",children:(0,o.jsx)(_.Z,{defaultMessage:"Edit style instructions manually",id:"+qSf1b/LLJ"})}),(0,o.jsx)("textarea",{className:" flex-1 min-h-0 bg-bg-000 border border-border-200 p-3 leading-5 rounded-lg transition-colors hover:border-border-100 placeholder:text-text-500 focus:border-accent-secondary-100 focus:ring-0 focus:outline-none disabled:cursor-not-allowed disabled:opacity-50 whitespace-pre-wrap resize-none",name:"inputText",placeholder:c.formatMessage({defaultMessage:"Describe your style instructions",id:"nk7EX3l+b4"}),value:i,disabled:a,onChange:e=>r(e.target.value),autoFocus:!0}),(0,o.jsxs)(a1,{isSaveButton:!0,children:[(0,o.jsx)(k.z,{type:"submit",loading:a,children:(0,o.jsx)(_.Z,{defaultMessage:"Save changes",id:"X0ha1a+WYV"})}),(0,o.jsx)(k.z,{onClick:()=>{r(t.prompt),s()},disabled:a,variant:"secondary",children:(0,o.jsx)(_.Z,{defaultMessage:"Cancel",id:"47FYwba+bI"})})]})]})},a7=e=>{let{style:t,onClick:n}=e,s="default"===t.type;return(0,o.jsxs)("div",{className:(0,m.Z)("flex flex-col items-center h-full px-6 gap-4 rounded-lg sm:rounded-xl max-sm:mx-1.5",!s&&"bg-gradient-to-b from-accent-secondary-900/75 to-accent-secondary-900/25 border border-accent-secondary-100/50",s&&"bg-bg-300 border border-border-300"),children:[(0,o.jsx)("div",{className:"flex-1",children:(0,o.jsx)("div",{className:(0,m.Z)("w-fit px-4 py-2 pb-2.5 gap-2.5 rounded-b-lg font-medium text-xs tracking-tight",s?"bg-bg-400 text-text-300":"bg-accent-secondary-200/10 text-accent-secondary-100"),children:s?(0,o.jsx)(_.Z,{defaultMessage:"Preset style",id:"qwpRSZtBAV"}):(0,o.jsx)(_.Z,{defaultMessage:"Your custom style",id:"o/vLK7B7mw"})})}),(0,o.jsxs)("div",{className:"flex flex-col items-center gap-1.5 pb-4",children:[!s&&(0,o.jsx)(t1.u,{className:"text-center",tooltipContent:(0,o.jsx)(_.Z,{defaultMessage:"Full style instructions are generated and include more than shown in summary. You can edit instructions manually from the options menu",id:"R5PMcY1ELo"}),children:(0,o.jsxs)("div",{className:"flex items-center gap-1 cursor-help opacity-50 hover:opacity-60",children:[(0,o.jsx)("span",{className:"text-sm font-medium",children:(0,o.jsx)(_.Z,{defaultMessage:"Style summary",id:"hVmQ4DO8io"})}),(0,o.jsx)(s6.k,{size:12,className:"translate-y-px",weight:"bold"})]})}),(0,o.jsx)("div",{"data-testid":"style-summary",className:"font-tiempos text-xl font-normal text-pretty leading-snug tracking-tight text-center flex-1 flex items-center",children:"default"===t.type&&t.summaryKey?(0,o.jsx)(d.d7,{id:t.summaryKey}):t.summary})]}),(0,o.jsx)("div",{className:"flex-1 flex items-center text-sm",children:s?(0,o.jsx)(_.Z,{defaultMessage:"Preset styles are not editable",id:"qjKy0s/reb"}):(0,o.jsx)(k.z,{variant:"outline",onClick:n,className:"!border-accent-secondary-200 !text-accent-secondary-000 hover:!bg-accent-secondary-100/10",prepend:(0,o.jsx)(aq.A,{weight:"bold"}),children:(0,o.jsx)(_.Z,{defaultMessage:"Edit with Claude",id:"wdKoWlVN+G"})})})]})},a4=e=>{let{style:t,animateBoolRef:n}=e,s=(0,f.Z)(),[a,l]=(0,h.useState)(""),[i,r]=(0,h.useState)(),c=(0,h.useRef)(t.prompt),g=(0,h.useRef)(i),v=a0(),{handleRateLimitError:j}=aI(),{isPending:y,mutateAsync:b}=(0,ak.HK)(),w=(0,h.useCallback)(async()=>{if(i)try{let e=await b({style_prompt:t.prompt,example_key:i.key,example_text:i.textKey?(0,d.Gc)({id:i.textKey,intl:s}):i.text});l(e)}catch(e){j(e,s.formatMessage({defaultMessage:"Failed to preview style. Please try again.",id:"B2A4x/wbTg"}))}},[j,b,i,t.prompt,s]);(0,h.useEffect)(()=>{var e;(c.current!==t.prompt||(null===(e=g.current)||void 0===e?void 0:e.key)!==(null==i?void 0:i.key))&&(c.current=t.prompt,g.current=i,w())},[w,i,t.prompt]);let{value:C}=(0,u.FL)("use_in_house_latex_transformer");return(0,o.jsx)(p.E.div,{className:(0,m.Z)("max-sm:hidden flex flex-col gap-2 h-full min-h-0 p-2 rounded-xl border-0.5 border-border-300 transition-colors",i?"bg-bg-000/70":"bg-bg-000/20"),initial:!!n.current&&{opacity:0,scale:.9},animate:{opacity:1,scale:1},transition:{scale:{type:"spring",stiffness:230,damping:15,delay:.2},opacity:{duration:.3,delay:.2}},children:i?(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"flex items-center text-sm px-2 font-medium text-text-200",children:[(0,o.jsx)(_.Z,{defaultMessage:"Previewing with",id:"tNFdPqESDT"}),(0,o.jsx)(t0.Lt,{align:"center",trigger:(0,o.jsx)(k.z,{variant:"ghost",size:"unset",className:"!px-1 !py-0.5 gap-0.5 !text-accent-secondary-100 hover:!bg-accent-secondary-900",append:(0,o.jsx)(aQ.p,{className:"translate-y-px"}),children:i?i.nameKey?(0,o.jsx)(d.d7,{id:i.nameKey}):i.name:(0,o.jsx)(_.Z,{defaultMessage:"Example",id:"xrCRnH/mKK"})}),children:v.map(e=>(0,o.jsx)(t0.hP,{disabled:y,onClick:()=>r(e),children:e.nameKey?(0,o.jsx)(d.d7,{id:e.nameKey}):e.name},e.key))})]}),(0,o.jsxs)(sI.$,{className:"p-2 pt-0 min-h-0 overflow-y-scroll",children:[(0,o.jsx)("div",{className:"bg-bg-300 -mx-0.5 mb-2 py-1.5 px-2 text-sm rounded-lg text-pretty",children:i.textKey?(0,o.jsx)(d.d7,{id:i.textKey}):i.text}),(0,o.jsx)(x.M,{children:y?(0,o.jsx)("div",{className:"pt-2",children:(0,o.jsx)(aH.p,{state:"writing"})}):(0,o.jsx)(p.E.div,{initial:{opacity:0},animate:{opacity:1},transition:{ease:"easeIn",duration:.25},children:(0,o.jsx)(eE.ux,{className:"font-tiempos flex-1 flex flex-col gap-2",text:a,useInHouseLatexPlugin:C})})})]})]}):(0,o.jsx)("div",{className:"flex-1 grid place-items-center text-center",children:(0,o.jsxs)("div",{className:"w-full",children:[(0,o.jsx)("div",{className:"text-sm text-text-500 font-medium mb-4",children:(0,o.jsx)(_.Z,{defaultMessage:"Preview with an example...",id:"YdUmd5z6YL"})}),(0,o.jsx)("div",{className:"flex flex-wrap justify-center gap-2 w-full",children:v.map(e=>(0,o.jsx)("button",{onClick:()=>r(e),className:"\n                    rounded-full\n                    border-0.5\n                    border-border-300\n                    text-sm\n                    text-text-400\n                    font-medium\n                    h-8\n                    px-3\n                    flex\n                    items-center\n                    bg-gradient-to-b\n                    from-always-black/0\n                    to-always-black/5\n                    hover:bg-accent-secondary-900\n                    hover:text-accent-secondary-000\n                    hover:border-accent-secondary-100/50\n                    transition-colors",children:e.nameKey?(0,o.jsx)(d.d7,{id:e.nameKey}):e.name},e.key))})]})})})},a6=e=>{let{style:t,returnToListScreen:n,onRename:s,setStateToManualEdit:a}=e,l=st(t),i="default"===t.type,{isPending:r,mutateAsync:c}=(0,ak.KM)(l),{addHiddenPresetStyle:d}=aJ(),{clearStoredStyle:u,storedStyle:m}=(0,nP.O)(),{addError:x}=(0,O.e)(),p=(0,f.Z)(),h=async()=>{if(i)d(t),setTimeout(()=>{n()},500);else try{await c(),m&&"uuid"in m&&m.uuid===t.uuid&&u(),n()}catch(e){x(p.formatMessage({defaultMessage:"Failed to delete style. Please try again.",id:"4eIHICfKCI"}))}};return(0,o.jsxs)(t0.Lt,{align:"end",unstyledTrigger:!0,trigger:(0,o.jsxs)(k.z,{variant:"ghost",className:"max-sm:min-w-8 max-sm:px-2 sm:pl-3 sm:pr-2",children:[(0,o.jsxs)("span",{className:"hidden sm:flex items-center gap-1",children:[(0,o.jsx)(_.Z,{defaultMessage:"Options",id:"NDV5MqT9ww"}),"\xa0",(0,o.jsx)(aQ.p,{})]}),(0,o.jsx)("span",{className:"sm:hidden",children:(0,o.jsx)(aB.F,{weight:"bold",size:20})})]}),children:[!i&&(0,o.jsx)(t0.hP,{disabled:r,onClick:()=>{s()},children:(0,o.jsxs)("div",{className:"flex items-center",children:[(0,o.jsx)(aW.z,{className:"mr-2"}),(0,o.jsx)(_.Z,{defaultMessage:"Rename style",id:"sEO8vFphTF"})]})}),"Concise"===l?(0,o.jsx)(t0.AZ,{className:"text-sm",children:(0,o.jsx)(_.Z,{defaultMessage:"Concise style can’t be hidden",id:"zTztS+Om9I"})}):(0,o.jsx)(t0.hP,{className:"pr-0 !text-danger-000",disabled:r,onClick:h,children:i?(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)(aV.M,{}),(0,o.jsx)(_.Z,{defaultMessage:"Hide preset style",id:"z44N28JZYv"})]}):(0,o.jsxs)("div",{className:"flex items-center gap-2",children:[(0,o.jsx)(aY.r,{}),(0,o.jsx)(_.Z,{defaultMessage:"Delete style",id:"fAqSoPl78t"})]})}),!i&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t0.u2,{}),(0,o.jsx)(t0.hP,{onClick:a,children:(0,o.jsx)(_.Z,{defaultMessage:"Edit style manually",id:"H+z4uo2Wfn"})})]})]})},a8=e=>{let{size:t=16,className:n}=e;return(0,o.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",stroke:"currentColor",width:t,height:t,viewBox:"0 0 16 16",className:n,strokeLinecap:"round",strokeLinejoin:"round",children:[(0,o.jsx)("path",{d:"M8.5 4.5c-3 2-4.5 4-5.5 8L2.5 15l1-1.5"}),(0,o.jsx)("path",{d:"M3 4.5c-.5 1.3-.1 5 .4 6.5 0 0 1.9-2 4.1-3 1.8-.8 3.8-.6 4.5-2 .6-1.2-.2-1.7-1.5-1 1.2-.7 4-2 3-3.5-1-1.4-3.5-.1-4.5.8C9 1.9 9 .9 8 1c-1 .1-2 1.5-2.3 2.8 0 0 0-.7-.7-.8-.7-.1-1.6.5-2 1.5Z"}),(0,o.jsx)("path",{d:"M10.5 11v4m-2-2h4"})]})};var a9=n(32411),le=n(92655),lt=n(13344),ln=n(16804);let ls=(0,h.forwardRef)((e,t)=>{let{setScreen:n,styles:s,onStyleChange:a}=e,{hiddenPresetStyles:i,resetHiddenPresetStyles:r}=aJ(),{sortStyles:c,setOrder:d}=function(){let[e,t]=(0,eI.R)("userStylesOrder",[]);return{sortStyles:(0,h.useCallback)(t=>[...t].sort((t,n)=>{let s=st(t),a=st(n);if("Default"===s)return -1;if("Default"===a)return 1;let l=e.indexOf(s),i=e.indexOf(a);return -1===l&&-1===i?0:-1===l?1:-1===i?-1:l-i}),[e]),stylesOrder:e,setOrder:(0,h.useCallback)(e=>{t(e.map(e=>st(e)))},[t])}}(),[u,m]=(0,h.useState)([]),x=(0,h.useCallback)(e=>{let t=[...i,"Default"];return c(e.filter(e=>!t.includes(st(e))))},[i,c]);(0,h.useEffect)(()=>{m(x(s))},[s,x]);let f=(0,h.useCallback)(e=>{Array.isArray(e)&&(m(e),d(e))},[d]),g=(0,h.useMemo)(()=>s.some(e=>"custom"===e.type),[s]);return(0,o.jsxs)(p.E.div,{exit:{opacity:0,transition:{duration:0}},ref:t,className:"flex-1 min-h-0 flex flex-col -mx-3",children:[(0,o.jsxs)("div",{className:"flex-1 min-h-0",children:[(0,o.jsx)(lt.t.Group,{as:"ul",axis:"y",values:u,onReorder:f,layoutScroll:!0,className:"pl-3 pr-3 pb-2 overflow-y-auto max-h-full [mask-image:linear-gradient(to_top,hsl(var(--always-black)/0%)_0%,_hsl(var(--always-black)/100%)_3%)]",children:u.map(e=>(0,o.jsx)(la,{style:e,onClick:()=>a(e,!1)},st(e)))}),!g&&(0,o.jsxs)(p.E.div,{initial:{opacity:0,scale:.985},animate:{opacity:1,scale:1,transition:{delay:.3,ease:"easeOut",duration:.3}},exit:{opacity:0},className:"flex bg-gradient-to-b from-accent-pro-900/20 to-accent-pro-900/50 py-3 pl-3.5 pr-5 mx-3 rounded-lg border-0.5 border-border-300 text-text-300 text-sm",children:[(0,o.jsx)("div",{className:"font-copernicus font-medium mr-4 text-accent-pro-000 mt-px whitespace-nowrap",children:(0,o.jsx)(_.Z,{defaultMessage:"Tip",id:"4j1TGZubAJ"})}),(0,o.jsx)("p",{children:(0,o.jsx)(_.Z,{defaultMessage:"Choose from preset styles or create your own custom style to tailor elements of Claude’s written responses such as tone, voice, vocabulary, detail level, and more. <link>Learn about styles</link>",id:"pwT6iI4QV7",values:{link:e=>(0,o.jsx)("a",{href:"https://support.anthropic.com/en/articles/10181068-configuring-and-using-styles",className:"underline hover:text-text-000",target:"_blank",children:e})}})})]})]}),(0,o.jsxs)("div",{className:"flex justify-between items-center mt-4 mx-3",children:[(0,o.jsx)(k.z,{onClick:()=>n(l.CREATE),prepend:(0,o.jsx)(a8,{}),children:(0,o.jsx)(_.Z,{defaultMessage:"Create custom style",id:"9y/YEanHck"})}),i.length>0&&(0,o.jsx)(k.z,{variant:"underline",onClick:r,children:(0,o.jsx)(_.Z,{defaultMessage:"Reset preset styles",id:"EITqrHaUNi"})})]})]})});ls.displayName="ListStyles";let la=e=>{let{style:t,onClick:n}=e,s="default"===t.type,a=(0,ln.o)(),[l,i]=(0,h.useState)(!1);return(0,o.jsxs)(lt.t.Item,{value:t,dragListener:!1,dragControls:a,dragTransition:{bounceStiffness:500,bounceDamping:40},onDragStart:()=>i(!0),onDragEnd:()=>i(!1),className:"relative my-2 min-w-0",children:[(0,o.jsxs)("button",{className:(0,m.Z)("\n          flex\n          items-center\n          w-full\n          h-11\n          py-4\n          pl-1\n          pr-3\n          min-w-0\n          rounded-lg\n          transition\n          border-0.5\n          border-border-300\n          bg-bg-100\n          bg-gradient-to-b\n          from-bg-300/0\n          to-bg-300/50\n          select-none\n          relative\n        ",l?"scale-y-[1.015] scale-x-[1.0025] shadow-md":"group hover:enabled:from-accent-secondary-200/0 hover:enabled:to-accent-secondary-200/10 hover:enabled:border-accent-secondary-200/50"),onClick:n,children:[(0,o.jsx)("div",{className:"flex min-w-0 items-center flex-1 pl-7 truncate",children:"default"===t.type&&t.nameKey?(0,o.jsx)(d.d7,{id:t.nameKey}):t.name}),s&&(0,o.jsx)("div",{className:"mr-0.5 rounded-full px-2 py-0.5 bg-text-300/5 text-text-400 font-medium text-[0.625rem]",children:(0,o.jsx)(_.Z,{defaultMessage:"Preset",id:"EucS2pAMVS"})}),(0,o.jsx)("div",{className:"text-accent-secondary-200 opacity-0 scale-50 transition group-hover:scale-100 group-hover:opacity-100",children:s?(0,o.jsx)(a9.o,{}):(0,o.jsx)(aW.z,{})})]}),(0,o.jsx)("div",{onPointerDown:e=>a.start(e),onClick:e=>e.stopPropagation(),className:"w-7 h-7 absolute left-1 top-1/2 -translate-y-1/2 grid place-items-center cursor-move text-text-500 hover:text-accent-secondary-000",children:(0,o.jsx)(le.f,{size:16,weight:"bold"})})]})},ll=e=>{let{openWithScreen:t,onClose:n,styles:s,setChatStyle:a}=e,i=(0,f.Z)(),r=!!t,c=(0,el.z$)(),[u,m]=(0,h.useState)(t||l.LIST),[p,g]=(0,h.useState)(),[v,j]=(0,h.useState)(!1),[y,b]=(0,h.useState)(!1),w=(0,h.useRef)(!1);(0,h.useEffect)(()=>{t&&m(t)},[t]);let C=()=>{w.current=!1,m(l.LIST),j(!1),b(!1)},M=()=>{(!v||window.confirm(i.formatMessage({defaultMessage:"Are you sure? Closing while editing may not synchronize changes.",id:"0XdWZrmwXu"})))&&(c.track({event_key:"styles.modal",open:!1}),C(),n())},N=(e,t)=>{w.current=t,g(e),m(l.EDIT),j(!1),b(!1)};return(0,o.jsx)(G.u_,{modalSize:"xl",title:(e=>{switch(e){case l.CREATE:return(0,o.jsx)("div",{className:"font-copernicus font-normal",children:(0,o.jsx)(_.Z,{defaultMessage:"Create a style",id:"/pKvFi9Ak4"})});case l.CREATE_MANUALLY:return(0,o.jsx)("div",{className:"font-copernicus font-normal",children:(0,o.jsx)(_.Z,{defaultMessage:"Describe your style",id:"Ntblq5cSRe"})});case l.LIST:return(0,o.jsx)("div",{className:"font-copernicus font-normal",children:(0,o.jsx)(_.Z,{defaultMessage:"Customize your styles",id:"dn3MiW/vUH"})});case l.EDIT:return(0,o.jsx)("div",{className:"w-10/12 sm:w-5/12 md:w-7/12",children:y?(0,o.jsx)(li,{style:p,onClose:e=>{e&&g(e),b(!1)}}):(0,o.jsx)("button",{title:p.name,className:"w-full font-copernicus font-normal text-left truncate cursor-text h-9 pr-4 leading-none translate-y-px text-text-200 hover:text-text-000",onClick:()=>!v&&b(!0),children:v?(0,o.jsx)(_.Z,{defaultMessage:"Edit {name}",id:"s3IOQQ+nJU",values:{name:p.name}}):"default"===p.type&&p.nameKey?(0,o.jsx)(d.d7,{id:p.nameKey}):p.name})})}})(u),icon:(e=>{switch(e){case l.CREATE:case l.EDIT:return(0,o.jsx)(k.z,{variant:"ghost",size:"icon_sm",disabled:v,onClick:()=>C(),children:(0,o.jsx)(s9.X,{})});case l.CREATE_MANUALLY:return(0,o.jsx)(k.z,{variant:"ghost",size:"icon_sm",onClick:()=>m(l.CREATE),children:(0,o.jsx)(s9.X,{})});case l.LIST:return null}})(u),isOpen:r,onClose:M,className:"h-[35rem] !bg-gradient-to-b from-bg-100 to-bg-200 !pt-5 !pb-7",prependBeforeCloseButton:(0,o.jsx)(o.Fragment,{children:u===l.LIST&&(0,o.jsx)(t1.u,{tooltipContent:i.formatMessage({defaultMessage:"Learn more about styles ↗",id:"nuhnis5YtY"}),children:(0,o.jsx)("div",{className:"mr-1",children:(0,o.jsx)(k.z,{href:"https://support.anthropic.com/en/articles/10181068-configuring-and-using-styles",variant:"ghost",className:"text-text-300",size:"icon",target:"_blank",children:(0,o.jsx)(aw.H,{size:18})})})})}),hasCloseButton:!0,children:(0,o.jsxs)(x.M,{mode:"popLayout",children:[u===l.CREATE&&(0,o.jsx)(aD,{onStyleChange:N,setScreen:m,animateBoolRef:w},"CreateStyleScreen"),u===l.CREATE_MANUALLY&&(0,o.jsx)(aG,{onStyleChange:N,setScreen:m},"CreateStyleManuallyScreen"),u===l.LIST&&(0,o.jsx)(ls,{setScreen:m,styles:s,onStyleChange:N},"ListStylesScreen"),u===l.EDIT&&p&&(0,o.jsx)(a2,{animateBoolRef:w,style:p,returnToListScreen:C,setIsEditingName:b,setCurrentStyle:g,setIsEditing:j,setChatStyle:e=>{a(e),M()}},"EditStyleScreen")]})})},li=e=>{let{style:t,onClose:n}=e,s=st(t),a="default"===t.type,l=(0,f.Z)(),[i,r]=(0,h.useState)("default"===t.type&&t.nameKey?(0,d.Gc)({id:t.nameKey,intl:l}):t.name),{isPending:c,mutateAsync:u}=(0,ak.fq)(s,a),m=async()=>{n(await u({name:i}))};return(0,o.jsx)("form",{className:"w-full",onSubmit:async e=>{e.preventDefault(),await m()},children:(0,o.jsx)(q.oi,{autoFocus:!0,className:"w-full text-base font-styrene font-normal",value:i,maxLength:64,onChange:e=>r(e.target.value),error:0===i.length,append:(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(k.z,{variant:"ghost",type:"button",size:"unset",className:"w-7 h-7 rounded-md mr-1",onClick:()=>n(),disabled:c,children:(0,o.jsx)(eA.X,{})}),(0,o.jsx)(k.z,{variant:"flat",size:"unset",className:"w-7 h-7 rounded-md",type:"submit",loading:c,children:(0,o.jsx)(t2.J,{weight:"bold"})})]})})})};var lr=n(31275),lo=n(14593);let lc=()=>{let{projectUuid:e,setProjectUuid:t,setSyncSourceUuids:n,setIsUploadingGithubSync:s,syncSourceUuids:a,attachments:l,setAttachments:i}=(0,T.r)(),{styleModalOpenWithScreen:r,setStyleModalOpenWithScreen:c,createProjectModalIsOpen:d,setCreateProjectModalIsOpen:u,githubModalIsOpen:m,setGithubModalIsOpen:x,gmailAuthModalIsOpen:p,setGmailAuthModalIsOpen:f}=sS(),{personalizedStyleOptions:g}=(0,nP.O)(),j=so(),y=(0,h.useCallback)(e=>{n(t=>[...t,e.uuid]),s(!1)},[n,s]),b=(0,v.aP)(a),w=(0,tR.F9)(b);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(ll,{openWithScreen:r,onClose:()=>c(null),styles:g,setChatStyle:e=>j(e.key)}),(0,o.jsx)(lo.m,{isOpen:!!p,onClose:()=>f(!1),callerIdentifier:"inputMenu"}),(0,o.jsx)(ay,{moveAttachments:!!(null==d?void 0:d.moveAttachments),isOpen:!!(null==d?void 0:d.isOpen),handleClose:()=>u(null),handleProjectCreated:e=>{t(e.uuid),u(null)},syncSources:w,attachments:l,setSyncSourceUuids:n,setAttachments:i}),(0,o.jsx)(lr.U,{location:"chat",projectUuid:e,isOpen:m,onClose:()=>x(!1),onCreated:y,setIsUploadingGithubSync:s})]})};function ld(){let e=(0,r._)(["\n  flex\n  flex-col\n  bg-bg-000\n  border-0.5\n  border-border-300\n  mx-2\n  md:mx-0\n  items-stretch\n  transition-all\n  duration-200\n  relative\n  shadow-[0_0.25rem_1.25rem_hsl(var(--always-black)/3.5%)]\n  focus-within:shadow-[0_0.25rem_1.25rem_hsl(var(--always-black)/7.5%)]\n  hover:border-border-200\n  focus-within:border-border-200\n  cursor-text\n  z-10\n  rounded-2xl\n"]);return ld=function(){return e},e}function lu(){let e=(0,r._)(["\n  bg-bg-100 \n  w-full \n  h-2\n"]);return lu=function(){return e},e}function lm(){let e=(0,r._)(["\n  flex \n  w-full \n  min-w-0 \n  flex-col\n"]);return lm=function(){return e},e}let lx=(0,h.forwardRef)((e,t)=>{var n,s,a,l;let{disabled:i,placement:r,placeholder:c,onSubmit:y}=e,b=(0,f.Z)(),{prompt:k,tipTapEditorState:C,projectUuid:M,setPrompt:N,setTipTapEditorState:S,setAttachments:E,setFiles:Z,attachments:I,files:A,syncSourceUuids:z,isUploadingDriveSync:D,isUploadingGithubSync:L,sendMessage:F,conversation:R,isChatSyncing:P,isProjectSyncing:U,setSyncSourceUuids:G,isSending:H,focusInput:K,isFocused:B,setIsFocused:W,promptInputRef:V,willRedirectOnSubmit:Y,hasBlockingWarning:q,isUploadingFile:Q,setIsUploadingFile:J,validateMaxUploadLimit:X,onPasteFiles:$,uploadInputProps:ee,hasAttachments:et,isNewConversation:en,isReplyAllowed:ea}=(0,T.r)();(0,h.useImperativeHandle)(t,()=>({setContent:(e,t,n)=>{N(e,{forceUpdateTiptap:!1}),E("function"==typeof t?t(I):t),Z("function"==typeof n?n(A):n)},sendMessage:F,setAttachments:e=>{E("function"==typeof e?e(I):e)},getAttachments:()=>I})),tO();let{showNewConversationPrompt:el,dismissConversationLengthPrompt:ei}=function(e,t){let[n]=(0,h.useState)(null!=e?e:0),s=(0,u.Zr)("prompt_new_conversation_count","blockInputCount",null,u.we),[a,l]=(0,eI.R)("disissed-prompt-length-warnings",{});return void 0===e||void 0===t||t in a?{showNewConversationPrompt:!1,dismissConversationLengthPrompt:tG()}:{showNewConversationPrompt:null!==s&&n>=s,dismissConversationLengthPrompt:()=>{l(e=>({...e,[t]:!0}))}}}(null==R?void 0:R.messagesSoFar,null==R?void 0:R.id),{fetchInputAutocompletion:er}=(0,j.Vl)(null==R?void 0:R.id),eo=function(e,t,n,s,a,l){let i=function(e,t,n,s){let{addError:a}=(0,O.e)(),l=(0,h.useCallback)(e=>{n(!1),e&&a(e)},[a,n]),{activeOrganization:i}=(0,w.t)(),r=null==i?void 0:i.uuid,c=(0,tR.OJ)(),d=(0,h.useCallback)(async e=>{let t;if(!r)return l((0,o.jsx)(_.Z,{defaultMessage:"Invalid login",id:"m0+xd2UWTk"}));new URL("/api/organizations/".concat(r,"/fetch_url"),window.location.origin).searchParams.set("url",e);try{t=await c("/api/organizations/".concat(r,"/fetch_url?url=").concat(encodeURIComponent(e)))}catch(e){return(0,tP.Tb)(e),l((0,o.jsx)(_.Z,{defaultMessage:"One or more fetches have failed. Try again.",id:"anYsv8zeLR"}))}if(429===t.status)return l("Too many fetch attempts. Please wait and try again later.");if(!t.ok)return"fetch_unsupported_filetype"===(await t.json()).error.code?l():l((0,o.jsx)(_.Z,{defaultMessage:"Fetching failed for one of the URLs. Please try again.",id:"Evnb9+Woth"}));let n=await t.json();return n&&0!==Object.keys(n).length&&n.extracted_content?n:l((0,o.jsx)(_.Z,{defaultMessage:"Text extraction failed for one of the URLs.",id:"Pl7Qm8W+aN"}))},[c,r,l]),{value:m}=(0,u.FL)("hatch_use_web_fetcher");return(0,h.useCallback)(async a=>{if(!m)return;let l=[],i=(0,tF.Yl)(a);if(0!==i.length&&s({numNewPotentialAttachments:i.length})){for(let t=0;t<i.length;t++){let s=i[t];if(e.some(e=>s.endsWith(e.file_name)))continue;n(!0);let a=await d(s);if(!a)return;l.push(a)}l.forEach(e=>(0,tA.Ch)(e)),l.length>0&&t(e=>[...e,...l]),n(!1)}},[m,s,d,n,t,e])}(e,t,n,s),[r,c]=(0,h.useState)(!1);return(0,h.useEffect)(()=>{let e=e=>{"Shift"===e.key&&c(!0)},t=e=>{"Shift"===e.key&&c(!1)};return window.addEventListener("keydown",e),window.addEventListener("keyup",t),()=>{window.removeEventListener("keydown",e),window.removeEventListener("keyup",t)}},[]),(0,h.useCallback)(e=>{var n,o,c;let d=null===(o=e.clipboardData)||void 0===o?void 0:null===(n=o.files)||void 0===n?void 0:n.length,u=null===(c=e.clipboardData)||void 0===c?void 0:c.getData("text/plain"),m=null==u?void 0:u.length;if(m&&!d){let e=(0,tD.g)(u);e&&l(e)}if(d&&!m){s({newUploads:Array.from(e.clipboardData.files)})&&a(e.clipboardData.files),e.preventDefault();return}if(s({numNewPotentialAttachments:1,showError:!1})){if(i(u).catch(console.error),!m||u.length<4e3||r)return;e.preventDefault(),t(e=>{let t="paste.txt",n=1;for(;e.some(e=>e.file_name===t);)n+=1,t="paste-".concat(n,".txt");return[...e,{file_name:t,file_size:u.length,file_type:"txt",extracted_content:u}]})}},[s,t,i,a,l,r])}(I,E,J,X,$,tL()),ec=null!==(n=null==R?void 0:R.projectKnowledgebaseTokens)&&void 0!==n?n:0,[ed]=eH({conversationUUID:null!==(s=null==R?void 0:R.id)&&void 0!==s?s:null,conversationTokensSoFar:null!==(a=null==R?void 0:R.tokensSoFar)&&void 0!==a?a:0,conversationFiles:null!==(l=null==R?void 0:R.files)&&void 0!==l?l:[],projectKnowledgebaseTokens:ec,input:k,attachments:I,syncSourceUuids:z}),eu=es(M),{value:em}=(0,u.FL)("test_gated_strings"),ex=(0,g.O_)(),ep=i||0===k.length&&0===I.length&&0===A.length&&0===z.length||Q||D||L||P||U||q||"will-exceed"===ed||eu||!ea||(null==R?void 0:R.isSampling)===!0,eh=(0,h.useCallback)(async()=>{!ep&&(await F(),y&&y())},[ep,y,F]),ef=(0,h.useCallback)(()=>{W(!0)},[W]),eg=(0,h.useCallback)(()=>{W(!1)},[W]),ev=(0,h.useCallback)(e=>{let t=e.target;"BUTTON"===t.tagName||t.closest("button")||t.closest("[role]")||t.closest("a")||t.closest("input")||t.closest("select")||t.closest("textarea")||K()},[K]),ej=(0,h.useRef)(null),ey=(0,v.aP)(z).map((e,t)=>{let{data:n}=e;return{syncSource:n,uuid:z[t]}}),eb=(0,o.jsx)(x.M,{initial:!1,children:et&&(0,o.jsx)(p.E.div,{className:"overflow-hidden",initial:{height:0},animate:{height:"auto"},exit:{height:0},children:(0,o.jsx)(eX,{isUploadingFile:Q,isUploadingSync:D||L,attachments:I,files:A,syncSourceResults:ey,onRemoveAttachment:e=>{E(t=>t.filter((t,n)=>n!==e))},onRemoveFile:e=>{Z(t=>t.filter((t,n)=>n!==e))},onRemoveSyncSource:e=>{G(t=>t.filter(t=>t!==e))}})},"attachments")});if(!ex)return(0,o.jsxs)(lf,{children:[(0,o.jsx)(lp,{className:"bottom"===r?"h-[99px]":"h-[123px]"}),"bottom"===r&&(0,o.jsx)(lh,{})]});let ew=null;return ew=el?(0,o.jsx)(tK,{onDismiss:ei,projectUuid:M}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"flex flex-col gap-3.5 m-3.5",children:[(0,o.jsx)("div",{className:"relative",children:(0,o.jsx)(tI,{ref:V,prompt:k,setPrompt:N,tipTapEditorState:C,setTipTapEditorState:S,onSubmit:eh,onFocus:ef,onBlur:eg,placement:r,placeholder:null!=c?c:en?em?(0,d.lF)({id:"spread_attempt_mind",intl:b}):b.formatMessage({defaultMessage:"How can I help you today?",id:"XLcM6WHfQR"}):em?(0,d.lF)({id:"window_edge_kiwi",intl:b}):b.formatMessage({defaultMessage:"Reply to Claude...",id:"kSt28+RchS"}),fetchInputAutocompletion:er})}),(0,o.jsx)(ax,{placement:r,isDisabled:ep})]}),(0,o.jsx)(af,{}),eb]}),(0,o.jsxs)(sN,{children:[(0,o.jsxs)(lf,{onPasteCapture:e=>{B&&eo(e)},children:[(0,o.jsx)("input",{ref:ej,id:"chat-input-file-upload","data-testid":"file-upload","aria-hidden":"true",tabIndex:-1,className:"absolute -z-10 h-0 w-0 overflow-hidden opacity-0 select-none",...ee}),(0,o.jsx)("div",{className:"px-3 md:px-2",children:(0,o.jsx)(eW,{placement:"bottom"})}),(0,o.jsx)(lp,{onClick:ev,className:(0,m.Z)(Y&&H&&"animated-loading-background"),children:ew}),"bottom"===r&&(0,o.jsx)(lh,{})]}),(0,o.jsx)(lc,{})]})});lx.displayName="ChatInput";let lp=c.q.div(ld()),lh=c.q.div(lu()),lf=c.q.fieldset(lm())},95606:function(e,t,n){n.d(t,{e:function(){return r}});var s=n(27573),a=n(11607),l=n(10607),i=n(68425);let r=e=>{let{isShown:t,className:n}=e;return t?(0,s.jsx)(i.E.div,{className:(0,l.Z)("bg-bg-500/10 -mb-1 grid h-20 w-28 place-items-center rounded-lg flex-shrink-0",n),initial:{opacity:0,scale:.3},animate:{opacity:1,scale:1},children:(0,s.jsx)(a.Loading,{size:"sm"})}):null}},91217:function(e,t,n){n.d(t,{x:function(){return C},r:function(){return k}});var s=n(27573),a=n(26525),l=n(5161),i=n(64295),r=n(6766),o=n(5362),c=n(7653),d=n(66605),u=n(95899),m=n(92676),x=n(40051),p=n(7680),h=n(18701),f=n(40030),g=n(10690),v=n(18013);let j={type:"doc",content:[{type:"paragraph",content:[]}]},y=e=>!!e&&("INPUT"===e.tagName||"TEXTAREA"===e.tagName||"true"===e.getAttribute("contenteditable")||"textbox"===e.getAttribute("role")),b=e=>{let t=(0,c.useCallback)(t=>{if(!(!e||y(document.activeElement))&&1===t.key.length&&!t.ctrlKey&&!t.altKey&&!t.metaKey){var n;t.preventDefault(),null===(n=e.getEditor())||void 0===n||n.chain().insertContent(t.key).focus().run()}},[e]);(0,c.useEffect)(()=>(document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)),[t])},w=c.createContext({attachments:[],files:[],transitionFiles:[],syncSourceUuids:[],isAtMaxNumUploads:!1,model:"",prompt:"",tipTapEditorState:{},projectUuid:void 0,isChatSyncing:!1,personalizedStyle:void 0,compassLightEnabled:!1,isProjectSyncing:!1,isNewConversation:!1,isProjectLocked:!1,isSending:!1,setPrompt:()=>void 0,setTipTapEditorState:()=>void 0,setAttachments:()=>void 0,setFiles:()=>void 0,setSyncSourceUuids:()=>void 0,setModel:()=>Promise.resolve(),setProjectUuid:()=>void 0,sendMessage:()=>void 0,stopSampling:()=>void 0,conversation:void 0,focusInput:()=>void 0,isFocused:!1,setIsFocused:()=>void 0,promptInputRef:{current:null},willRedirectOnSubmit:!1,hasBlockingWarning:!1,setHasBlockingWarning:()=>void 0,setPersonalizedStyle:()=>void 0,isUploadingDriveSync:!1,isUploadingGithubSync:!1,setIsUploadingDriveSync:()=>void 0,setIsUploadingGithubSync:()=>void 0,includeProfilePreferences:!0,setIncludeProfilePreferences:()=>void 0,paprikaMode:void 0,setPaprikaMode:()=>Promise.resolve(),setPaprikaModeState:()=>void 0,setCompassLightEnabled:()=>void 0,isReplyAllowed:!0,setIsReplyAllowed:()=>void 0,isUploadingFile:!1,setIsUploadingFile:()=>void 0,validateMaxUploadLimit:()=>!1,onDrop:()=>void 0,onPasteFiles:()=>Promise.resolve(),handleUpload:()=>Promise.resolve(),uploadInputProps:{type:"",accept:"",onChange:()=>void 0,multiple:!1,"aria-label":""},hasAttachments:!1,isModelSelectorOpen:!1,setIsModelSelectorOpen:()=>void 0}),k=()=>c.useContext(w),C=e=>{var t,n,y,k,C,M,N,S;let{onSend:_,willRedirectOnSubmit:E,onCreate:Z,onStopSampling:I}=e,A=(0,c.useRef)(null),z="conversation"in e,{children:D,projectUuid:T,namespace:L}=e,F=z?e.conversation:void 0,R=(0,c.useCallback)(()=>{z&&I&&I()},[I,z]);b(A.current);let{tipTapEditorState:P,setTipTapEditorState:O,attachments:U,setAttachments:G,files:H,setFiles:K,syncSourceUuids:B,setSyncSourceUuids:W,clear:V}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0,s=n?"".concat(n,":"):"",[a,l,i]=(0,v.R)("".concat(s).concat(e,":attachment"),[]),[r,o,d]=(0,v.R)("".concat(s).concat(e,":files"),[]),[u,m,x]=(0,v.R)("".concat(s).concat(e,":syncSourceUuids"),[]),[p,h,f]=(0,v.R)("".concat(s).concat(e,":textInput"),t?{type:"doc",content:[{type:"paragraph",content:[{type:"text",text:t}]}]}:j);return{attachments:a,setAttachments:l,files:r,setFiles:o,syncSourceUuids:u,setSyncSourceUuids:m,tipTapEditorState:p,setTipTapEditorState:h,clear:(0,c.useCallback)(()=>{f(),i(),d(),x()},[i,f,d,x])}}(null!==(n=null==F?void 0:F.id)&&void 0!==n?n:void 0===T?"new-conversation":"".concat(T,":conversation"),"",L),Y=P?(0,i.A5)(P):"",[q,Q]=c.useState(Y),J=(0,c.useCallback)(e=>{O(e),Q((0,i.A5)(e))},[O]),X=(0,c.useCallback)(function(e){let{forceUpdateTiptap:t=!0}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(Q(e),O({type:"doc",content:[{type:"paragraph",content:[{type:"text",text:e}]}]}),!0===t){var n;null===(n=A.current)||void 0===n||n.setContent(e)}},[O]),$=(0,d.aP)(B),ee=(0,d.Vw)($),et=(0,o.F9)($),en=U.length+H.length+B.length>=a.Qe,[es,ea]=c.useState(!1),[el,ei]=c.useState(),{stickyModelPreference:er}=(0,r.M)(),eo=null!==(C=null!==(k=null!==(y=null==F?void 0:F.model)&&void 0!==y?y:el)&&void 0!==k?k:er)&&void 0!==C?C:void 0,[ec,ed]=c.useState(),eu=void 0===ec?null==F?void 0:null===(t=F.conversationSettings)||void 0===t?void 0:t.paprika_mode:null!=ec?ec:void 0,em="initialCompassLightEnabled"in e&&null!==(M=e.initialCompassLightEnabled)&&void 0!==M&&M,[ex,ep]=c.useState(em),eh="onSetCompassLightEnabled"in e?e.onSetCompassLightEnabled:null,ef=(0,c.useCallback)(e=>{ep(e),null==eh||eh(e)},[ep,eh]);(0,c.useEffect)(()=>{ep(em)},[em]);let[eg,ev]=c.useState(T),ej=(0,m.AQ)(eg),[ey,eb]=c.useState(!1),[ew,ek]=c.useState(),[eC,eM]=c.useState(!1),[eN,eS]=c.useState(!1),[e_,eE]=c.useState(!1),{storedStyle:eZ,defaultStyle:eI}=(0,x.O)(),[eA,ez]=c.useState(),[eD,eT]=c.useState(!0),[eL,eF]=c.useState(!0);(0,c.useEffect)(()=>{let e=null!=eZ?eZ:eI;!eA&&e&&ez(e)},[eZ,eI,eA]);let eR="setPersonalizedStyleCallback"in e?e.setPersonalizedStyleCallback:null;(0,c.useEffect)(()=>{ek(void 0),eb(!1)},[null==F?void 0:F.id]),(0,c.useEffect)(()=>{null==eR||eR(eA)},[eA,eR]);let{projectHasHarmony:eP}=(0,h.Y)(eg),{openedFiles:eO,projectDocs:eU,projectUuid:eG}=(0,f.b)(),{getInstance:eH}=(0,p.s)(),{mutateAsync:eK}=(0,u.u3)(eG),{mutateAsync:eB}=(0,u.Zy)(eG),eW=(0,c.useCallback)(async()=>{if(A.current&&(""!==q.trim()||0!==U.length||0!==H.length||0!==B.length)){E&&ek([...H]),V(),Q(""),E?A.current.setEditable(!1):A.current.setContent(""),eb(!0),eP&&await (null===g.ec||void 0===g.ec?void 0:(0,g.ec)(eO,eG,eU,eK,eB,eH));try{z&&_?(await _({prompt:q,attachments:U,files:H,syncSources:et,personalized_style:eA}),eb(!1),ek(void 0)):await Z({prompt:q,attachments:U,files:H,syncSources:et,model:eo,project_uuid:eg,personalized_style:eA,include_conversation_preferences:eD,paprika_mode:eu,compass_light:ex})}catch(t){var e;X(q),null===(e=A.current)||void 0===e||e.setContent(q),G(U),K(H),W(B),A.current.setEditable(!0),eb(!1),ek(void 0)}}},[ex,U,V,eK,H,eH,eG,eP,eD,z,eo,Z,_,eO,eu,eA,eU,eg,q,G,K,X,W,B,et,eB,E]),eV=(0,c.useCallback)(async e=>{if(ei(e),z){eb(!0);try{await Z({prompt:q,attachments:U,files:H,syncSources:et,model:e,project_uuid:eg,paprika_mode:eu,compass_light:ex})}finally{eb(!1)}}},[ex,U,H,z,eu,eg,q,Z,et]),eY=(0,c.useCallback)(async e=>{if(ed(e||null),z){eb(!0);try{await Z({prompt:q,attachments:U,files:H,syncSources:et,model:eo,project_uuid:eg,paprika_mode:e,compass_light:ex})}finally{eb(!1)}}},[ex,z,Z,q,U,H,et,eo,eg]),eq=(0,c.useCallback)(()=>{var e;return null===(e=A.current)||void 0===e?void 0:e.focus()},[A]),[eQ,eJ]=c.useState(!1),eX=(0,l.eh)(),[e$,e0,e1,e2,e5,e3,e7,e4]=(0,a.kS)({syncSourceCount:B.length,attachments:U,setAttachments:G,numExistingConversationAttachments:null!==(N=null==F?void 0:F.attachmentsSoFar)&&void 0!==N?N:0,files:H,setFiles:K,numExistingConversationFiles:null!==(S=null==F?void 0:F.files.length)&&void 0!==S?S:0,detectSameAttachment:()=>!1,selectedModel:eo,blobFileUploadsEnabled:eX}),e6=U.length+H.length,e8=B.length,e9=e$||eN||e_,te=e6>0||e8>0||e9,tt=(0,c.useMemo)(()=>{var t;return{prompt:q,tipTapEditorState:P,attachments:U,files:e.willRedirectOnSubmit&&ey?null!=ew?ew:[]:H,syncSourceUuids:B,isAtMaxNumUploads:en,isUploadingDriveSync:eN,isUploadingGithubSync:e_,model:eo,projectUuid:eg,isChatSyncing:ee,personalizedStyle:eA,isProjectSyncing:ej,isNewConversation:void 0===F||0===F.messagesSoFar,isProjectLocked:void 0!==T||void 0!==F,isSending:ey,compassLightEnabled:ex,setPrompt:X,setTipTapEditorState:J,setAttachments:G,setFiles:K,setSyncSourceUuids:W,setModel:eV,setProjectUuid:ev,sendMessage:eW,stopSampling:R,conversation:F,focusInput:eq,isFocused:eC,setIsFocused:eM,promptInputRef:A,willRedirectOnSubmit:null!==(t=e.willRedirectOnSubmit)&&void 0!==t&&t,hasBlockingWarning:eQ,setHasBlockingWarning:eJ,setPersonalizedStyle:ez,setIsUploadingDriveSync:eS,setIsUploadingGithubSync:eE,includeProfilePreferences:eD,setIncludeProfilePreferences:eT,paprikaMode:eu,setPaprikaMode:eY,setPaprikaModeState:ed,setCompassLightEnabled:ef,isReplyAllowed:eL,setIsReplyAllowed:eF,isUploadingFile:e$,setIsUploadingFile:e0,validateMaxUploadLimit:e1,onDrop:e2,onPasteFiles:e5,handleUpload:e3,uploadInputProps:e4,hasAttachments:te,isModelSelectorOpen:es,setIsModelSelectorOpen:ea}},[U,F,H,eq,T,eQ,eD,en,ee,eC,ej,ey,eN,e_,eo,eu,eA,eg,q,e.willRedirectOnSubmit,ex,eW,G,K,eV,eY,X,W,J,R,B,P,ew,ed,eL,eF,e$,e0,e1,e2,e5,e3,e4,te,es,ea,ef]);return(0,s.jsx)(w.Provider,{value:tt,children:D})}},52165:function(e,t,n){n.d(t,{u:function(){return i}});var s=n(27573),a=n(11579),l=n(22235);let i=e=>{let{model:t,hasMultiModalContent:n,paprikaMode:i,hideModelNameLogo:r}=e,o=t.name.replace("Claude",""),c=(0,l.g)(o,t.model,n);return(0,s.jsxs)("div",{className:"font-tiempos inline-flex items-center gap-[3px] text-[14px] h-[14px] leading-none items-baseline",children:[!r&&(0,s.jsx)(a.l,{className:"claude-logo-model-selector block translate-y-[0.5px]",height:11.5}),(0,s.jsx)("div",{className:"flex items-center gap-[4px]",children:(0,s.jsx)("div",{className:"whitespace-nowrap tracking-tight select-none",children:c})})]})}},90377:function(e,t,n){n.d(t,{A:function(){return l}});var s=n(41596);function a(){let e=(0,s._)(["\n  font-normal\n  text-[0.65rem]\n  sm:text-xs\n  w-full\n  flex\n  gap-1.5\n  items-center\n  justify-between\n"]);return a=function(){return e},e}let l=n(9788).q.div(a())},67311:function(e,t,n){n.d(t,{P:function(){return o}});var s=n(27573),a=n(30070),l=n(10607),i=n(7653),r=n(91217);let o=e=>{let{children:t,actionButton:n,title:o,minimalUi:c}=e,{hasBlockingWarning:d,setHasBlockingWarning:u}=(0,r.r)();return(0,i.useEffect)(()=>(u(!0),()=>{u(!1)}),[d,u]),(0,s.jsx)("div",{className:"w-full",children:(0,s.jsxs)("div",{className:"flex w-full flex-col items-center md:flex-row gap-2",children:[(0,s.jsxs)("div",{className:(0,l.Z)("flex flex-row items-center gap-2 md:w-full",c?null:"text-danger-000"),children:[c?null:(0,s.jsx)(a.v,{className:"h-4 w-4 shrink-0",weight:"regular"}),(0,s.jsxs)("div",{children:[o&&(0,s.jsx)("div",{className:"text-sm font-medium",children:o}),(0,s.jsx)("div",{className:"text-sm",children:t})]})]}),!!n&&(0,s.jsx)("div",{className:"-mt-px w-full whitespace-nowrap md:w-fit",children:n})]})})}},82056:function(e,t,n){n.d(t,{F:function(){return o}});var s=n(27573),a=n(8571),l=n(27218),i=n(70354);n(7653);var r=n(45790);function o(){let{allowSelfUpgrade:e=!0}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};switch(function(e){let t=(0,l.w7)(),n=(0,l.z6)(),s=(0,l.D)(),i=(0,l.H1)();return(0,a.Z)()?(i||t)&&e?n||s||i?!t&&s?"subscribe-max":!t&&i?"subscribe-max-20x":"subscribe":"subscribe-pro-only":"none":"contact-sales"}(e)){case"contact-sales":return(0,s.jsx)(c,{});case"subscribe":return(0,s.jsx)(d,{});case"subscribe-pro-only":return(0,s.jsx)(u,{});case"subscribe-max":return(0,s.jsx)(m,{});case"subscribe-max-20x":return(0,s.jsx)(x,{});case"none":return null}}function c(){let{websiteBaseUrl:e}=(0,a.m)();return(0,s.jsx)(i.z,{href:"".concat(e,"/contact-sales"),children:(0,s.jsx)(r.Z,{defaultMessage:"Contact us to upgrade",id:"VifKcG4Va9"})})}function d(){return(0,s.jsx)(i.z,{href:"/upgrade?hide_free=true",children:(0,s.jsx)(r.Z,{defaultMessage:"Upgrade plan",id:"c5+JRMBv/Y"})})}function u(){return(0,s.jsx)(i.z,{href:"/upgrade/pro",children:(0,s.jsx)(r.Z,{defaultMessage:"Upgrade plan",id:"c5+JRMBv/Y"})})}function m(){return(0,s.jsx)(i.z,{href:"/upgrade?hide_pro=true",children:(0,s.jsx)(r.Z,{defaultMessage:"Subscribe to Max",id:"8ACH3Vf732"})})}function x(){return(0,s.jsx)(i.z,{href:"/upgrade",children:(0,s.jsx)(r.Z,{defaultMessage:"Increase usage",id:"Lc0QnIgRuR"})})}},7418:function(e,t,n){n.d(t,{j:function(){return y},k:function(){return f}});var s=n(27573),a=n(99205),l=n(49185),i=n(27218),r=n(70354),o=n(6385),c=n(87033),d=n(43290),u=n(7653),m=n(45790),x=n(90377),p=n(67311),h=n(82056);let f=e=>{let{messageLimit:t}=(0,i.t)(),n=(null==t?void 0:t.type)==="within_limit",l=(0,a.wN)(e),r=n?null:null==t?void 0:t.conversationUUID,o=(0,a.wN)(null!=r?r:null);return(null==t?void 0:t.type)!=="within_limit"&&(null==t?void 0:t.perModelLimit)&&l!==o?{}:(null==t?void 0:t.type)==="exceeded_limit"||(null==t?void 0:t.type)==="approaching_limit"&&0===t.remaining?{messageLimit:t,exceededMessageLimitWarning:(0,s.jsx)(g,{messageLimit:t})}:(null==t?void 0:t.type)==="approaching_limit"?{messageLimit:t,approachingMessageLimitWarning:(0,s.jsx)(v,{messageLimit:t})}:{}};function g(e){let{messageLimit:t}=e,n=(0,i.Cf)(),a=(0,i.ZJ)(),l=(0,i.ue)(),r=(0,i.H1)(),c=(0,h.F)(),u=d.ou.fromSeconds(t.resetsAt);return(0,s.jsxs)(p.P,{actionButton:c,minimalUi:!0,children:[l&&r?(0,s.jsx)(m.Z,{defaultMessage:"Increase usage for uninterrupted work or continue at {time}.",id:"5QbZN4LMkt",values:{time:(0,s.jsx)("span",{className:"inline-block",children:u.toLocaleString(d.ou.TIME_SIMPLE)})}}):a||n||l?(0,s.jsx)(m.Z,{defaultMessage:"Usage limit reached — your limit will reset at {time}.",id:"bXAswF0AK8",values:{time:(0,s.jsx)("span",{className:"inline-block",children:u.toLocaleString(d.ou.TIME_SIMPLE)})}}):(0,s.jsx)(m.Z,{defaultMessage:"You are out of free <link>messages</link> until {time}",id:"PKaisys/Ji",values:{time:(0,s.jsx)("span",{className:"inline-block",children:u.toLocaleString(d.ou.TIME_SIMPLE)}),link:e=>(0,s.jsx)("a",{className:"underline",target:"_blank",rel:"noreferrer",href:o.pz,children:e})}}),(0,s.jsx)(j,{messageLimit:t})]})}let v=e=>{let{messageLimit:t}=e,n=(0,h.F)(),a=(0,i.rW)()?o.m7:o.pz,l=d.ou.fromSeconds(t.resetsAt);return(0,s.jsxs)(x.A,{children:[(0,s.jsx)("span",{children:(0,s.jsx)(m.Z,{defaultMessage:"{remaining, plural, one {# message} other {# messages}} <link>remaining</link> until {time}",id:"E+zOwQdJ1F",values:{remaining:t.remaining,time:(0,s.jsx)("span",{className:"inline-block",children:l.toLocaleString(d.ou.TIME_SIMPLE)}),link:e=>(0,s.jsx)("a",{className:"underline",target:"_blank",rel:"noreferrer",href:a,children:e})}})}),n]})},j=e=>{let{messageLimit:t}=e,{mutate:n}=(0,l.I)(t.conversationUUID),{value:a}=(0,c.FL)("can_reset_rate_limits");return a?(0,s.jsx)(r.z,{className:"ml-2",variant:"secondary",size:"sm",onClick:()=>n(),children:(0,s.jsx)(m.Z,{defaultMessage:"Reset limits",id:"0Lg76lu7jn"})}):null},y=e=>{var t;let{messageLimit:n,activeOrganization:s}=(0,i.t)(),r=(0,l.n)(),o=(0,a.wN)(e),c=(null==n?void 0:n.type)!=="within_limit"&&null!==(t=null==n?void 0:n.conversationUUID)&&void 0!==t?t:null,d=(0,a.wN)(c);(0,u.useEffect)(()=>{(null==s?void 0:s.uuid)&&n&&"within_limit"!==n.type&&d!==o&&r({type:"within_limit"},s.uuid,e)},[e,d,s,n,o,r])}},74187:function(e,t,n){n.d(t,{D:function(){return i},w:function(){return r}});var s=n(27573),a=n(45790),l=n(90377);let i=1e5,r=()=>(0,s.jsx)(l.A,{children:(0,s.jsx)(a.Z,{defaultMessage:"Long prompts or documents may take multiple minutes to respond",id:"bw4uiEG/kB"})})},22235:function(e,t,n){n.d(t,{g:function(){return o}});var s=n(27573),a=n(32737),l=n(87033),i=n(30070),r=n(45790);function o(e,t,n){let{value:o}=(0,l.FL)("claude_ai_cinnamon"),{value:c}=(0,l.FL)("claude_ai_chili");return o&&c&&void 0!==n&&"claude-3-5-haiku-20241022"===t&&n?(0,s.jsxs)(s.Fragment,{children:[e.replace("3.5 Haiku","3 Haiku"),(0,s.jsx)(a.u,{tooltipContent:(0,s.jsx)("div",{className:"text-center",children:(0,s.jsx)(r.Z,{defaultMessage:"Claude 3.5 Haiku does not support images",id:"VkrkeY0z6g"})}),children:(0,s.jsx)(i.v,{className:"inline-block ml-1 translate-y-[-1px]"})})]}):e}},48894:function(e,t,n){n.d(t,{d:function(){return d},b:function(){return c}});var s=n(27573),a=n(18013),l=n(81695),i=n(7653),r=n(20355);let o=(0,i.createContext)({isDrawerExpanded:!1,setIsDrawerExpanded:()=>void 0});function c(){return(0,i.useContext)(o)}function d(e){let{children:t,conversationUUID:n}=e,c=function(e){let t=!!(0,l.useSearchParams)().get("controls")&&!(window.matchMedia&&window.matchMedia("(max-width: 767px)").matches),[n]=(0,a.R)("".concat(e,":chatControlsSidebarIsOpen"),t);return n}(n),{isExpanded:d,setIsExpanded:u}=(0,r.S)(),[m,x]=(0,i.useState)(c),p=(0,i.useRef)({reopenMain:!1}),h=(0,i.useCallback)(e=>{e&&(d&&(p.current.reopenMain=!0),u(!1)),!e&&p.current.reopenMain&&(p.current.reopenMain=!1,u(!0)),x(e)},[d,u,x]);return(0,s.jsx)(o.Provider,{value:{isDrawerExpanded:m,setIsDrawerExpanded:h},children:t})}},40051:function(e,t,n){n.d(t,{O:function(){return r}});var s=n(18013),a=n(87033),l=n(42814);let i=(e,t)=>"default"===e.type&&e.key===t||"custom"===e.type&&e.uuid===t,r=()=>{let{value:e}=(0,a.FL)("concise_mode_enabled"),{data:t,isLoading:n}=(0,l.h9)(),r=(null==t?void 0:t.defaultStyles)||[],o=[...r,...((null==t?void 0:t.customStyles)||[]).map(e=>({...e,key:e.key||e.uuid}))],[c,d,u]=(0,s.R)("claude_personalized_style",null);if(n||!(null==o?void 0:o.length))return{personalizedStyleOptions:[],defaultStyle:null,storedStyle:null,setStoredStyle:d,clearStoredStyle:u,conciseModeEnabled:e};let m=r.length?r.find(e=>!0===e.isDefault)||r[0]:null;if(e&&(m=r.find(e=>"Concise"===e.key)||m),!c)return{personalizedStyleOptions:o,defaultStyle:m,storedStyle:c,setStoredStyle:d,clearStoredStyle:u,conciseModeEnabled:e};let x=o.find(e=>i(e,c.styleKey)),p=Date.now()-new Date(c.timestamp).getTime()>432e5;return{personalizedStyleOptions:o,storedStyle:x&&!p?x:null,defaultStyle:m,setStoredStyle:d,clearStoredStyle:u,conciseModeEnabled:e}}},4746:function(e,t,n){n.d(t,{FeaturePreview:function(){return z},b5:function(){return I},h9:function(){return A}});var s=n(27573),a=n(19170),l=n(18916),i=n(3053),r=n(27218),o=n(27895),c=n(9677),d=n(69321),u=n(7276),m=n(52939),x=n(22523),p=n(32737),h=n(87033),f=n(10607),g=n(35919),v=n.n(g),j=n(50294),y=n(7653),b=n(45790),w=n(40950),k=n(41270),C=n(59016),M=n(95586),N=n(64014);let S=k.z.object({title:k.z.string(),description:k.z.string(),shortDescription:k.z.string().optional(),titleKey:k.z.string().optional(),descriptionKey:k.z.string().optional(),shortDescriptionKey:k.z.string().optional()}),_=k.z.object({preview_feature_uses_artifacts:S.optional(),preview_feature_uses_latex:S.optional(),preview_feature_uses_citations:S.optional(),preview_feature_uses_harmony:S.optional(),enabled_artifacts_attachments:S.optional(),enabled_turmeric:S.optional(),enabled_gdrive:S.optional(),enabled_bananagrams:S.optional(),enabled_web_search:S.optional(),enabled_compass:S.optional(),enabled_sourdough:S.optional(),enabled_foccacia:S.optional()}),E={},Z=(0,y.createContext)({openFeaturePreviewModal:v()}),I=e=>{let{children:t}=e,[n,a]=(0,y.useState)(!1);return(0,s.jsxs)(Z.Provider,{value:{openFeaturePreviewModal:()=>a(!0)},children:[t,(0,s.jsx)(m.u_,{modalSize:"xl",isOpen:n,onClose:()=>a(!1),hasCloseButton:!0,title:(0,s.jsx)(b.Z,{defaultMessage:"Feature preview",id:"3H/t1552xG"}),children:(0,s.jsx)(z,{})})]})},A=()=>(0,y.useContext)(Z);function z(e){let{includeTitle:t}=e,n=function(){let{value:e}=(0,h.FL)("latex_ga"),t=(0,h.Zr)("fp_menu","features",E,_),n=(0,N.i)(),s=(0,M.U)(),{value:a,source:i}=(0,l.h)({}),{preview_feature_uses_artifacts:r,enabled_artifacts_attachments:o,preview_feature_uses_harmony:c,preview_feature_uses_latex:d,...u}=t,m={...u};return!n&&r&&(m.preview_feature_uses_artifacts=r),a&&"experiment"===i&&r||(m.enabled_artifacts_attachments=o),s&&c&&(m.preview_feature_uses_harmony=c),!e&&d&&(m.preview_feature_uses_latex=d),m}();if(!(Object.keys(n).length>0))return;let a=(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{id:"feature-preview",className:"text-text-400 text-sm pt-4 pb-8",children:(0,s.jsx)(b.Z,{defaultMessage:"Preview and provide feedback on upcoming enhancements to our platform. Please note: experimental features might influence Claude’s behavior and some interactions may differ from the standard experience.",id:"TJ0Nj7aQ5C"})}),(0,s.jsx)("div",{className:"flex flex-col gap-4",children:Object.entries(n).map((e,t)=>{let[n,a]=e;return(0,s.jsxs)(s.Fragment,{children:[t>0&&(0,s.jsx)("div",{className:"border-t border-border-300"}),(0,s.jsx)(D,{label:n,...a},n)]})})})]});return t?(0,s.jsxs)(x.QQ,{children:[(0,s.jsx)(u.NZ,{children:(0,s.jsx)(b.Z,{defaultMessage:"Feature preview",id:"3H/t1552xG"})}),a]}):a}function D(e){var t;let{label:n,...l}=e,u=(0,w.Z)(),{track:m}=(0,i.z$)(),{addSuccess:x}=(0,o.e)(),{account:h}=(0,r.t)(),{mutate:g}=(0,a.Ck)(),{checked:v,disabled:b,tooltipContent:k}=T(n),C=(0,y.useCallback)(()=>{h&&(m({event_key:"claudeai.settings.preview_feature.toggled",account_uuid:h.uuid,feature_id:n,action:!0===v?"disable":"enable"}),x(u.formatMessage({defaultMessage:"{title} {action}",id:"XuGv50sPs9"},{title:l.title,action:v?"disabled":"enabled"})),g({...h.settings,[n]:!v}))},[h,m,n,v,x,u,l.title,g]);return(0,s.jsxs)("div",{className:"flex flex-row w-full gap-4 items-center",children:[(0,s.jsx)(j.default,{src:"/images/feature-preview/square/".concat(null!==(t=L[n])&&void 0!==t?t:"generic",".png"),style:{objectFit:"cover",width:62,height:62},className:"rounded-lg border border-border-300",width:248,height:248,alt:u.formatMessage({defaultMessage:"Preview image of feature",id:"6VliGZPeZA"})}),(0,s.jsxs)("div",{className:"flex flex-col gap-2 flex-grow",children:[(0,s.jsx)("h3",{className:"text-text-100 text-md",children:l.titleKey?(0,s.jsx)(d.d7,{id:l.titleKey}):l.title}),(0,s.jsx)("p",{className:"text-text-100 text-sm",children:l.descriptionKey?(0,s.jsx)(d.d7,{id:l.descriptionKey}):l.description})]}),(0,s.jsx)(p.u,{tooltipContent:k?(0,s.jsx)("div",{className:"text-center",children:k}):null,children:(0,s.jsx)("label",{className:(0,f.Z)(!b&&"cursor-pointer"),children:(0,s.jsx)(c.Z,{disabled:b,checked:v,onChange:C},n)})})]})}let T=e=>{var t,n,s;let a=(0,w.Z)(),{account:i}=(0,r.t)(),{value:o}=(0,h.FL)("force_harmony"),{value:c,source:d}=(0,l.h)(null!==(n=null==i?void 0:i.settings)&&void 0!==n?n:{}),{data:u}=(0,C.Kg)(),m=!(null==u?void 0:u.disabled_features.includes("web_search")),x=(0,r.Cf)(),p=null!==(s=null==i?void 0:null===(t=i.settings)||void 0===t?void 0:t[e])&&void 0!==s&&s,f="preview_feature_uses_harmony"===e&&o;switch(e){case"preview_feature_uses_harmony":return{checked:o||p,disabled:f,tooltipContent:null};case"enabled_artifacts_attachments":return{checked:"flag"===d&&!!c||p,disabled:f,tooltipContent:null};case"enabled_web_search":if(x&&!m)return{checked:!1,disabled:!0,tooltipContent:a.formatMessage({defaultMessage:"This feature has been disabled by your administrator.",id:"Jpvq2WYysx"})};return{checked:p,disabled:f,tooltipContent:null};default:return{checked:p,disabled:f,tooltipContent:null}}},L={preview_feature_uses_artifacts:"artifacts",preview_feature_uses_latex:"latex",preview_feature_uses_citations:"generic",preview_feature_uses_harmony:"harmony",enabled_artifacts_attachments:"analyse",enabled_turmeric:"harmony",enabled_gdrive:"google-drive",enabled_web_search:"web-search",enabled_compass:"compass",enabled_bananagrams:"bananagrams",enabled_foccacia:"foccacia",enabled_sourdough:"sourdough"}},63731:function(e,t,n){n.d(t,{Y7:function(){return v},hK:function(){return y},qg:function(){return j}});var s=n(27573),a=n(27218),l=n(5984),i=n(70354),r=n(10228),o=n(7533),c=n(72243),d=n(10607),u=n(7653),m=n(45790),x=n(40950),p=n(59016),h=n(32559),f=n(57393),g=n(53545);let v=(0,s.jsx)(m.Z,{defaultMessage:"Everyone in your organization can view and use this project",id:"o6dyBu92Ad"}),j=(0,s.jsx)(m.Z,{defaultMessage:"Only invited members can view and use this project",id:"r65HKpZU8I"});function y(e){var t,n,y,b,w,k;let{syncSources:C=[],onProjectCreated:M,onError:N,onCancel:S,strings:_}=e,E=(0,x.Z)(),Z=(0,a.Cf)(),I=(0,g.DU)(),{customInstructions:A,type:z,subtype:D}=null!=I?I:{},[T,L]=(0,u.useState)({name:"",description:null!==(t=_.createProjectDescriptionDefault)&&void 0!==t?t:"",type:z,subtype:D,is_private:!0}),[F,R]=(0,u.useState)({}),[P,O]=(0,u.useState)(!1),U=C.length>0,G=C.some(e=>e.type===r.Fg.GITHUB),H=C.some(e=>e.type===r.Fg.GDRIVE),K=G&&H?(0,s.jsx)(m.Z,{defaultMessage:"Github and GDrive attachments can only be added to private projects",id:"rqNebqAfPF"}):G?(0,s.jsx)(m.Z,{defaultMessage:"Github attachments can only be added to private projects",id:"eyujXWQfg4"}):H?(0,s.jsx)(m.Z,{defaultMessage:"GDrive attachments can only be added to private projects",id:"DMBgAV43lL"}):(0,s.jsx)(m.Z,{defaultMessage:"Some of these attachments can only be added to private projects",id:"2ssKO1VReL"}),{mutateAsync:B}=(0,h.Qs)(),{activeOrganization:W}=(0,a.t)(),{data:V}=(0,h.Kn)(),{account:Y}=(0,a.t)(),{data:q,isLoading:Q}=(0,h.O3)(),{data:J}=(0,p.KJ)(),X=J&&!U,$=null==q?void 0:q.filter(e=>{var t;return(null===(t=e.creator)||void 0===t?void 0:t.uuid)===(null==Y?void 0:Y.uuid)&&!e.is_starter_project}),ee=!Q&&(null==$?void 0:$.length)===0,et=e=>t=>{L(n=>({...n,[e]:t.target.value})),R(t=>({...t,[e]:null}))},en=e=>{L(t=>({...t,is_private:e.target.checked&&"private"===e.target.value}))},es=()=>{let e={};return""===T.name.trim()&&(e.name=E.formatMessage({defaultMessage:"Project name is required",id:"n5cqkMmIMW"})),R(e),0===Object.keys(e).length},ea=async e=>{if(e.preventDefault(),!P&&es()){O(!0);try{let e={...T};A&&(e.prompt_template=A.replaceAll("{{PROJECT_NAME}}",T.name));let t=await B(e);M(t)}catch(e){N(e)}finally{O(!1)}}};return(0,s.jsxs)("form",{className:"grid grid-cols-1 gap-4",onSubmit:e=>ea(e),children:[ee&&!I&&(0,s.jsxs)("div",{className:"bg-bg-300 border-border-400/10 text-text-300 flex w-full flex-col items-start justify-start gap-2 rounded-xl border px-5 pb-5 pt-4 text-sm",children:[(0,s.jsx)("div",{className:"flex items-center gap-1 font-medium",children:(0,s.jsx)(m.Z,{defaultMessage:"How to use projects",id:"moKJkVk/qB"})}),Z?(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("div",{children:(0,s.jsx)(m.Z,{defaultMessage:"Use Projects with your team to do things like:",id:"fcUpqajVgl"})}),(0,s.jsxs)("ul",{className:"list-disc pl-4",children:[(0,s.jsx)("li",{children:(0,s.jsx)(m.Z,{defaultMessage:"Query and analyze information about customers, sales calls, and project plans",id:"1YyB53/KOc"})}),(0,s.jsx)("li",{children:(0,s.jsx)(m.Z,{defaultMessage:"Upload files from your codebase to understand, improve, and contribute",id:"HXj87AQH0P"})}),(0,s.jsx)("li",{children:(0,s.jsx)(m.Z,{defaultMessage:"Generate analysis and reports from one consistent set of materials",id:"3XvEQYrcUv"})}),(0,s.jsx)("li",{children:(0,s.jsx)(m.Z,{defaultMessage:"Create content informed by company policies and documentation",id:"HrODk029zr"})})]}),(0,s.jsx)("p",{children:(0,s.jsx)(m.Z,{defaultMessage:"Start by creating a memorable title and description to organize your project. You can always edit it later.",id:"qEWJMy5mr7"})})]}):(0,s.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,s.jsx)("p",{children:(0,s.jsx)(m.Z,{defaultMessage:"Projects help organize your work and leverage knowledge across multiple conversations. Upload docs, code, and files to create themed collections that Claude can reference again and again.",id:"7HFalNigyO"})}),(0,s.jsx)("p",{children:(0,s.jsx)(m.Z,{defaultMessage:"Start by creating a memorable title and description to organize your project. You can always edit it later.",id:"qEWJMy5mr7"})})]}),V&&(0,s.jsx)("div",{children:(0,s.jsx)(m.Z,{defaultMessage:"Curious to learn more? <link>Try an example project</link>",id:"+AcqvUzRry",values:{link:e=>(0,s.jsx)(i.z,{variant:"underline",size:"unset",href:"/project/".concat(V),children:e})}})})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)(l.oi,{autoFocus:!0,name:"name",className:"w-full",label:null!==(n=_.createProjectNameLabel)&&void 0!==n?n:E.formatMessage({defaultMessage:"What are you working on?",id:"R2IogQsIBI"}),placeholder:null!==(y=_.createProjectNamePlaceholder)&&void 0!==y?y:E.formatMessage({defaultMessage:"Name your project",id:"BtIbm/e/WX"}),size:"lg",onChange:et("name"),error:!!F.name,"data-1p-ignore":!0}),F.name&&(0,s.jsx)("div",{className:"text-danger-000 mt-1 text-right text-xs font-medium",children:F.name})]}),!I&&(0,s.jsx)("div",{children:(0,s.jsx)(l.Kx,{name:"description",className:"w-full",label:null!==(b=_.createProjectDescriptionLabel)&&void 0!==b?b:E.formatMessage({defaultMessage:"What are you trying to achieve?",id:"RPsTh+NBxY"}),placeholder:null!==(w=_.createProjectDescriptionPlaceholder)&&void 0!==w?w:E.formatMessage({defaultMessage:"Describe your project, goals, subject, etc...",id:"WStTnUWlP8"}),minRows:3,onChange:et("description"),error:F.description})}),Z?(0,s.jsxs)("fieldset",{children:[(0,s.jsx)("div",{className:"mb-2 text-sm font-medium",children:(0,s.jsx)(m.Z,{defaultMessage:"Visibility",id:"JAkIqbzRj5"})}),(0,s.jsxs)("label",{className:(0,d.Z)("mb-2 flex w-full gap-2",!X&&"opacity-40"),children:[(0,s.jsx)("input",{name:"visibility",className:"mt-0.5",type:"radio",value:"open",checked:!T.is_private,onChange:en,disabled:!X}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsx)(o.$,{size:16,className:"-mt-1 mr-1 inline-block"}),null!==(k=null==W?void 0:W.name)&&void 0!==k?k:(0,s.jsx)(m.Z,{defaultMessage:"Organization",id:"K56Dims7Up"})]}),(0,s.jsx)("div",{className:"text-text-300 text-xs",children:J?U?K:v:(0,s.jsx)(m.Z,{defaultMessage:"Public projects are disabled by your organization",id:"c2HBgZtgDR"})})]})]}),(0,s.jsxs)("label",{className:"flex w-full gap-2",children:[(0,s.jsx)("input",{name:"visibility",className:"mt-0.5",type:"radio",value:"private",checked:T.is_private,onChange:en}),(0,s.jsxs)("div",{children:[(0,s.jsxs)("div",{className:"text-sm",children:[(0,s.jsx)(c.$,{size:16,className:"-mt-1 mr-1 inline-block"}),(0,s.jsx)(m.Z,{defaultMessage:"Private",id:"viXE3205/2"})]}),(0,s.jsx)("div",{className:"text-text-300 text-xs",children:j})]})]})]}):null,(0,s.jsx)("div",{className:"mt-2 flex justify-end",children:(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(i.z,{onClick:S,href:S?void 0:"/projects",variant:"secondary",disabled:P,children:(0,s.jsx)(m.Z,{defaultMessage:"Cancel",id:"47FYwba+bI"})}),(0,s.jsx)(f.e,{children:(0,s.jsx)(i.z,{type:"submit",loading:P,children:(0,s.jsx)(m.Z,{defaultMessage:"Create project",id:"VUN1K7kSzC"})})})]})})]})}},20355:function(e,t,n){n.d(t,{A:function(){return u},S:function(){return d}});var s=n(27573),a=n(44512),l=n(1133),i=n(6385),r=n(7653),o=n(77879);let c=(0,r.createContext)({isExpanded:!1,setIsExpanded:()=>void 0,closeSidebarOnMobile:()=>void 0,isMobile:!1});function d(){return(0,r.useContext)(c)}function u(e){let{children:t}=e,[n,d]=(0,a.nh)(i.cn.SIDEBAR_PINNED,!1),[u,m]=(0,a.nh)(i.cn.SIDEBAR_VISIBLE_ON_LOAD,!1),{width:x=0}=(0,o.iP)(),p=0===x?!u:x<1024,[h,f]=r.useState(u&&n);(0,o.OR)("keydown",e=>{var t;let n=(0,l.V5)()?e.metaKey:e.ctrlKey;(null===(t=e.key)||void 0===t?void 0:t.toLowerCase())==="."&&n&&(e.preventDefault(),f(e=>!e))});let g=(0,r.useMemo)(()=>({isExpanded:h,setIsExpanded:e=>{f(e),p||d(e)},closeSidebarOnMobile:()=>{p&&h&&f(!1)},isMobile:p}),[h,f,p,d]);return(0,r.useEffect)(()=>{p?(m(!1),f(!1)):(m(!0),f(n))},[p,m,f,n]),(0,s.jsx)(c.Provider,{value:g,children:t})}},98279:function(e,t,n){n.d(t,{Q:function(){return _},N:function(){return I}});var s=n(27573),a=n(16282),l=n(32006),i=n(32737),r=n(10228),o=n(10607);function c(e){let{size:t,content:n,fileExtension:l,extensionAccessory:r,tooltipContent:c,isError:d,isInteractive:u,externalDocument:m,hFullContent:x,onRemove:p,onContentClick:h,href:f}=e;return(0,s.jsx)(i.u,{tooltipContent:c,side:"bottom",children:(0,s.jsxs)(a.tK,{size:t,onRemoveFile:p,isInteractive:u,className:"!p-0",children:[p&&(0,s.jsx)("div",{className:"absolute left-1 top-1 z-10",children:(0,s.jsx)(a.TF,{onRemoveFile:p})}),(0,s.jsxs)(a.ek,{size:t,onClick:h,isInteractive:u,href:f,children:[(0,s.jsx)(a.K3,{isError:d,size:t,isInteractive:u}),(0,s.jsx)("div",{className:(0,o.Z)(d?"text-always-black":"text-accent-secondary-200","pointer-events-none relative z-[1] flex-1 break-words px-2.5 text-center leading-tight tracking-tight","md"===t&&"mb-1 line-clamp-3 px-2.5 text-[0.85rem] font-semibold leading-[0.825rem] tracking-tighter","mdlg"===t&&"line-clamp-3 px-2.5 text-[0.85rem] font-semibold -mb-2 leading-[1.15rem] tracking-tighter","lg"===t&&"line-clamp-4 px-3 text-sm font-semibold",x&&"h-full","lg"===t&&!x&&"pt-6"),children:n}),(0,s.jsx)(a.PJ,{fileExtension:l,size:t,externalDocument:m,extensionAccessory:r})]})]})})}function d(e){let{type:t}=e,n={[r.Fg.GDRIVE]:{variant:l.cT.DOCS,label:"DOC"},[r.Fg.OUTLINE]:{variant:void 0,label:"DOC"},[r.Fg.GITHUB]:{variant:void 0,label:"CODE"},[r.Fg.SALESFORCE]:{variant:void 0,label:"DOC"},[r.Fg.GMAIL]:{variant:void 0,label:"EMAIL"},[r.Fg.GCAL]:{variant:void 0,label:"EVENT"},[r.Fg.SLACK]:{variant:void 0,label:"MSG"},[r.Fg.ASANA]:{variant:void 0,label:"DOC"}};return(0,s.jsxs)("div",{className:"flex flex-row gap-1 items-center",children:[(0,s.jsx)(l.j0,{className:"!text-always-black",type:t,size:12,variant:n[t].variant}),(0,s.jsx)("span",{className:"pt-px",children:n[t].label})]})}var u=n(96070),m=n(11607),x=n(13890),p=n(16963),h=n(30070),f=n(85830),g=n(39343),v=n(7653),j=n(45790),y=n(66605),b=n(85465),w=n(95606),k=n(91217),C=n(84344),M=n(71101),N=n(31275),S=n(90824);function _(e){let{uuid:t,syncSource:n,size:a,onRemove:l,isInteractive:i=!0,isEditable:o}=e,{mutateAsync:f}=(0,y.us)(),g=(0,b.l)(),_=(0,u.b)(),[I,A]=(0,v.useState)(!1),z=(0,x.ir)(null==n?void 0:n.status.state),D=(0,v.useCallback)(()=>{if(n){if(n.type&&n.status.state===r.co.UNAUTHENTICATED)g(n.type);else if(n.type===r.Fg.GITHUB)A(!0);else if(n.type===r.Fg.GDRIVE){let e=n.config;window.open((0,C.m)(e.uri),"_blank")}else throw Error("Unknown sync source type")}},[n,g]),T=(0,v.useCallback)(()=>{f(t),null==l||l()},[f,t,l]),{projectUuid:L}=(0,k.r)(),F=!!n&&[r.co.CREATED,r.co.PENDING,r.co.UPDATING].includes(n.status.state);return _?(0,s.jsx)(S.n4,{location:"chat",projectUuid:L,syncSource:n,handleRemove:o?T:void 0,isEditable:o}):n?F&&n.type?(0,s.jsx)(c,{size:a,content:(0,s.jsx)("div",{className:"flex items-center",children:(0,s.jsx)(m.Loading,{size:"sm"})}),onRemove:l?T:void 0,isInteractive:i,tooltipContent:void 0,fileExtension:(0,s.jsx)(d,{type:n.type}),extensionAccessory:null,isError:!1,externalDocument:!1,hFullContent:!1}):(0,s.jsxs)(s.Fragment,{children:[n.type===r.Fg.GITHUB&&(0,s.jsx)(N.U,{location:"chat",projectUuid:L,isOpen:I,onClose:()=>A(!1),syncSource:n}),(0,s.jsx)(c,{size:a,content:z?(0,s.jsx)(j.Z,{defaultMessage:"Content not accessible",id:"IPK01iLM7n"}):n.type===r.Fg.GITHUB?(0,s.jsx)(E,{config:n.config}):n.type===r.Fg.GDRIVE?(0,s.jsx)(M.C,{uri:n.config.uri}):null,hFullContent:n.type===r.Fg.GITHUB&&!z,onContentClick:D,onRemove:l?T:void 0,externalDocument:n.type===r.Fg.GDRIVE&&!z,isInteractive:i,isError:z,tooltipContent:z?(0,s.jsxs)("div",{className:"inline-flex gap-1 items-center",children:[Z(n),"\xa0",i&&(0,s.jsx)(p.G,{})]}):void 0,extensionAccessory:z&&(0,s.jsxs)("div",{className:"inline-flex ml-1",children:[(0,s.jsx)("div",{className:"inline-block w-[0.5px] bg-border-300"}),(0,s.jsx)(h.v,{className:"text-danger-000 ml-1.5 mr-0.5",weight:"bold",size:12})]}),fileExtension:(0,s.jsx)(d,{type:n.type})})]}):(0,s.jsx)("div",{className:"p-0.5",children:(0,s.jsx)(w.e,{isShown:!0})})}function E(e){let{config:t}=e;return(0,s.jsx)("div",{className:"h-full pt-4 flex flex-col gap-0.5 fade-out-bottom fade-out-right leading-tight pointer-events-none relative overflow-hidden break-words text-left tracking-tighter opacity-70 font-mono text-[0.5rem]",children:Object.entries(t.filters.filters).map(e=>{let[n,a]=e;return(0,s.jsxs)("div",{className:"inline-flex gap-1 items-center text-nowrap",children:[(0,s.jsx)("span",{children:"include"===a?(0,s.jsx)(f.f,{size:12,weight:"fill"}):(0,s.jsx)(g.S,{size:12})}),"/"===n?t.repo:n.replace(/^\/|\/$/,"")]},n)})})}let Z=e=>{switch(e.status.state){case r.co.DISABLED:return x.p5;case r.co.UNAUTHENTICATED:return(0,s.jsx)(j.Z,{defaultMessage:"Sign in for access",id:"w6mjA9GP58"});case r.co.ACCESS_DENIED:return(0,s.jsx)(j.Z,{defaultMessage:"Request access via {source}",id:"OJ2RQ+ZgAF",values:{source:x.X_[e.type]}})}},I=e=>(null==e?void 0:e.status.state)!==r.co.DISABLED&&((null==e?void 0:e.status.state)===r.co.UNAUTHENTICATED||(null==e?void 0:e.status.state)!==r.co.ACCESS_DENIED||(null==e?void 0:e.type)==="gdrive")},64014:function(e,t,n){n.d(t,{i:function(){return l}});var s=n(87033),a=n(58183);let l=()=>{let e=(0,a.useLayer)("frontend"),{value:t}=(0,s.FL)("artifacts_enabled");return!!t||e.get("artifacts_enabled_by_default",!1)}},64295:function(e,t,n){function s(e){return"text"===e.type&&e.text?{...e,text:e.text.replace("​","")}:e.content?{...e,content:e.content.map(s)}:e}n.d(t,{A5:function(){return a},_B:function(){return s}});let a=e=>{let t="",n=0,s=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,l=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("doc"===e.type&&e.content)for(let t of e.content)s(t);else if("paragraph"===e.type){if(e.content)for(let t of e.content)s(t);t+="\n"}else if("text"===e.type){let n=e.text;if(e.marks)for(let t of e.marks)"bold"===t.type?n="**".concat(n,"**"):"italic"===t.type?n="*".concat(n,"*"):"underline"===t.type?n="__".concat(n,"__"):"strike"===t.type?n="~~".concat(n,"~~"):"code"===t.type&&(n="`".concat(n,"`"));t+=n}else if("codeBlock"===e.type){let n=e.attrs&&"string"==typeof e.attrs.language?e.attrs.language:"";if(t+="\n```".concat(n,"\n"),e.content)for(let t of e.content)s(t);t+="\n```\n\n"}else if("bulletList"===e.type&&e.content)for(let t of e.content)s(t);else if("orderedList"===e.type&&e.content)for(let t=0;t<e.content.length;t++)s(e.content[t],t+1,!0);else if("listItem"===e.type&&e.content){let i="   ".repeat(n);for(let r of(l?t+="".concat(i).concat(a,". "):t+="".concat(i,"* "),e.content))n+=1,s(r),n-=1}};return s(e),t.replace("​","").trim()}},60509:function(e,t,n){n.d(t,{MD:function(){return x},S3:function(){return d},x2:function(){return m}});var s=n(13262),a=n(93338),l=n(7653),i=n(5362),r=n(8571),o=n(27218);let c=["ar","bg","cs","da","de","el","en","en-AU","en-CA","en-NZ","en-GB","es","es-ES","es-419","et","fi","fil","fr","fr-CA","fr-FR","he","hu","hr","id","it","it-IT","ja","ko","lt","lv","ms","mt","nb","nl","no","pl","pt","pt-BR","ro","ru","sk","sl","sv","th","tr","vi","zh","zh-HK","zh-TW"],d=function(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0],{activeOrganization:t}=(0,o.t)(),{data:n,mutate:a,isIdle:r}=(0,i.uC)("/api/stripe/".concat(null==t?void 0:t.uuid,"/intent"),"POST",{enabled:!!(null==t?void 0:t.uuid),retry:2,retryDelay:2e3,mutationKey:[s.CN,null==t?void 0:t.uuid]});return(0,l.useEffect)(()=>{r&&e&&a()},[a,r,e]),n},u=null,m=()=>{let{stripePublishableKey:e}=(0,r.m)();return u||(u=(0,a.J)(e)),u},x=e=>{if(c.includes(e))return e;let t=e.split("-")[0];return c.includes(t)?t:"en"}},69321:function(e,t,n){n.d(t,{ClientIntlProvider:function(){return d},Gc:function(){return m},d7:function(){return u},lF:function(){return x}});var s=n(27573),a=n(43290),l=n(7653),i=n(22247),r=n(45790),o=n(72358);let c=()=>void 0;function d(e){let{locale:t,messages:n,children:r,hideErrors:o}=e;return(0,l.useEffect)(()=>{a.Zr.defaultLocale=t},[t]),(0,s.jsx)(i.Z,{locale:t,messages:n,onError:o?c:void 0,fallbackOnEmptyString:!1,children:r})}function u(e){let{id:t}=e;return(0,s.jsx)(r.Z,{id:(0,o.g2)(t),defaultMessage:" "})}function m(e){let{id:t,intl:n}=e;return n.formatMessage({id:(0,o.g2)(t),defaultMessage:" "})}function x(e){let{id:t,intl:n}=e;return n.formatMessage({id:(0,o.Y_)(t),defaultMessage:" "})}},7276:function(e,t,n){n.d(t,{GR:function(){return l.QQ},M$:function(){return d},NZ:function(){return u},mH:function(){return c}});var s=n(41596),a=n(9788),l=n(22523);function i(){let e=(0,s._)(["p-4 bg-bg-300 rounded-xl"]);return i=function(){return e},e}function r(){let e=(0,s._)(["basis-0 flex-col gap-1 inline-flex"]);return r=function(){return e},e}function o(){let e=(0,s._)(["items-center gap-2 inline-flex text-text-000 font-styrene font-medium text-lg leading-7"]);return o=function(){return e},e}let c=a.q.div(i()),d=a.q.div(r()),u=a.q.div(o())},11579:function(e,t,n){n.d(t,{l:function(){return a}});var s=n(27573);let a=e=>{let{height:t,className:n}=e;return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 139 34",className:n,height:t,fill:"currentColor","aria-label":"Claude",children:(0,s.jsx)("path",{d:"M18.07 30.79c-5.02 0-8.46-2.8-10.08-7.11a19.2 19.2 0 0 1-1.22-7.04C6.77 9.41 10 4.4 17.16 4.4c4.82 0 7.78 2.1 9.48 7.1h2.06l-.28-6.9c-2.88-1.86-6.48-2.81-10.87-2.81-6.16 0-11.41 2.77-14.34 7.74A16.77 16.77 0 0 0 1 18.2c0 5.53 2.6 10.42 7.5 13.15a17.51 17.51 0 0 0 8.74 2.06c4.78 0 8.57-.91 11.93-2.5l.87-7.62h-2.1c-1.26 3.48-2.76 5.57-5.25 6.68-1.22.55-2.76.83-4.62.83Zm21.65-26.4.2-3.39H38.5l-6.33 1.9v1.02l2.8 1.3v23.79c0 1.62-.82 1.98-3 2.25V33h10.75v-1.74c-2.17-.27-3-.63-3-2.25V4.4Zm42.75 29h.83l7.27-1.38v-1.78l-1.03-.07c-1.7-.16-2.13-.52-2.13-1.9V15.58l.2-4.07h-1.15l-6.87.99v1.73l.67.12c1.85.28 2.4.8 2.4 2.1v11.3C80.9 29.13 79.2 30 77.19 30c-2.26 0-3.64-1.15-3.64-3.8V15.58l.2-4.07h-1.19l-6.87.99v1.73l.71.12c1.86.28 2.41.8 2.41 2.1v10.43c0 4.42 2.49 6.52 6.48 6.52 3.04 0 5.53-1.62 7.39-3.88l-.2 3.88Zm-20-14.06c0-5.65-3-7.82-8.4-7.82-4.79 0-8.27 1.97-8.27 5.25 0 1 .36 1.74 1.07 2.25l3.64-.47c-.16-1.1-.24-1.78-.24-2.05 0-1.86.99-2.8 3-2.8 2.97 0 4.47 2.09 4.47 5.44v1.11l-7.51 2.25c-2.49.67-3.91 1.27-4.86 2.65a5 5 0 0 0-.71 2.8c0 3.2 2.21 5.46 5.97 5.46 2.72 0 5.13-1.23 7.23-3.56.75 2.33 1.9 3.56 3.95 3.56 1.66 0 3.16-.68 4.5-1.98l-.4-1.38c-.59.16-1.14.23-1.73.23-1.15 0-1.7-.9-1.7-2.68v-8.26Zm-9.6 10.87c-2.05 0-3.31-1.19-3.31-3.28 0-1.43.67-2.26 2.1-2.73l6.08-1.94v5.85c-1.94 1.46-3.08 2.1-4.86 2.1Zm63.3 1.81v-1.78l-1.02-.07c-1.7-.16-2.14-.52-2.14-1.9V4.4l.2-3.4h-1.42l-6.32 1.9v1.02l2.8 1.3v7.83a8.84 8.84 0 0 0-5.37-1.54c-6.28 0-11.18 4.78-11.18 11.93 0 5.89 3.51 9.96 9.32 9.96 3 0 5.61-1.47 7.23-3.72l-.2 3.72h.83l7.27-1.39Zm-13.15-18.13c3 0 5.25 1.74 5.25 4.94v9a7.2 7.2 0 0 1-5.21 2.1c-4.31 0-6.48-3.4-6.48-7.94 0-5.1 2.48-8.1 6.44-8.1Zm28.52 4.5c-.55-2.64-2.17-4.15-4.42-4.15-3.36 0-5.7 2.53-5.7 6.17 0 5.37 2.85 8.85 7.44 8.85a8.6 8.6 0 0 0 7.38-4.35l1.35.36c-.6 4.66-4.82 8.14-10 8.14-6.08 0-10.27-4.5-10.27-10.9 0-6.45 4.54-11 10.63-11 4.54 0 7.74 2.73 8.77 7.48l-15.84 4.85V21.7l10.66-3.32Z"})})}},72538:function(e,t,n){n.d(t,{p:function(){return o}});var s=n(27573),a=n(32737),l=n(10607),i=n(23607),r=n(7653);function o(e){let{state:t="static",className:o="w-8 text-accent-brand inline-block",isInteractive:d=!0}=e,u=(0,r.useRef)(null),m=(0,r.useRef)(t),x=(0,i.J)(),[p,h]=(0,r.useState)(),[f,g]=(0,r.useState)(t),[v,j]=(0,r.useReducer)(e=>e+1,0);(0,r.useEffect)(()=>{n.e(8199).then(n.bind(n,88199)).then(e=>{h(e.animations)})},[]),(0,r.useEffect)(()=>g(t),[t]),(0,r.useEffect)(()=>{let e;let t=u.current&&"function"==typeof u.current.animate;if(!x&&"static"!==f&&t&&p){let{frameCount:t,speed:n}=p[f],s=Array.from({length:t},(e,n)=>({transform:"translateY(-".concat(100/t*n,"%)")}));e=u.current.animate(s,{duration:n*s.length,iterations:"tickle"===f?1:1/0,easing:"steps(".concat(s.length,", jump-none)")}),"tickle"===f&&(null==e||e.addEventListener("finish",()=>g(m.current)))}return"tickle"!==f&&(m.current=f),()=>{null==e||e.cancel()}},[p,f,x]);let y=()=>{d&&"writing"!==f&&"thinking"!==f&&"tickle"!==f&&(g("tickle"),j())},b="Hi, I’m Claude. How can I help you today?";v<32&&v>24?b="Ugh, well you can’t do that forever":v<=24&&v>18?b="Alright, alright, you have my attention!":v<=18&&v>12?b="Are you still doing that?":v<=12&&v>5&&(b="Yes, yes. What can I do for you?");let w=!d||"writing"===f||"thinking"===f;if("static"===f||x||!p)return(0,s.jsx)(a.u,{className:(0,l.Z)("font-tiempos max-w-none italic tracking-tight",w&&"opacity-0"),tooltipContent:b,side:"right",children:(0,s.jsx)("div",{className:(0,l.Z)(o,"select-none"),onMouseDown:y,children:(0,s.jsx)(c,{className:"w-full fill-current"})})});let{svg:k,width:C,height:M}=p[f];return(0,s.jsx)(a.u,{className:(0,l.Z)("font-tiempos max-w-none italic tracking-tight",w&&"opacity-0"),tooltipContent:b,side:"right",children:(0,s.jsx)("div",{className:(0,l.Z)(o,"overflow-hidden select-none"),style:{aspectRatio:C/M},onMouseDown:y,children:(0,s.jsx)("div",{ref:u,className:"[&>svg]:block [&>svg]:w-full [&>svg]:fill-current",dangerouslySetInnerHTML:{__html:k}})})})}function c(e){return(0,s.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 100",...e,children:(0,s.jsx)("path",{d:"m19.6 66.5 19.7-11 .3-1-.3-.5h-1l-3.3-.2-11.2-.3L14 53l-9.5-.5-2.4-.5L0 49l.2-1.5 2-1.3 2.9.2 6.3.5 9.5.6 6.9.4L38 49.1h1.6l.2-.7-.5-.4-.4-.4L29 41l-10.6-7-5.6-4.1-3-2-1.5-2-.6-4.2 2.7-3 3.7.3.9.2 3.7 2.9 8 6.1L37 36l1.5 1.2.6-.4.1-.3-.7-1.1L33 25l-6-10.4-2.7-4.3-.7-2.6c-.3-1-.4-2-.4-3l3-4.2L28 0l4.2.6L33.8 2l2.6 6 4.1 9.3L47 29.9l2 3.8 1 3.4.3 1h.7v-.5l.5-7.2 1-8.7 1-11.2.3-3.2 1.6-3.8 3-2L61 2.6l2 2.9-.3 1.8-1.1 7.7L59 27.1l-1.5 8.2h.9l1-1.1 4.1-5.4 6.9-8.6 3-3.5L77 13l2.3-1.8h4.3l3.1 4.7-1.4 4.9-4.4 5.6-3.7 4.7-5.3 7.1-3.2 5.7.3.4h.7l12-2.6 6.4-1.1 7.6-1.3 3.5 1.6.4 1.6-1.4 3.4-8.2 2-9.6 2-14.3 3.3-.2.1.2.3 6.4.6 2.8.2h6.8l12.6 1 3.3 2 1.9 2.7-.3 2-5.1 2.6-6.8-1.6-16-3.8-5.4-1.3h-.8v.4l4.6 4.5 8.3 7.5L89 80.1l.5 2.4-1.3 2-1.4-.2-9.2-7-3.6-3-8-6.8h-.5v.7l1.8 2.7 9.8 14.7.5 4.5-.7 1.4-2.6 1-2.7-.6-5.8-8-6-9-4.7-8.2-.5.4-2.9 30.2-1.3 1.5-3 1.2-2.5-2-1.4-3 1.4-6.2 1.6-8 1.3-6.4 1.2-7.9.7-2.6v-.2H49L43 72l-9 12.3-7.2 7.6-1.7.7-3-1.5.3-2.8L24 86l10-12.8 6-7.9 4-4.6-.1-.5h-.3L17.2 77.4l-4.7.6-2-2 .2-3 1-1 8-5.5Z"})})}},2723:function(e,t,n){n.d(t,{J:function(){return a}});var s=n(7653);let a=(e,t,n,a)=>(0,s.useMemo)(()=>{{let e=getComputedStyle(document.body);return"hsl(".concat(e.getPropertyValue("--".concat(a)),")")}},[n,a,t,e])},28386:function(e,t,n){n.d(t,{J:function(){return s}});let s={snappyOut:[.19,1,.22,1],inOutQuart:[.77,0,.175,1],outCirc:[.075,.82,.165,1]}},29670:function(e,t,n){n.d(t,{HY:function(){return i},mz:function(){return a},xG:function(){return s}});let s=function(e,t){let{preferWholeNumber:n}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e=Math.round(e);let s={minimumFractionDigits:2,maximumFractionDigits:2};n&&e/100%1==0&&(s.minimumFractionDigits=0,s.maximumFractionDigits=0);let a=navigator.languages&&navigator.languages.length?navigator.languages:navigator.language?navigator.language:"en-US",l="string"==typeof a?a:a[0];return(["SGD","AUD","NZD"].includes(t)||"USD"===t&&"en-US"!==l)&&(s.currencyDisplay="code"),new Intl.NumberFormat(a||void 0,{style:"currency",currency:t,...s}).format(e/100)};function a(e){let{amount:t,currency:n,preferWholeNumber:a}=e;return s(t,n,{preferWholeNumber:a})}let l={aud:{showIncluded:!0,taxLabel:"GST"},brl:{showIncluded:!1,taxLabel:null},cad:{showIncluded:!1,taxLabel:null},eur:{showIncluded:!1,taxLabel:"VAT"},gbp:{showIncluded:!0,taxLabel:"VAT"},nzd:{showIncluded:!0,taxLabel:"VAT"},sgd:{showIncluded:!0,taxLabel:"GST"},usd:{showIncluded:!1,taxLabel:null}};function i(e){var t;return null!==(t=l[e.toLowerCase()])&&void 0!==t?t:l.usd}},30131:function(e,t,n){n.d(t,{dI:function(){return c},lE:function(){return o}});var s=n(41270),a=n(87033),l=n(98649);let i=[],r=[];function o(){let e=c(),t=(0,a.Zr)("frontend_fallback_paprika_config","modes",r,d);return e.length>0?e:t}function c(){return(0,a.Zr)("paprika_config","modes",i,d)}let d=s.z.array(s.z.object({id:s.z.string(),title:s.z.string(),description:s.z.string(),description_key:s.z.string().optional(),paprika_mode_value:l.Xs.optional()}))}}]);